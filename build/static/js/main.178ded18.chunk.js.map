{"version":3,"sources":["components/Modals/ModalCommon/ModalCommon.jsx","img/common/defaultPlace.jpg","store/constants/commonConstants.js","utils/convertors/dateUtils.js","store/mainMenuReducer.js","utils/api/server.js","utils/api/api.js","store/systemReducer.js","store/collectReducer.js","store/rentReducer.js","store/simplePlaceReducer.js","components/Panels/Common/WithNotify/ButtonWithNotify.jsx","components/Panels/Common/HOCs/withNotify.jsx","components/Panels/AdminPanel/Collect/SimpleCollect/SimpleCollectItem.jsx","components/Panels/Common/HOCs/withHistorySave.jsx","components/Panels/Common/WithHistory/RichCellWithHistory.jsx","components/Panels/Common/WithHistory/Icon24ChevronRightWithHistory.jsx","components/Panels/AdminPanel/Team/TeamAdminList.jsx","store/tournamentsReducer.js","store/teamsReducer.js","components/Panels/Common/WithHistory/ButtonWithHistory.jsx","components/Panels/AdminPanel/Team/TeamAdminPanel.jsx","store/bidTeamsReducer.js","components/Panels/AdminPanel/ListItem/ListItem.jsx","components/Panels/AdminPanel/BidTeam/BidList.jsx","components/Panels/AdminPanel/BidTeam/BidTeamTournamentList.jsx","components/Panels/AdminPanel/BidTeam/BidTeamTournamentGroupsList.jsx","components/Panels/AdminPanel/BidTeam/BidTeamAdminPanel.jsx","components/Panels/AdminPanel/Team/TeamItem.jsx","components/Panels/AdminPanel/Tournament/TournamentAdminList.jsx","components/Panels/AdminPanel/Tournament/TournamentAdminPanel.jsx","components/Panels/AdminPanel/ListItem/BidListItem.jsx","store/matchReducer.js","components/Panels/AdminPanel/Match/MatchListItem.jsx","components/Panels/Common/Shedule/Shedule.jsx","components/Panels/AdminPanel/Tournament/TournamentItem.jsx","components/Panels/Common/BackButton/BackButton.jsx","components/Panels/Common/Hot/Hot.jsx","components/Panels/Common/WithHistory/CardWithHistory.jsx","components/Panels/Common/WithHistory/CellButtonWithHistory.jsx","components/Panels/Common/WithHistory/TabbarItemWithHistory.jsx","components/Panels/ProfilePanel/ProfilePanel.jsx","img/common/player300-s.png","img/common/stadium300-s.png","img/common/tournament300.png","store/profileReducer.js","store/cityReducer.js","store/vkReducer.js","components/Panels/AdminPanel/Match/MatchItem.jsx","App.js","store/userReducer.js","store/ampluaReducer.js","store/store.js","index.js"],"names":["ModalCommon","props","useState","selectedYear","setSelectedYear","selectedCity","setSelectedCity","selectedDate","setSelectedDate","useEffect","activeModal","modalName","id","header","data","title","mode","top","placeholder","onClose","Close","actions","size","onClick","message","Accept","Name","Surname","Birth","Register","City","action","bdate","isNaN","onChange","e","currentTarget","value","options","start","count","current","result","push","Date","getFullYear","map","year","label","renderOption","option","restProps","undefined","action2","min","day","month","max","onDateChange","profile","CityUmbracoId","style","color","CityName","cities","city","CityUmbracoName","currentDate","BidTeam","Id","AdminTournamentComment","TeamName","When","getDay","getMonth","TeamId","Team","TournamentGroupId","TournamentGroup","UserProfileId","UserProfile","Approved","Deleted","Published","EmptyTournament","Year","WhenBegin","WhenEnd","Details","Reglament","MatchLength","Logo","CityId","TournamentGroups","Admins","geo","Cities","Geo","Latitude","Longitude","Population","Owners","ampluaCathegoryTypes","ampluaTypes","IsPlayer","AmpluaCathegory","users","FirstName","SurName","FatherName","NickName","Photo","Datebirth","Leg","CityFrom","CityNow","Level","Total","ShotStrong","LongShotAccuracy","ShortShotAccuracy","RunSpeed","ShortPassingSpeed","LongPassingSpeed","ShortPassingAccuracy","LongPassingAccuracy","Stamina","Feints","Reaction","ScoringFlair","Intellect","Rejection","SlideEffect","Header","Creativity","Dribble","Opening","Charisma","BallTaking","FieldVision","BallWorkTime","OneTouchGameAccuracy","OneTouchGameFrequency","PsichologyStability","CurrentPhisicalForm","Injury","WhenInjuried","Comment","Amplua","KeyValuePercent","amplua","KeyFunctions","commonUtils","deepClone","obj","clObj","i","Object","copyCity","city_source","copyAmplua","amplua_source","copyKeyFunction","keyFunction_source","copyUser","user_source","keys","length","amp","keyF","copyOwner","owner_source","copyAccess","access_source","copyPlace","place_source","Owner","Address","Stages","Parking","Worktime","BreakTimes","DressingRooms","Areas","Price","Enabled","Access","copyCollect","collect_source","Place","Hour","Minute","DurationMinutes","Options","FixedByMemberPrice","UsersGroups","uGroup","NumberOf","Players","user","User","Payment","OrganizatorIsMember","UsersInvited","uInvited","ToBe","UsersWantsToParticipate","uWP","Permanent","AcceptedByPlaceOwner","Organizer","timeToString","hours","minutes","seconds","h","toString","m","s","dateTimeToTimeString","datetime","getHours","getMinutes","dateToString","date","newDate","args","dateOptions","weekday","getDate","toLocaleString","addToTime","getSeconds","datesWithoutTimeIsSame","date1","date2","dateSelectorValueToJSDateValue","dsValue","jSDateValueToDateSelectorValue","jsDate","ACTION_SET_ACTIVE_MENU_ITEM","initState","menuItems","name","position","enabled","show","activeItem","setActiveMenuItem","menuName","type","mainMenuReducer","state","find","it","authQueryString","window","location","search","PostJsonInstance","Axios","create","baseURL","backserver","timeout","method","headers","errorObj","text","resultcode","okObj","dat","VKAPI","get","then","ErrorMessage","catch","error","CityAPI","post","SimplePlaceAPI","cityId","startindex","formData","FormData","append","RentAPI","CollectAPI","userProfileId","simpleCollect","userProfile","JSON","stringify","simpleMember","reason","TeamAPI","teamId","ProfileAPI","vkUserData","vkUser","split","UTC","country","first_name","last_name","photo_100","photo_200","photo_max_orig","sex","timezone","userData","CityTournamentAdminAPI","cityUmbracoId","tournament","team","newgroup","oldgroup","userprofile","teamToSend","newgroupToSend","TournamentId","oldgroupToSend","newGroup","oldGroup","tournamentToSend","item","publish","tg","admintext","tournamentGroupToSend","tournamentGroup","tournamentGroupId","tGroup","TeamAdminAPI","getAll","getAllInCityByCityId","getAllByAdminProfileId","saveTeam","WhenBorn","publishTournament","deleteTeam","BidTeamAPI","bid","tournamentgroup","teamName","bidTeamToTournament","MatchAPI","matchInfo","match","TournamentAPI","tournamentId","ServiceAPI","ANY_ACTION_TYPE","SYSTEM_SET_LOADING","SYSTEM_CHECK_LOADING","SYSTEM_SET_CONNECTED","SYSTEM_SET_DISCONNECTED","SYSTEM_PUSH_TO_HISTORY","SYSTEM_SET_CURRENT_MODAL_WINDOW","SYSTEM_POP_FROM_HISTORY","SYSTEM_SET_GLOBAL_POPOUT","SYSTEM_SET_ERROR_MESSAGE","SYSTEM_RESET_ERROR","SYSTEM_SET_SHOW_ADMIN_TOURNEY_TAB","currentMenu","Connected","history","GlobalPopout","CurrentModalWindow","ErrorObject","ShowAdminTourneyTab","ShowAdminTeamTab","Loading","CheckLoading","setGlobalPopout","on","setCurrentModalWindow","modal","setErrorMessage","errorMessage","resetError","goToPanel","nextPanel","back","dispatch","getState","preLast","system","val","pushToHistory","systemReducer","loading","slice","showAdminTourneyTab","COLLECTS_SET_ALL_SIMPLE_COLLECTS","COLLECTS_SELECT_SIMPLE_COLLECT","COLLECTS_SET_COLLECT_ITEM_MODE","COLLECTS_DEL_SIMPLE_COLLECT","COLLECTS_ADD_SIMPLE_COLLECT","COLLECTS_SET_SIMPLE_COLLECT","COLLECTS_SET_SELECTED_COLLECT_MEMBERS","COLLECTS_DELETE_MEMBER_FROM_SIMPLE_COLLECTS","COLLECTS_ADD_MEMBER_TO_SELECTED_SIMPLE_COLLECT","prototype","addDays","days","this","setDate","collects","selected","setAllSimpleCollects","simplecollects","deleteMemberFromSimpleCollect","member","addMemberToSelectedSimpleCollect","setCollectItemMode","delSimpleCollect","collect","addSimpleCollect","setSimpleCollect","collectReducer","simplecollect","Members","members","col","res","filter","demoRents","RENTS_SET_RENTS","RENTS_SET_SELECTED_RENT","rents","selectedRent","selectedDayRents","setRents","rentReducer","r","From","rentDate","SimplePlaceId","simplePlaceId","demoPlaces","PLACES_SET_ALL_PLACES","PLACES_SET_PLACE_BY_UMBRACO_ID","PLACES_SET_SELECTED_PLACE","places","selectedPlace","setPlaces","simplePlaceReducer","x","placeId","withNotify","WrappedComponent","mapDispatchToProps","hocComponent","clickEvent","bind","AcceptAndClose","Yes","evt","handleClick","Message","prevProps","prevState","React","Component","connect","collectEntity","simplePlace","simplePlaceEntity","rentEntity","rent","myProfile","profileEntity","DeleteMemberFromCollect","pl","setSelectedSimplePlace","setSelectedRent","AddSimpleCollect","registerMemberToSimpleCollect","DelSimpleCollect","EditSimpleCollect","setSelectedMembers","workoutSelector","ranges","minutesOneSlot","workoutColNumber","useAdaptivity","viewWidth","acceptBeMember","setAcceptBeMember","showPanelBeMember","setShowPanelBeMember","showCancelMemberForm","setShowCancelMemberForm","cancelReason","setCancelReason","details","setDetails","collectType","setCollectType","needMembers","setNeedMembers","costMembers","setCostMembers","costAll","setCostAll","plus","setPlus","Array","selectedSlots","setSelectedSlots","selectedTimeRanges","vkids","UserVkId","photo","bridge","send","access_token","us","response","p","PhotoPath","youAreMember","youAreOrganizer","CreatorId","simplePlaces","changeCollectType","selectSlot","tmpSelectedSlot","ss","Hours","Minutes","sort","a","b","gotoProfile","profileId","open","calculateNeedMembers","need","Math","round","calculateCostMembers","membercost","worktimeSlots","wt","selectedDT","from","FromTime","ToTime","valueOf","fromTmp","slotsNumber","numberOfCols","numberOfRows","trunc","slots","slotsInHour","startHour","oneSlotMinutes","SlotMinutes","PricePerSlot","Selected","Rented","timeSlotsForSimpleCollects","iButtons","slot","slotCurrentIndex","forEach","worktimeSlot","curentWorktimeSlotFromTime","curentWorktimeSlotToTime","currentSlotTime","Breaks","brek","to","brekTime","rnt","rentTime","isArray","slt","selectedTime","CostPerHour","reduce","acc","cur","costall","costMem","calculateCostAll","splitCols","sCol","j","width","tr","until","caption","disabled","NeedMembers","Cost","Creator","before","src","memberUserProfile","SimpleCollectId","deleteMember","defaultValue","FullPrice","Checkbox","checked","changePlace","place","changeDate","description","bottom","withHistorySave","toMenuName","isBack","TeamAdminList","List","multiline","Button2Handle","after","CellClick","data-story","demoCityTournamentAdmins","TOURNAMENT_SET_ALL_TOURNAMENTS","TOURNAMENT_SET_SELECTED_TOURNAMENT","TOURNAMENT_MY_ADD_OR_EDIT","TOURNAMENT_SET_TOURNAMENTGROUPS","TOURNAMENT_SET_TOURNAMENTTEAMS","TOURNAMENT_SET_MYTOURNAMENT","TOURNAMENT_DELETE_MYTOURNAMENT","TOURNAMENT_SET_MODE","TOURNAMENT_MATCH_LENGTH","TOURNAMENT_SET_ALL_CITYTOURNAMENTADMINS","TOURNAMENT_SET_WHEN_BEGIN","TOURNAMENT_SET_WHEN_END","TOURNAMENT_SET_NAME","TOURNAMENT_SET_DETAILS","TOURNAMENT_SET_REGLAMENT","TOURNAMENT_DEL_GROUP_BY_KEY_ID","TOURNAMENT_DEL_GROUP_BY_ID","TOURNAMENT_ADD_GROUP","TOURNAMENT_SET_GROUP","TOURNAMENT_RESET_TOURNAMENT","TOURNAMENT_PUBLISH","TOURNAMENT_UNPUBLISH","TOURNAMENT_SET_MY_TOURNAMENTS","TOURNAMENT_SET_NEW_BIDS","TOURNAMENT_DEL_BID","TOURNAMENT_SET_SELECTED_TOURNAMENT_TABLES","emptyTournament","tournaments","bidsNew","selectedForView","selectedTables","myTournaments","cityTournamentAdmins","setTournaments","setTournamentTables","tables","setMyTournament","mytournament","addOrEditTournament","setSelectedTournament","deleteMyTournament","setMyTournaments","resetTournament","setTournamentWhenBegin","when","setTournamentWhenEnd","setTournamentMode","setTournamentName","setTournamentDetails","setTournamentReglament","setTournamentNewBids","bids","setCityTournamentAdmins","setSelectedTournamentGroups","groups","setTournamentTeams","bidsWithTeamsAndGroups","delGroupFromTournamentByKeyId","groupId","delGroupFromTournamentById","addGroupToTournament","group","editGroupInTournament","groupName","deleteTournamentBid","saveSelectedTournament","deleteTournament","getTournamentTeams","getMyTournaments","tournamentReducer","tour","KeyId","newTourn","t","newTGroups","Teams","TEAM_SET_ALL_TEAMS","TEAM_SET_SELECTED_TEAM","TEAM_SET_MYTEAM","TEAM_ADD_MYTEAM","TEAM_DELETE_MYTEAM","TEAM_SET_MODE","TEAM_SET_ALL_CITYTEAMADMINS","TEAM_SET_WHEN_BORN","TEAM_SET_NAME","TEAM_SET_DETAILS","TEAM_SET_REGLAMENT","TEAM_DEL_GROUP","TEAM_ADD_GROUP","TEAM_SET_GROUP","TEAM_RESET_TEAM","TEAM_PUBLISH","TEAM_UNPUBLISH","TEAM_SET_MY_TEAMS","emptyTeam","Matches","teams","myTeams","cityTeamAdmins","setMyTeam","myteam","addMyTeam","setSelectedTeam","deleteMyTeam","setMyTeams","resetTeam","setTeamMode","getMyTeams","teamReducer","maxT","maxA","maxM","maxP","TeamGroups","mainMenu","tournamentsEntity","teamsEntity","Button1Handle","publishTeam","demoBidTeam","BID_TEAM_SET_TOURNAMENTS","BID_TEAM_SET_MY_BIDS","BID_TEAM_SET_SELECTED_TOURNAMENT_GROUPS","BID_TEAM_SET_SELECTED_MODE","BID_TEAM_ADD_MY_BID","BID_TEAM_DEL_MY_BID","BID_TEAM_APPROVE_BID","emptyBidTeam","selectedTournament","myBids","selectMode","setMyBids","addMyBid","delMyBid","setBidTeamSelectedTournamentGroups","getActualTournamentsInCity","setCityBidTeamAdmins","addBidTeamToTournamentGroup","cancelBidTeamToTournamentGroup","bidBidTeamReducer","ListItem","removable","onRemove","Delete","BidList","trim","Tournament","Founder","BidTeamTournamentList","Bids","BidTeamTournamentGroupsList","SetTeamName","tournamentsForBids","bidTeamsEntity","bidTeams","SelectedName","bidSelectMode","cityEntity","getTournamentGroups","setBidTeamSelectedMode","getTeamBidsByTeam","setTeamWhenBorn","setTeamDetails","setTeamName","saveSelectedTeam","teamNameOnTournament","SetTeamNameOnTournament","teamDate","SaveTeam","TournamentAdminList","BidListItem","adminText","setAdminText","Item","Decline","MATCH_SET_ALL_MATCHES","MATCH_DEL_MATCH","MATCH_SET_SELECTED","MATCH_ADD_MATCH","MATCH_SET_HOT_MATCHES","MATCH_SET_ACCESS","MATCH_SET_MODE","MATCH_SET_PLAYED","MATCH_SET_HOT_PANEL","matches","hot","yesterday","today","tomorrow","hotPanel","access","setAllMatches","setHotMatches","delMatch","addMatch","setAccess","setMode","getAllMatchesByTournament","addMatchToShedule","Number","delMatchFromShedule","matchReducer","tomorrow_begin","tomorrow_end","st","played","panelName","schet","fontWeight","backgroundColor","padding","borderRadius","win","lose","MatchListItem","Match","ClickHandler","Played","Team1Goals","Team2Goals","Team1","Team2","setSelectedMatch","optMaker","todayIs","makeZeroBefore","g","UmbracoId","teamGoals","selectedTournamentGroup","setSelectedTournamentGroup","selectedTournamentGroupTeamList","setSelectedTournamentGroupTeamList","selectedTeam1","setSelectedTeam1","selectedTeam2","setSelectedTeam2","selectedTeam1Goals","setTeam1Goals","selectedTeam2Goals","setTeam2Goals","setSelectedPlace","selectedDescription","setSelectedDescription","selectedId","setSelectedId","selectedPlayed","setSelectedPlayed","selectedHour","setSelectedHour","selectedMinute","setSelectedMinute","getGroup","changeGroup","league_id","allMatchesInAllGroups","editId","PlaceId","Team1Id","Team2Id","Description","BidTeamToTournamentId1","BidTeamToTournamentId2","groupAndMatchesItem","goToEditMatch","otherProps","delCurrentMatch","align","goToViewMatch","toLocaleDateString","w7percent","textAlign","w8percent","w20percent","overflow","TournamentTables","replaceTeam","tOldGoup","tNewGroup","tGoup","getTeamInfo","changeTournamentTeamBidTournamentGroup","deleteTeamFromTournament","setTournamentMatchLength","acceptTeamToTournamentBid","declineTeamToTournamentBid","deleteTournamentGroup","addTournamentGroup","getTournamentNewBids","getTournamentTablesByTournamentId","tempGroupName","setTempGroupName","Tab","currentTab","setCurrentTab","activePopout","setActivePopout","AcceptBid","DeclineBid","SetPopup","oldTg","iosCloseItem","autoclose","newTg","SelectTournamentGroup","popout","activePanel","table","tT","firstItem","secondItem","chet","row","Games","Wins","Loses","Draws","GoalsScored","GoalsMissed","GoalsDifference","Points","keyId","DeleteTeam","toLocaleTimeString","Team1Name","Team2Name","ProfilePanel","PROFILE_SET_VK_PROFILE_INFO","PROFILE_SET_USER_PROFILE","PROFILE_SET_TRIED_TO_GET_PROFILE","vkProfile","triedToGetProfile","setUserProfile","setTriedToGetProfile","tried","profileReducer","birth","getYear","CITY_GET_ALL_FROM_SERVER","cityReducer","VK_SET_SELECTED_USER","selectedUser","vkReducer","MatchItem","readOnly","minHeight","globalPopout","errorObject","tournamentAdmins","setLoading","checkConnection","updateLoading","getAllSimpleCollectsInCityByCityUmbracoId","getAllSimplePlacesInCityByCityId","getAllRentsInCityByCityId","getUser","setSelectedUser","getTournamentsByCityId","cityUmbId","setVkProfileInfo","getUserProfile","getAuthInfo","vkProfileInfo","setHotPanel","selectSimpleCollect","getAllCitiesFromServer","setUserProfileCity","getAllCityTournamentAdminsByCityId","cityTournamentId","setShowAdminTourneyTab","getMatchesInCurrentCity","setUser","isFetching","setIsFetching","timerStarts","setTimerStarts","connectionTimer","cardStyle","left","height","background","opacity","consoleLog","subscribe","detail","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","fetchData","setInterval","ii","store","clearInterval","CheckConnection","setTimeout","menuItem","onRefresh","reload","activeStory","tabbar","player","stadium","hidden","getTime","timeEnding","userReducer","ampluaReducer","composeEnhancers","compose","reducers","combineReducers","hotEntity","paymentReducer","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.178ded18.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Group, Header, InfoRow, ModalCard, ModalPage, ModalPageHeader, ModalRoot, SelectMimicry, Textarea, Button, FormLayout, Select, CustomSelectOption, FormItem, FormLayoutGroup, Input, DatePicker } from '@vkontakte/vkui'\r\n\r\n\r\n\r\nlet ModalCommon = (props) => {\r\n    // при первом запуске подгрузить города\r\n    let [selectedYear, setSelectedYear] = useState(\"Не выбран\")\r\n    let [selectedCity, setSelectedCity] = useState(\"Не выбран\")\r\n    let [selectedDate, setSelectedDate] = useState(\"\")\r\n    let [bidCity, setBidCity] = useState(\"\")\r\n\r\n\tuseEffect(() => {\r\n\t\t// загрузка городов здесь\r\n\t\t\r\n    }, [])\r\n    \r\n    const setDate = (value) => {\r\n        debugger\r\n        setSelectedDate(`${value.day}.${value.month}.${value.year}`)\r\n    }\r\n    \r\n    const saveDate = (value) => {\r\n        \r\n        props.action({...props.data, bdate: selectedDate != \"\" ? selectedDate : undefined})\r\n        props.action2(2);\r\n    }\r\n\r\n    return (\r\n        <ModalRoot activeModal={props.modalName}>\r\n            <ModalPage id=\"CitySelect\"\r\n                header={\r\n                <ModalPageHeader>\r\n                \r\n              </ModalPageHeader>\r\n            }\r\n          >\r\n                <Group>\r\n                    <InfoRow>\r\n                        Ваш город определен как: {props.data.title}\r\n                    </InfoRow>\r\n                    <Header mode=\"secondary\">Выбрать другой город?</Header>\r\n                    <InfoRow top=\"Город\">            \r\n                        <SelectMimicry placeholder=\"Выбрать город\" />\r\n                    </InfoRow>\r\n                </Group>    \r\n            </ModalPage>\r\n\r\n            <ModalCard\r\n                id=\"Error\"\r\n                onClose={props.Close}\r\n                //header={props.data.message ? props.data.message : \"Произошла неизвестная ошибка\"}\r\n                header={props.data ? props.data : \"Произошла неизвестная ошибка\"}\r\n                actions={<Button size=\"l\" mode=\"primary\" onClick={props.Close}>Закрыть</Button>}>\r\n                    {/* <Textarea defaultValue=\"\" /> */}\r\n            </ModalCard>\r\n\r\n            <ModalCard\r\n                id=\"AreYouSure\"\r\n                onClose={props.Close}\r\n                header={props.data.message ? props.data.message : \"Текст вопроса не передан\"}\r\n                actions={\r\n                    <>\r\n                    <Button size=\"l\" mode=\"destructive\" onClick={props.Accept}>Да</Button>\r\n                    <Button size=\"l\" mode=\"secondary\" onClick={props.Close}>Нет</Button>\r\n                </>\r\n            }\r\n                >\r\n                    {/* <Textarea defaultValue=\"\" /> */}\r\n            </ModalCard>\r\n\r\n            <ModalCard\r\n                id=\"MyProfile\"\r\n                onClose={props.Close}\r\n                header={props.data.Name ? props.data.Name : \"Имя не прогрузилось\"}\r\n                actions={<Button size=\"l\" mode=\"primary\" onClick={props.Close}>Закрыть</Button>}>\r\n                    {/* <Textarea defaultValue=\"\" /> */}\r\n                    {\r\n                        (props.data.Name) ?\r\n                        `Имя: ${props.data.Name} \\r\\n\r\n                        Фамилия: ${props.data.Surname} \\r\\n\r\n                        Дата рождения: ${props.data.Birth} \\r\\n\r\n                        Зарегистрирован: ${props.data.Register} \\r\\n\r\n                        Город: ${props.data.City.Name}\r\n                        ` : \"\"\r\n                    }\r\n            </ModalCard>\r\n            \r\n            <ModalCard\r\n                id=\"SelectBirthYear\"\r\n                // onClose={props.Close}\r\n                header=\"Укажите Ваш год рождения\"\r\n                actions={<Button size=\"l\" mode=\"primary\" onClick={() => props.action({...props.data, bdate: props.data.bdate && props.data.bdate + ((!isNaN(selectedYear)) && (selectedYear > 0) && \".\" + selectedYear)})}>Закрыть</Button>}>\r\n                    <FormLayout>\r\n                        <FormLayoutGroup>\r\n                        <InfoRow header=\"Год рождения не определен\">\r\n                            Год рождения не получилось загрузить из вашего профиля Вконтакте. Укажите реальный год вашего рождения.\r\n                        </InfoRow>\r\n                            <FormItem top=\"Год рождения\">            \r\n                            <Select\r\n                                placeholder=\"Не выбран\" \r\n                                onChange={(e) => {\r\n                                    setSelectedYear(+e.currentTarget.value)\r\n                                    }}\r\n                                options={[...((start, count) => {\r\n                                    \r\n                                        let current = start;\r\n                                        let result = [];\r\n                                        while (current < start + count){\r\n                                            result.push(current);\r\n                                            current += 1;\r\n                                        }\r\n                                        \r\n                                        return result\r\n                                    })(new Date().getFullYear() - 100, 90)\r\n                                ].map(year => ({ label: year, value: year }))}\r\n                                renderOption={({ option, ...restProps }) => <CustomSelectOption {...restProps} />}\r\n                                />\r\n                            </FormItem>\r\n                        </FormLayoutGroup>\r\n                    </FormLayout>\r\n            </ModalCard>\r\n            <ModalCard\r\n                id=\"SelectBirth\"\r\n                // onClose={props.Close}\r\n                header=\"Укажите дату вашего рождения\"\r\n                actions={\r\n                <Button size=\"l\" mode=\"primary\" \r\n                onClick={saveDate}>Закрыть</Button>}>\r\n                    <FormLayout>\r\n                        <FormLayoutGroup>\r\n                        <InfoRow header=\"Год рождения не определен\">\r\n                            Дату рождения не получилось загрузить из вашего профиля Вконтакте. Укажите реальную дату вашего рождения.\r\n                        </InfoRow>\r\n                            <FormItem top=\"Дата рождения\">\r\n                                <DatePicker\r\n                                    min={{ day: 1, month: 1, year: new Date().getFullYear() - 100 }}\r\n                                    max={{ day: 1, month: 1, year: new Date().getFullYear()}}\r\n                                    //defaultValue={props.tournaments.selected.WhenEnd}\r\n\r\n                                    onDateChange={(e) => setDate(e)}\r\n                                ></DatePicker>            \r\n                            {/* <Select\r\n                                placeholder=\"Не выбран\" \r\n                                onChange={(e) => {\r\n                                    setSelectedYear(+e.currentTarget.value)\r\n                                    }}\r\n                                options={[...((start, count) => {\r\n                                    \r\n                                        let current = start;\r\n                                        let result = [];\r\n                                        while (current < start + count){\r\n                                            result.push(current);\r\n                                            current += 1;\r\n                                        }\r\n                                        \r\n                                        return result\r\n                                    })(new Date().getFullYear() - 100, 90)\r\n                                ].map(year => ({ label: year, value: year }))}\r\n                                renderOption={({ option, ...restProps }) => <CustomSelectOption {...restProps} />}\r\n                                /> */}\r\n                            </FormItem>\r\n                        </FormLayoutGroup>\r\n                    </FormLayout>\r\n            </ModalCard>\r\n            \r\n            <ModalCard\r\n                id=\"SelectCity\"\r\n                // onClose={props.Close}\r\n                header=\"Выберите город\"\r\n                actions={<Button size=\"l\" mode=\"primary\" onClick={() => {\r\n                        debugger\r\n                        props.action({...props.data.profile, CityUmbracoId: selectedCity})\r\n                        }\r\n                    }>Закрыть</Button>}>\r\n                    <FormLayout>\r\n                        <FormLayoutGroup>\r\n                            <InfoRow header=\"Город не найден\">\r\n                                Город, указанный в вашем профиле Вконтакте <b style={{color: 'red'}}>{props.data.profile ? props.data.profile.CityName : \"\"}</b> не найден в списке доступных для работы площадки. \r\n                                Выберите из списка ближайший к вам город, за спортивной жизнью которого вы будете следить.\r\n                            </InfoRow>\r\n                            <FormItem top=\"Город\">            \r\n                            <Select\r\n                                placeholder=\"Не выбран\" \r\n                                onChange={(e) => {\r\n                                    setSelectedCity(+e.currentTarget.value)\r\n                                    }}\r\n                                options={props.data.cities && props.data.cities.map(city => {\r\n                                    return { label: city.CityUmbracoName ?? city.CityUmbracoId, value: city.CityUmbracoId }\r\n                                }\r\n                                )}\r\n                                renderOption={({ option, ...restProps }) => <CustomSelectOption {...restProps} />}\r\n                                />\r\n                            </FormItem>\r\n                        </FormLayoutGroup>\r\n                        {/* <InfoRow>или</InfoRow>\r\n                        <FormLayoutGroup>\r\n                            <InfoRow header=\"Укажите название вашего города\">\r\n                                Оставьте заявку администратору на добавление Вашего города в систему\r\n                            </InfoRow>\r\n                            <Input value={bidCity} onChange={(e) => setBidCity(e.currentTarget.value)} type=\"text\"></Input>\r\n                        </FormLayoutGroup> */}\r\n                    </FormLayout>\r\n            </ModalCard>\r\n      </ModalRoot>\r\n    )\r\n}\r\n\r\n\r\nexport default ModalCommon","export default __webpack_public_path__ + \"static/media/defaultPlace.563ac777.jpg\";","const currentDate = new Date();\r\n\r\n\r\n// таймслотов в одном часе\r\nexport const timeSlotsInOneHour = () => {\r\n    return +2\r\n}\r\n\r\nexport const getMaxNumberOfMembersInCollect = () => {\r\n    return +30\r\n}\r\n\r\nexport const getMinNumberOfMembersInCollect = () => {\r\n    return +2\r\n}\r\n\r\nexport const accessTypes = [\r\n    {Id: 0, Name: \"public\"},\r\n    {Id: 1, Name: \"private\"},\r\n    {Id: 2, Name: \"moderate\"},\r\n]\r\n\r\n// тип участия в сборе\r\nexport const memberingCollectTypes = {\r\n    Invite: 0, // приглашен\r\n    Member: 1, // уже подтвержден (участник)\r\n    Organizator: 2, // организатор\r\n    Participate: 3, // попросился\r\n    All: 4, // без фильтрации, все сборы\r\n}\r\n\r\nexport const cityTournamentAdmins = \r\n[\r\n    {\r\n        Id: 0, Name: \"Тестовый админ\", UserProfileId: 49, CityId: 71, ErrorMessage: \"\", Published: true, Deleted: false, \r\n    },\r\n]\r\n\r\nexport const Collect = {\r\n    collects: [],\r\n    selected: {\r\n        selected: {\r\n            Id: 6,\r\n            Name: 'Тестовый сбор',\r\n            When: '2021-09-09T17:40:00',\r\n            DurationMinutes: 90,\r\n            Details: 'Сбор в 10:30',\r\n            Comment: 'Верхнее поле',\r\n            Cost: 2500,\r\n            NeedMembers: 15,\r\n            PlaceId: 1,\r\n            Place: {\r\n              Id: 1,\r\n              Name: 'Стадион Динамо верхнее поле',\r\n              Info: 'Половина поля',\r\n              SimpleCityId: 3,\r\n              City: null,\r\n              Address: 'бульвар Петрковский',\r\n              Geo: '57.754071, 40.963803',\r\n              MainPicture: null,\r\n              Parking: true,\r\n              BicycleParking: false,\r\n              Enabled: true,\r\n              UmbracoId: 0,\r\n              Worktime: [],\r\n              ErrorMessage: null,\r\n              Published: true,\r\n              Deleted: false\r\n            },\r\n            CreatorId: 63,\r\n            Creator: {\r\n              CityUmbracoName: 'Кострома',\r\n              Name: 'Даниил',\r\n              Surname: 'Каверзин',\r\n              CityVkId: 1809,\r\n              UserProfileId: 63,\r\n              UserVkId: 'id136649652',\r\n              LastOnline: '2021-05-25T10:35:25',\r\n              Birth: '2001-06-04T00:00:00',\r\n              PhotoPath: ''\r\n            },\r\n            Members: [\r\n              {\r\n                Id: 1,\r\n                SimpleCollect: {\r\n                  Id: 6,\r\n                  Name: 'Тестовый сбор',\r\n                  When: '2021-09-09T17:40:00',\r\n                  DurationMinutes: 90,\r\n                  Details: 'Сбор в 10:30',\r\n                  Comment: 'Верхнее поле',\r\n                  Cost: 2500,\r\n                  NeedMembers: 15,\r\n                  SimplePlaceId: 1,\r\n                  SimplePlace: {\r\n                    Id: 1,\r\n                    Name: 'Стадион Динамо верхнее поле',\r\n                    Info: 'Половина поля',\r\n                    SimpleCityId: 3,\r\n                    City: null,\r\n                    Address: 'бульвар Петрковский',\r\n                    Geo: '57.754071, 40.963803',\r\n                    MainPicture: null,\r\n                    Parking: true,\r\n                    BicycleParking: false,\r\n                    Enabled: true,\r\n                    UmbracoId: 0,\r\n                    Worktime: [],\r\n                    ErrorMessage: null,\r\n                    Published: true,\r\n                    Deleted: false\r\n                  },\r\n                  CreatorId: 63,\r\n                  Creator: {\r\n                    UserProfileId: 63,\r\n                    UserVkId: 'id136649652',\r\n                    Name: 'Даниил',\r\n                    Surname: 'Каверзин',\r\n                    Fathername: null,\r\n                    Birth: '2001-06-04T00:00:00',\r\n                    Register: '2021-05-25T10:02:38',\r\n                    LastOnline: '2021-05-25T10:35:25',\r\n                    Height: 0,\r\n                    Weight: 0,\r\n                    PhotoPath: '',\r\n                    CityVkId: 1809,\r\n                    CityName: 'Ленинск-Кузнецкий',\r\n                    CityUmbracoId: 1080,\r\n                    CityUmbracoName: 'Кострома',\r\n                    LegId: -1,\r\n                    AmpluaId: -1,\r\n                    LastIp: '81.177.24.37',\r\n                    SimpleCollects: [],\r\n                    SimpleUserMessages: [],\r\n                    SimpleMembers: [],\r\n                    Citys: null,\r\n                    Tournaments: [],\r\n                    Ampluas: null,\r\n                    Legs: null,\r\n                    Admins: [],\r\n                    CityTournamentAdmins: [],\r\n                    ErrorMessage: '',\r\n                    Published: false,\r\n                    Deleted: false\r\n                  },\r\n                  SimpleMembers: [],\r\n                  ErrorMessage: null,\r\n                  Published: false,\r\n                  Deleted: false\r\n                },\r\n                SimpleCollectId: 6,\r\n                UserProfile: {\r\n                  UserProfileId: 63,\r\n                  UserVkId: 'id136649652',\r\n                  Name: 'Даниил',\r\n                  Surname: 'Каверзин',\r\n                  Fathername: null,\r\n                  Birth: '2001-06-04T00:00:00',\r\n                  Register: '2021-05-25T10:02:38',\r\n                  LastOnline: '2021-05-25T10:35:25',\r\n                  Height: 0,\r\n                  Weight: 0,\r\n                  PhotoPath: '',\r\n                  CityVkId: 1809,\r\n                  CityName: 'Ленинск-Кузнецкий',\r\n                  CityUmbracoId: 1080,\r\n                  CityUmbracoName: 'Кострома',\r\n                  LegId: -1,\r\n                  AmpluaId: -1,\r\n                  LastIp: '81.177.24.37',\r\n                  SimpleCollects: [],\r\n                  SimpleUserMessages: [],\r\n                  SimpleMembers: [],\r\n                  Citys: null,\r\n                  Tournaments: [],\r\n                  Ampluas: null,\r\n                  Legs: null,\r\n                  Admins: [],\r\n                  CityTournamentAdmins: [],\r\n                  ErrorMessage: '',\r\n                  Published: false,\r\n                  Deleted: false\r\n                },\r\n                UserProfileId: 63\r\n              },\r\n            ]\r\n          }\r\n    }\r\n}\r\n\r\nexport const TeamAdmins = \r\n[\r\n    {\r\n        Id : 0,\r\n        Name: \"Тестовая команда\",\r\n        Year: 2021,\r\n        WhenBorn: {day: 1, month: 2, year: 2021},\r\n        Details: \"Системная\",\r\n        Logo: \"\",\r\n        CityId: -1,\r\n        TournamentGroups: [], \r\n        Admins: [],\r\n        Matches: [],\r\n        Players: [],\r\n        Published: true,\r\n        Deleted: false,\r\n    },\r\n]\r\n\r\nexport const BidTeam = {\r\n    Id: -1,\r\n    AdminTournamentComment: \"\",\r\n    TeamName: \"\",\r\n    When: { day: currentDate.getDay(), month: currentDate.getMonth() + 1, year: currentDate.getFullYear() },\r\n    TeamId: -1, \r\n    Team: [],\r\n    TournamentGroupId: -1,\r\n    TournamentGroup: [],\r\n    UserProfileId: -1,\r\n    UserProfile: {},\r\n    Approved: false,\r\n    Deleted: false,\r\n    Published: false,\r\n\r\n}\r\n\r\nexport const Match = {\r\n    Id: -1,\r\n    Name: \"Матч\",\r\n    Description: \"Описание матча\",\r\n    Picture: \"\",\r\n    When: { day: currentDate.getDay(), month: currentDate.getMonth() + 1, year: currentDate.getFullYear() },\r\n    TournamentGroup: {},\r\n    TournamentGroupId: -1,\r\n    Place: {},\r\n    PlaceId: -1,\r\n    Team1: {},\r\n    Team1Id: -1,\r\n    Team2: {},\r\n    Team2Id: -1,\r\n    Team1Bid: {},\r\n    Team1BidId: -1,\r\n    Team2Bid: {},\r\n    Team2BidId: -1,\r\n    Team1Goals: 0,\r\n    Team2Goals: 0,\r\n    MatchEvents: [],\r\n    Deleted: false,\r\n    Published: false,\r\n    ErrorMessage: \"\",\r\n\r\n}\r\n\r\nexport const EmptyTournament = {\r\n    Id : -1,\r\n    Name: \"\",\r\n    Year: 0,\r\n    WhenBegin: {day: currentDate.getDay(), month: currentDate.getMonth()+1, year: currentDate.getFullYear()},\r\n    WhenEnd: {day: currentDate.getDay(), month: currentDate.getMonth()+1, year: currentDate.getFullYear()},\r\n    Details: \"\",\r\n    Reglament: \"\", \r\n    MatchLength: 60,\r\n    Logo: \"\",\r\n    CityId: -1,\r\n    TournamentGroups: [], \r\n    Admins: [],\r\n    Published: false,\r\n    Deleted: false,\r\n}\r\n\r\n\r\nexport const geo = {\r\n    Cities: [\r\n        {\r\n            Id: 0,\r\n            Name: \"Кострома\",\r\n            Geo: {Latitude: 0.0000, Longitude: 0.0000},\r\n            Population: 250000, // население города\r\n            //users: 0, // сколько футболистов в городе\r\n            //places: 0, // сколько мест для аренды\r\n        },\r\n        {\r\n            Id: 1,\r\n            Name: \"Иваново\",\r\n            Geo: {Latitude: 1.0000, Longitude: 1.0000},\r\n            Population: 800000, // население города\r\n            //users: 0, // сколько футболистов в городе\r\n            //places: 0, // сколько мест для аренды\r\n        },\r\n    ],\r\n    Owners: [\r\n        {\r\n            Id: 0, \r\n            Name: \"Владелец 1\",\r\n        },\r\n        {\r\n            Id: 1, \r\n            Name: \"Владелец 2\",\r\n        }\r\n    ],\r\n}\r\n\r\nexport const simplePlaces =  []\r\n\r\nexport const rents =  []\r\n\r\n\r\nexport const places =  [\r\n        {\r\n            PlaceId: 0,\r\n            Name: \"Динамо\", /* placename*/\r\n            get Owner() { return geo.Owners[0]},\r\n            set Owner(val) { geo.Owners[0] = val},\r\n            get City() { return geo.Cities[0]},\r\n            set City(val) { geo.Cities[0] = val},\r\n            Address: {Index: 0, Street: \"Профсоюзная\", SubjectType: 'ул.', House: \"\"},\r\n            Geo: \"\",\r\n            //mainpicture: [{id: 0, name: \"\", path: \"\"},],  главная картинка\r\n            Photo: [{Id: 0, Name: \"\", Path: \"\"},], // убрать свойство main\r\n            Stages: 0,\r\n            Parking: true,\r\n            BicycleParking: false, // велопарковка\r\n            Worktime: {FromHour: 8, FromMinute: 0, ToHour: 23, ToMinute: 0, Works24: false, NoBreaks: false, BreakTimes: [{FromHour: 13, FromMinute: 0, ToHour: 14, ToMinute: 0,}]},\r\n            DressingRooms: [\r\n                { Id: 0, RoomNumber: \"\", Shower: true, HotWater: true, },\r\n                { Id: 1, RoomNumber: \"\", Shower: false, HotWater: false, },\r\n            ],\r\n            Areas: [\r\n                { Id: 0, name: \"\", Width: 50, Length: 30, Height: 10, CapacitySport: 10, CapacityViewers: 30, Price: 2000 },\r\n                { Id: 1, name: \"\", Width: 0, Length: 0, Height: 0, CapacitySport: 0, CapacityViewers: 0, Price: 2000 },\r\n            ],\r\n            Price: 2000, // цена за час занятий  (перенести в игровые зоны)\r\n            Enabled: true,\r\n            Access: {},\r\n            \r\n        },\r\n        {\r\n            PlaceId: 1,\r\n            Name: \"МЧС\",  /* placename*/\r\n            get Owner() {return geo.Owners[0]},\r\n            set Owner(val) {geo.Owners[0] = val},\r\n            get City() {return geo.Cities[0]},\r\n            set City(val) {geo.Cities[0] = val},\r\n            Address: {Index: 0, Street: \"Вертолетчиков\", SubjectType: 'городок ', House: \"\"},\r\n            Geo: \"\",\r\n            Photo: [{Id: 0, Name: \"\", Path: \"\", Main: true},],\r\n            Stages: 0,\r\n            Parking: true,\r\n            BicycleParking: false, // велопарковка\r\n            Worktime: {FromHour: 9, FromMinute: 0, ToHour: 22, ToMinute: 0, Works24: false, NoBreaks: false, BreakTimes: [{FromHour: 13, FromMinute: 30, ToHour: 14, ToMinute: 30,}]},\r\n            DressingRooms: [\r\n                { id: 0, RoomNumber: \"\", Shower: true, HotWater: true, },\r\n                { id: 1, RoomNumber: \"\", Shower: false, HotWater: false, },\r\n            ],\r\n            Areas: [\r\n                { Id: 0, Name: \"\", /* areaname */ Width: 0, Length: 0, Height: 0, CapacitySport: 0, CapacityViewers: 0, Price: 1800  },\r\n                { Id: 1, Name: \"\", Width: 0, Length: 0, Height: 0, CapacitySport: 0, CapacityViewers: 0, Price: 1800  },\r\n            ],\r\n            Price: 1800, /* цена за час занятий, перенести в areas */\r\n            Enabled: true,\r\n            Access: {},\r\n            \r\n        },\r\n        {   \r\n            PlaceId: 2,\r\n            Name: \"КГТУ\",  /* placename*/\r\n            get Owner() {return geo.Owners[0]},\r\n            set Owner(val) {geo.Owners[0] = val},\r\n            get City() {return geo.Cities[0]},\r\n            set City(val) {geo.Cities[0] = val},\r\n            Address: {Index: 0, Street: \"Дзжержинского\", SubjectType: 'улица ', House: \"12\"},\r\n            Geo: \"\",\r\n            Photo: [{Id: 0, Name: \"\", Path: \"\", Main: true},],\r\n            Stages: 0,\r\n            Parking: true,\r\n            BicycleParking: false, // велопарковка\r\n            Worktime: {FromHour: 9, FromMinute: 0, ToHour: 22, ToMinute: 0, Works24: false, NoBreaks: false, BreakTimes: [{FromHour: 13, FromMinute: 30, ToHour: 14, ToMinute: 30,}]},\r\n            DressingRooms: [\r\n                { id: 0, RoomNumber: \"\", Shower: true, HotWater: true, },\r\n                { id: 1, RoomNumber: \"\", Shower: false, HotWater: false, },\r\n            ],\r\n            Areas: [\r\n                { Id: 0, Name: \"\", /* areaname */ Width: 0, Length: 0, Height: 0, CapacitySport: 0, CapacityViewers: 0, Price: 1800  },\r\n                { Id: 1, Name: \"\", Width: 40, Length: 20, Height: 0, CapacitySport: 0, CapacityViewers: 0, Price: 1800  },\r\n            ],\r\n            Price: 1800, /* цена за час занятий, перенести в areas */\r\n            Enabled: true,\r\n            Access: {},\r\n            \r\n        }\r\n    ]\r\n\r\n    export const ampluaCathegoryTypes = [\r\n        {Id: 0, Name: \"Вратарь\"},\r\n        {Id: 1, Name: \"Защитник\"},\r\n        {Id: 2, Name: \"Полузащитник\"},\r\n        {Id: 3, Name: \"Нападающий\"},\r\n        {Id: 4, Name: \"Тренер\"},\r\n        {Id: 5, Name: \"Административный персонал\"},\r\n        {Id: 6, Name: \"Игрок\"},\r\n    ]\r\n     \r\n    export const ampluaTypes = [\r\n        {Id: 0, Name: \"Вратарь\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[0]},\r\n        {Id: 1, Name: \"Правый защитник\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[1]},\r\n        {Id: 2, Name: \"Левый защитник\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[1]},\r\n        {Id: 3, Name: \"Центральный защитник\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[1]},\r\n        {Id: 4, Name: \"Передний защитник\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[1]},\r\n        {Id: 5, Name: \"Последний защитник\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[1]},\r\n        {Id: 6, Name: \"Правый полузащитник\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[2]},\r\n        {Id: 7, Name: \"Левый полузащитник\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[2]},\r\n        {Id: 8, Name: \"Центральный полузащитник\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[2]},\r\n        {Id: 9, Name: \"Атакующий полузащитник\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[2]},\r\n        {Id: 10, Name: \"Опорный полузащитник\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[2]},\r\n        {Id: 11, Name: \"Левый вингер\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[2]},\r\n        {Id: 12, Name: \"Правый вингер\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[2]},\r\n        {Id: 13, Name: \"Левый нападающий\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[3]},\r\n        {Id: 14, Name: \"Правый нападающий\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[3]},\r\n        {Id: 15, Name: \"Центральный нападающий\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[3]},\r\n        {Id: 16, Name: \"Игрок под нападающими\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[3]},\r\n        {Id: 17, Name: \"Тренер\", IsPlayer: false, AmpluaCathegory: ampluaCathegoryTypes[4]},\r\n        {Id: 18, Name: \"Помощник тренера\", IsPlayer: false, AmpluaCathegory: ampluaCathegoryTypes[4]},\r\n        {Id: 19, Name: \"Администратор команды\", IsPlayer: false, AmpluaCathegory: ampluaCathegoryTypes[5]},\r\n        {Id: 20, Name: \"Организатор сбора\", IsPlayer: false, AmpluaCathegory: ampluaCathegoryTypes[5]},\r\n        {Id: 21, Name: \"Игрок\", IsPlayer: true, AmpluaCathegory: ampluaCathegoryTypes[6]},\r\n        {Id: 22, Name: \"\", IsPlayer: false, AmpluaCathegory: ampluaCathegoryTypes[0]},\r\n    ]\r\n\r\n\r\nexport const users = [\r\n    {\r\n        Id: 0,\r\n        FirstName: \"Александр\",\r\n        SurName: \"Смирнов\",\r\n        FatherName: \"Евгеньевич\",\r\n        NickName: \"easports\",\r\n        Photo: \"/img/users/kostroma/alexsmirnov290587-01.jpg\",\r\n        Datebirth: new Date(\"05.29.1987\"),\r\n        Leg: 0, // 0-both, 1-left, 2-right\r\n        CityFrom: {...geo.Cities[0] },\r\n        CityNow: {...geo.Cities[0] },\r\n        Level: {Total: 100, ShotStrong: 100, LongShotAccuracy: 100, ShortShotAccuracy: 100, RunSpeed: 100, ShortPassingSpeed: 100, LongPassingSpeed: 100,\r\n                ShortPassingAccuracy: 100, LongPassingAccuracy: 100, \r\n                Stamina: 100, // выносливость\r\n                Feints: 100, // финты\r\n                Reaction: 100, // реакция\r\n                ScoringFlair: 100, // голевое чутье\r\n                Intellect: 100, // ум\r\n                Rejection: 100, // отбор мяча\r\n                SlideEffect: 100, // игра в подкате\r\n                Header: 100, // игра головой\r\n                Creativity: 100, // креативность\r\n                Dribble: 100, // дрибблинг\r\n                Opening: 100, // открывание под пас\r\n                Charisma: 100, // харизма\r\n                BallTaking: 100, // прием мяча\r\n                FieldVision: 100, // видение поля\r\n                BallWorkTime: 100, // время работы с мячом (передерживает или сразу отдает передачу)\r\n                OneTouchGameAccuracy: 100, // точность игры в одно касание\r\n                OneTouchGameFrequency: 100, // частота игры в одно касание (всегда человек отдает сразу ли редко играет в одно касание),\r\n                PsichologyStability: 100, // психическая устойчивость (чем выше, тем стабильнее и спокойнее человек, чем ниже, тем взрывнее, вспыльчивее)\r\n        },\r\n        CurrentPhisicalForm: 100, // текущая физическая форма\r\n        Injury: {WhenInjuried: new Date(), Comment: \"\"},\r\n        Amplua: [{\r\n            Id: 0, \r\n            Amplua: {...ampluaTypes[0] }, //  амплуа \r\n            KeyValuePercent: 90 // выборка из 100% насколько это моя ключевая позиция (в совокупности все поля не могут превышать 100%)\r\n        }, {id: 3, amplua: {...ampluaTypes[1] }, KeyValuePercent: 10}],\r\n        KeyFunctions: [{Id: 2, Name: \"Монстр выходов\", Comment: \"Идеальная игра на выходах\"}, \r\n                        {Id: 8, Name: \"Вырвинога\", Comment: \"Не жалеет соперника, играет всегда до конца\"}], // прозвища, характеризующие стиль игры человека, дают другие пользователи, \r\n\r\n    },\r\n    {\r\n        Id: 1,\r\n        FirstName: \"Евгений\",\r\n        SurName: \"Иванов\",\r\n        FatherName: \"Валерьевич\",\r\n        NickName: \"eivanov\",\r\n        Photo: \"/img/users/kostroma/eivanov010180-01.jpg\",\r\n        Datebirth: new Date(\"28.02.1983\"),\r\n        Leg: 1, // 0-both, 1-left, 2-right\r\n        CityFrom: {...geo.Cities[0] },\r\n        CityNow: {...geo.Cities[0] },\r\n        Level: {Total: 100, ShotStrong: 100, LongShotAccuracy: 100, ShortShotAccuracy: 100, RunSpeed: 100, ShortPassingSpeed: 100, LongPassingSpeed: 100,\r\n            ShortPassingAccuracy: 100, LongPassingAccuracy: 100, \r\n            Stamina: 100, // выносливость\r\n            Feints: 100, // финты\r\n            Reaction: 100, // реакция\r\n            ScoringFlair: 100, // голевое чутье\r\n            Intellect: 100, // ум\r\n            Rejection: 100, // отбор мяча\r\n            SlideEffect: 100, // игра в подкате\r\n            Header: 100, // игра головой\r\n            Creativity: 100, // креативность\r\n            Dribble: 100, // дрибблинг\r\n            Opening: 100, // открывание под пас\r\n            Charisma: 100, // харизма\r\n            BallTaking: 100, // прием мяча\r\n            FieldVision: 100, // видение поля\r\n            BallWorkTime: 100, // время работы с мячом (передерживает или сразу отдает передачу)\r\n            OneTouchGameAccuracy: 100, // точность игры в одно касание\r\n            OneTouchGameFrequency: 100, // частота игры в одно касание (всегда человек отдает сразу ли редко играет в одно касание),\r\n            PsichologyStability: 100, // психическая устойчивость (чем выше, тем стабильнее и спокойнее человек, чем ниже, тем взрывнее, вспыльчивее)\r\n    },\r\n        CurrentPhisicalForm: 100, // текущая физическая форма\r\n        Injury: {WhenInjuried: new Date(), Comment: \"\"},\r\n        Amplua: [{\r\n            Id: 0, \r\n            Amplua: {...ampluaTypes[0] }, //  амплуа \r\n            KeyValuePercent: 90 // выборка из 100% насколько это моя ключевая позиция (в совокупности все поля не могут превышать 100%)\r\n        }, {Id: 3, Amplua: {...ampluaTypes[1] }, KeyValuePercent: 10}],\r\n        KeyFunctions: [{Id: 2, Name: \"Монстр выходов\", Comment: \"Идеальная игра на выходах\"}, \r\n                        {Id: 8, Name: \"Вырвинога\", Comment: \"Не жалеет соперника, играет всегда до конца\"}], // прозвища, характеризующие стиль игры человека, дают другие пользователи, \r\n\r\n    },\r\n    {\r\n        Id: 2,\r\n        FirstName: \"Фёдор\",\r\n        SurName: \"Смолов\",\r\n        FatherName: \"Валерьевич\",\r\n        NickName: \"fsmolov\",\r\n        Photo: \"/img/users/kostroma/fsmolov010189-01.jpg\",\r\n        Datebirth: new Date(\"01.01.1989\"),\r\n        Leg: 0, // 0-both, 1-left, 2-right\r\n        CityFrom: {...geo.Cities[0] },\r\n        CityNow: {...geo.Cities[0] },\r\n        Level: {Total: 100, ShotStrong: 100, LongShotAccuracy: 100, ShortShotAccuracy: 100, RunSpeed: 100, ShortPassingSpeed: 100, LongPassingSpeed: 100,\r\n            ShortPassingAccuracy: 100, LongPassingAccuracy: 100, \r\n            Stamina: 100, // выносливость\r\n            Feints: 100, // финты\r\n            Reaction: 100, // реакция\r\n            ScoringFlair: 100, // голевое чутье\r\n            Intellect: 100, // ум\r\n            Rejection: 100, // отбор мяча\r\n            SlideEffect: 100, // игра в подкате\r\n            Header: 100, // игра головой\r\n            Creativity: 100, // креативность\r\n            Dribble: 100, // дрибблинг\r\n            Opening: 100, // открывание под пас\r\n            Charisma: 100, // харизма\r\n            BallTaking: 100, // прием мяча\r\n            FieldVision: 100, // видение поля\r\n            BallWorkTime: 100, // время работы с мячом (передерживает или сразу отдает передачу)\r\n            OneTouchGameAccuracy: 100, // точность игры в одно касание\r\n            OneTouchGameFrequency: 100, // частота игры в одно касание (всегда человек отдает сразу ли редко играет в одно касание),\r\n            PsichologyStability: 100, // психическая устойчивость (чем выше, тем стабильнее и спокойнее человек, чем ниже, тем взрывнее, вспыльчивее)\r\n    },\r\n        CurrentPhisicalForm: 100, // текущая физическая форма\r\n        Injury: {WhenInjuried: new Date(), Comment: \"\"},\r\n        Amplua: [{\r\n            Id: 0, \r\n            Amplua: {...ampluaTypes[0] }, //  амплуа \r\n            KeyValuePercent: 90 // выборка из 100% насколько это моя ключевая позиция (в совокупности все поля не могут превышать 100%)\r\n        }, {Id: 3, Amplua: {...ampluaTypes[1] }, KeyValuePercent: 10}],\r\n        KeyFunctions: [{Id: 2, Name: \"Монстр выходов\", Comment: \"Идеальная игра на выходах\"}, \r\n                        {Id: 8, Name: \"Вырвинога\", Comment: \"Не жалеет соперника, играет всегда до конца\"}], // прозвища, характеризующие стиль игры человека, дают другие пользователи, \r\n\r\n    },\r\n]\r\n\r\nexport const myProfile = {\r\n    myProfile: users[0],\r\n}\r\n\r\n\r\nexport class commonUtils  {\r\n\r\n    static deepClone = (obj) => {\r\n        const clObj = {};\r\n        for(const i in obj) {\r\n            if (obj[i] instanceof Object) {\r\n                clObj[i] = this.deepClone(obj[i]);\r\n                continue;\r\n            }\r\n            clObj[i] = obj[i];\r\n        }\r\n        return clObj;\r\n    }\r\n\r\n    static copyCity = (city_source) => {\r\n        return city_source;\r\n    }\r\n\r\n    static copyAmplua = (amplua_source) => {\r\n        return amplua_source\r\n    }\r\n\r\n    static copyKeyFunction = (keyFunction_source) => {\r\n        return keyFunction_source\r\n    }\r\n\r\n    static copyUser = (user_source) => {\r\n        if (user_source == undefined || Object.keys(user_source).length === 0)\r\n            return undefined\r\n\r\n        return {\r\n            Id: user_source.Id,\r\n            FirstName: user_source.FirstName,\r\n            SurName: user_source.SurName,\r\n            FatherName: user_source.FatherName,\r\n            NickName: user_source.NickName,\r\n            Datebirth: user_source.Datebirth,\r\n            Leg: user_source.Leg, // 0-both, 1-left, 2-right\r\n            CityFrom: { ...this.copyCity(user_source.CityFrom) },\r\n            CityNow: { ...this.copyCity(user_source.CityNow) },\r\n            Level: {...user_source.Level\r\n            },\r\n            CurrentPhisicalForm: user_source.CurrentPhisicalForm, // текущая физическая форма\r\n            Injury: {...user_source.Injury},\r\n            Amplua: [...(user_source.Amplua && user_source.Amplua.length ? user_source.Amplua.map(amp => this.copyAmplua(amp)): [{}] )],\r\n            KeyFunctions: [...(user_source.KeyFunctions && user_source.KeyFunctions.length ? user_source.KeyFunctions.map(keyF => this.copyKeyFunction(keyF)): [{}])], // прозвища, характеризующие стиль игры человека, дают другие пользователи, \r\n        }\r\n            \r\n    }\r\n\r\n    static copyOwner = (owner_source) => {\r\n        return {...owner_source}\r\n    }\r\n    \r\n    static copyAccess = (access_source) => {\r\n        return {...access_source}\r\n    }\r\n\r\n    static copyPlace = (place_source) => {\r\n        \r\n        if (place_source == undefined || Object.keys(place_source).length === 0)\r\n            return undefined\r\n\r\n        return {\r\n            Id: place_source.Id,\r\n            Name: place_source.Name,\r\n            Owner: {...this.copyOwner(place_source.Owner)},\r\n            City: {...this.copyCity(place_source.City)},\r\n            Address: {...place_source.Address},\r\n            Geo: {...place_source.Geo},\r\n            Photo: [...place_source.Photo],\r\n            Stages: place_source.Stages,\r\n            Parking: place_source.Parking,\r\n            Worktime: {...place_source.Worktime, BreakTimes: [...place_source.Worktime.BreakTimes]},\r\n            DressingRooms: [...place_source.DressingRooms],\r\n            Areas: [...place_source.Areas],\r\n            Price: place_source.Price, // цена за час занятий\r\n            Enabled: place_source.Enabled,\r\n            Access: {...this.copyAccess(place_source.Access)},\r\n        }\r\n    }\r\n\r\n    static copyCollect = (collect_source) => {\r\n        \r\n        if (collect_source == undefined || Object.keys(collect_source).length === 0) \r\n            return undefined\r\n\r\n        return {\r\n            Id: collect_source.Id,\r\n            Place: this.copyPlace(collect_source.Place),\r\n            Date: collect_source.Date,\r\n            Hour: collect_source.Hour,\r\n            Minute: collect_source.Minute,\r\n            DurationMinutes: collect_source.DurationMinutes,\r\n            Price: collect_source.Price, // цена за весь период\r\n            Options: [...collect_source.Options],\r\n            FixedByMemberPrice: collect_source.FixedByMemberPrice,\r\n            /*\r\n            описание доступа. выкладывается список доступных ролей на сборе. они описаны в usersGroups\r\n\r\n            */\r\n        UsersGroups: [...collect_source.UsersGroups.map(uGroup => {\r\n            return {\r\n                Id: uGroup.Id,\r\n                Amplua: {...this.copyAmplua(uGroup.Amplua)},\r\n                NumberOf: uGroup.NumberOf,  // количество участников \r\n                Access: {...this.copyAccess(uGroup.Access)}, // доступ на \r\n                Players: [...(uGroup.Players && uGroup.Players.length ? uGroup.Players.map(user => \r\n                    {\r\n                        return {User: {...this.copyUser(user.User)}, Payment: {}}\r\n                    }): \r\n                [{}])],\r\n                Price: uGroup.Price,\r\n                OrganizatorIsMember: uGroup.OrganizatorIsMember,\r\n            }\r\n        })],\r\n            UsersInvited: [\r\n                ...collect_source.UsersInvited.map(uInvited => {\r\n                    \r\n                    return {\r\n                        Id: uInvited.Id,\r\n                        ToBe: {...this.copyAmplua(uInvited.ToBe)}, \r\n                        User: {...this.copyUser(uInvited.User)},\r\n                    }\r\n                })\r\n            ],\r\n            UsersWantsToParticipate: [\r\n                ...collect_source.UsersWantsToParticipate.map(uWP => {\r\n                    \r\n                    return {\r\n                        \r\n                        Id: uWP.Id,\r\n                        ToBe: {...this.copyAmplua(uWP.ToBe)}, \r\n                        User: {...this.copyUser(uWP.User)},\r\n                    }\r\n                })\r\n            ],\r\n            Access: { ...this.copyAccess(collect_source.Access) },\r\n            Permanent: collect_source.Permanent,\r\n            OrganizatorIsMember: collect_source.OrganizatorIsMember,\r\n            AcceptedByPlaceOwner: collect_source.AcceptedByPlaceOwner, // сбор подтвержден арендодателем и занесен в расписание. на это время больше нельзя бронировать. \r\n            Organizer: {...this.copyUser(collect_source.Organizer)}\r\n        }\r\n    }\r\n\r\n}","import {timeSlotsInOneHour} from '../../store/constants/commonConstants'\r\n\r\nexport function isDate(str) {\r\n    return (Object.prototype.toString.call(new Date(str)) === \"[object Date]\");\r\n  }\r\n \r\nexport const getAge = (date) => {\r\n    if (date != undefined) \r\n        return Math.trunc((Date.now() - date.getTime()) / 31536000000);\r\n    else\r\n        return 0;\r\n    \r\n}\r\n\r\nexport const timeToString = (hours, minutes, seconds) => {\r\n    \r\n    let h = ((hours != undefined) ? (hours < 10? \"0\" + hours.toString(): hours.toString()) : \"\");\r\n    let m = ((minutes != undefined) ? (minutes < 10? \"0\" + minutes.toString(): minutes.toString()) : \"\");\r\n    let s = ((seconds != undefined) ? (seconds < 10 ? \"0\" + seconds.toString(): seconds.toString()) : \"\");\r\n    let res = \"\";\r\n\r\n    if (h.length > 0 && m.length > 0 && s.length > 0)\r\n        res = h + \":\" + m + \":\" + s;\r\n    else if (h.length > 0 && m.length > 0 && s.length == 0)\r\n        res = h + \":\" + m;\r\n    else if (h.length > 0 && m.length == 0 && s.length == 0)\r\n        res = h;\r\n    else if (h.length == 0 && m.length > 0 && s.length > 0)\r\n        res = m + \":\" + s;\r\n    else if (h.length == 0 && m.length == 0 && s.length > 0)\r\n        res = s;\r\n    else if (h.length == 0 && m.length > 0 && s.length == 0)\r\n        res = m;\r\n    else if (h.length > 0 && m.length == 0 && s.length > 0)\r\n        res = h + \":\" + s;\r\n    else\r\n        res = \"\";\r\n    return res;\r\n}\r\n\r\nexport const dateTimeToTimeString = (datetime) => {\r\n    return timeToString(new Date(datetime).getHours(), new Date(datetime).getMinutes())\r\n}\r\n\r\n// возвращает дату в формате ДН, ДД ММММ ГГГГ г. , в args args[0] - прибавить дней, args[1] - прибавить месяцев, args[2] - прибавить лет,\r\n// args[3] = true - пишем день недели, false - не пишем\r\nexport const dateToString = (date, ...args) => {\r\n    \r\n    if (typeof date == \"string\")\r\n        date = new Date(date);\r\n\r\n    let newDate = date;\r\n    let dateOptions = (args == undefined || args[3] == undefined || (args[3] != undefined && args[3] == true)) ?\r\n    {\r\n        // era: 'long',\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        weekday: 'short',\r\n        // timezone: 'UTC',\r\n        // hour: 'numeric',\r\n        // minute: 'numeric',\r\n        // second: 'numeric'\r\n    }\r\n    : {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n    };\r\n\r\n    if (args[0])\r\n        newDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate() + args[0])\r\n\r\n    if (args[1])\r\n        newDate = new Date(newDate.getFullYear(), newDate.getMonth() + args[1], newDate.getDate())\r\n\r\n    if (args[2])\r\n        newDate = new Date(newDate.getFullYear() + args[2], newDate.getMonth(), newDate.getDate())\r\n\r\n    return newDate.toLocaleString(\"ru\", dateOptions)\r\n}\r\n\r\n// прибавляет к дате переданное в параметрах количество дней, месяцев, лет. первый параметр -дни, второй- месяцы и т.д.\r\nexport const addToDate = (date, ...args) => {\r\n        \r\n    if (typeof date == \"string\")\r\n        date = new Date(date);\r\n    \r\n    let newDate = date;\r\n    \r\n    if (args[0]) // добавить дни\r\n        newDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate() + args[0])\r\n\r\n    if (args[1]) // добавить месяцы\r\n        newDate = new Date(newDate.getFullYear(), newDate.getMonth() + args[1], newDate.getDate())\r\n\r\n    if (args[2]) // добавить годы\r\n        newDate = new Date(newDate.getFullYear() + args[2], newDate.getMonth(), newDate.getDate())\r\n\r\n    return newDate;\r\n}\r\n\r\n// прибавляет к дате переданное в параметрах количество часов, минут, секунд. первый параметр -часы, второй- минуты и т.д.\r\nexport const addToTime = (date, ...args) => {\r\n     \r\n    if (typeof date == \"string\")\r\n        date = new Date(date);\r\n    \r\n    let newDate = date;\r\n    \r\n    if (args[0]) // добавить часы\r\n        newDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate(), newDate.getHours() + args[0])\r\n\r\n    if (args[1]) // добавить минуты\r\n        newDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate(), newDate.getHours(), newDate.getMinutes() + args[1])\r\n\r\n    if (args[2]) // добавить секунды\r\n        newDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate(), newDate.getHours(), newDate.getMinutes(), newDate.getSeconds() + args[2])\r\n\r\n    return newDate;\r\n}\r\n\r\n// сравнение двух дат только по дате без времени. true - равны, false- не равны\r\nexport const datesWithoutTimeIsSame = (date1, date2) => {\r\n    return (date1.getFullYear() == date2.getFullYear() && date1.getMonth() == date2.getMonth() && date1.getDate() == date2.getDate())\r\n}\r\n\r\n// сравнение двух дат только по времени (часы и минуты) без даты. true - равны, false- не равны\r\nexport const timesWithoutDateHourMinuteIsSame = (date1, date2) => {\r\n    return (date1.getHours() == date2.getHours() && date1.getMinutes() == date2.getMinutes())\r\n}\r\n\r\n// преобразование значения dateSelector из пакета vk ui в нативную дату JS\r\nexport const dateSelectorValueToJSDateValue = (dsValue) => {\r\n    //{day: currentDate.getDate(), month: currentDate.getMonth()+1, year: currentDate.getFullYear()}\r\n    return new Date(dsValue.year, dsValue.month-1, dsValue.day)\r\n}\r\n\r\n// преобразование нативной даты JS в значение dateSelector из пакета vk ui\r\nexport const jSDateValueToDateSelectorValue = (jsDate) => {\r\n    \r\n    return {day: jsDate.getDate(), month: jsDate.getMonth()+1, year: jsDate.getFullYear()}\r\n}\r\n\r\n// hours - количество часов в дне (по умолчанию 24 часа в сутках), slotsInHours - количество слотов под сбор в часу. по умолчанию 2 (каждые 30 минут)\r\nexport const timeSlotsForCollects = (hours=24, slotsInHour=timeSlotsInOneHour()) => {\r\n    let slotsNumber = hours * slotsInHour;  // сколько слотов в дне\r\n    let oneSlotMinutes = 60 / slotsInHour;  // сколько минут один слот\r\n    let slots = [] // слоты\r\n    \r\n    for (let i = 0; i < slotsNumber; i++){\r\n        slots.push({Hours: Math.trunc(i / slotsInHour), Minutes: Math.round((i / slotsInHour - Math.trunc(i / slotsInHour)) * 60), SlotMinutes: oneSlotMinutes})\r\n    }\r\n    \r\n    return slots\r\n}\r\n\r\n// создание массива объектов для расписания работы площадки\r\nexport const timeSlotsForSimpleCollects = (slotsNumber, slotsInHour=timeSlotsInOneHour(), startHour) => {\r\n    \r\n    let oneSlotMinutes = 60 / slotsInHour;  // сколько минут один слот\r\n    let slots = [] // слоты\r\n    for (let i = 0; i < slotsNumber; i++)\r\n    {\r\n        slots.push({\r\n            Hours: Math.trunc(i / slotsInHour) + startHour, \r\n            Minutes: Math.round((i / slotsInHour - Math.trunc(i / slotsInHour)) * 60), \r\n            SlotMinutes: oneSlotMinutes,\r\n            PricePerSlot: 0,\r\n            Enabled: true,\r\n            Selected: false,\r\n            Rented: false,}\r\n            )\r\n    }\r\n    \r\n    return slots\r\n\r\n}","const ACTION_SET_ACTIVE_MENU_ITEM = \"football/mainMenu/ACTION_SET_ACTIVE_MENU_ITEM\";\r\n\r\n\r\n\r\nconst initState = {\r\n    menuItems: [{\r\n        id: 0,\r\n        name: \"hot\",\r\n        title: \"Горячее\",\r\n        position: 0,\r\n        enabled: true,\r\n        show: true,\r\n    },{\r\n        id: 1,\r\n        name: \"allTournaments\",\r\n        title: \"Турниры\",\r\n        position: 1,\r\n        enabled: true,\r\n        show: true,\r\n    },{\r\n        id: 2,\r\n        name: \"profile\",\r\n        title: \"Профиль\",\r\n        position: 3,\r\n        enabled: true,\r\n        show: true,\r\n    },\r\n    {\r\n        id: 3,\r\n        name: \"tournamentadmin\",\r\n        title: \"Управление турнирами\",\r\n        position: 4,\r\n        enabled: true,\r\n        show: false,\r\n    },\r\n    {\r\n        id: 4,\r\n        name: \"tournamentitem\",\r\n        title: \"Турнир\",\r\n        position: 5,\r\n        enabled: true,\r\n        show: false,\r\n    },\r\n    {\r\n        id: 3,\r\n        name: \"teamadmin\",\r\n        title: \"Управление командами\",\r\n        position: 6,\r\n        enabled: true,\r\n        show: false,\r\n    },\r\n    {\r\n        id: 4,\r\n        name: \"teamitem\",\r\n        title: \"Команда\",\r\n        position: 7,\r\n        enabled: true,\r\n        show: false,\r\n    },\r\n    {\r\n        id: 5,\r\n        name: \"addcollect\",\r\n        title: \"Новый сбор\",\r\n        position: 8,\r\n        enabled: true,\r\n        show: false,\r\n    },\r\n    {\r\n        id: 6,\r\n        name: \"viewcollect\",\r\n        title: \"Сбор\",\r\n        position: 9,\r\n        enabled: true,\r\n        show: false,\r\n    },\r\n    {\r\n        id: 7,\r\n        name: \"viewuser\",\r\n        title: \"Игрок\",\r\n        position: 10,\r\n        enabled: true,\r\n        show: false,\r\n    },\r\n    {\r\n        id: 8,\r\n        name: \"bidlist\",\r\n        title: \"Доступно для заявки\",\r\n        position: 11,\r\n        enabled: true,\r\n        show: false,\r\n    },\r\n    {\r\n        id: 9,\r\n        name: \"collectslist\",\r\n        title: \"Все сборы\",\r\n        position: 12,\r\n        enabled: true,\r\n        show: true,\r\n    },\r\n    {\r\n        id: 10,\r\n        name: \"collectadmin\",\r\n        title: \"Сбор\",\r\n        position: 12,\r\n        enabled: true,\r\n        show: true,\r\n    },\r\n    {\r\n        id: 11,\r\n        name: \"notauthorized\",\r\n        title: \"Не авторизован\",\r\n        position: 13,\r\n        enabled: true,\r\n        show: true,\r\n    },\r\n    {\r\n        id: 11,\r\n        name: \"matchitem\",\r\n        title: \"Матч\",\r\n        position: 14,\r\n        enabled: true,\r\n        show: true,\r\n    },\r\n    \r\n],\r\n    //activeItem: {id: 0, name: \"hot\", title: \"Горячее\", position: 0, enabled: true, show: true,},\r\n    activeItem: {id: 11, name: \"notauthorized\", title: \"Не авторизован\", position: 13, enabled: true, show: true,},\r\n}\r\n\r\n\r\nlet mainMenuReducer = (state = initState, action) => \r\n{\r\n    switch (action.type){\r\n        case ACTION_SET_ACTIVE_MENU_ITEM: {\r\n            \r\n            return {...state,\r\n                activeItem: {...state.menuItems.find(it => it.name == action.menuName)}\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const setActiveMenuItem = (menuName) => {\r\n    \r\n    return {\r\n        type: ACTION_SET_ACTIVE_MENU_ITEM,\r\n        menuName\r\n    }\r\n}\r\n\r\n\r\nexport default mainMenuReducer;","import Axios from 'axios'\r\n\r\n//export const backserver = \"https://oblakosporta-alexsmi.1gb.ru\";\r\nexport const backserver = \"https://testhhide.alexsmirnovpro.ru\"; // тестовый 2\r\n//export const backserver = \"https://oblakosporta.ru\"; // прод\r\n//export const backserver = \"https://front.oblakosporta.ru\";\r\n//export const backserver = \"https://localhost:44325\";  // локальный\r\n//export const backserver = \"https://192.168.56.101:44325\";\r\nexport const URL = backserver + \"/umbraco/api/\";\r\nexport const authQueryString = window.location.search;\r\n\r\n\r\n\r\nexport\tconst PostJsonInstance = Axios.create(\r\n\t\t{\r\n\t\t\tbaseURL: URL,\r\n\t\t\ttimeout: 15000,\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\"}\r\n\t\t}\r\n\t)","import { PostJsonInstance, authQueryString } from './server';\r\n\r\nexport let errorObj = (text) => {\r\n    return { resultcode: 1, result: \"Error\", data: null, message: text }\r\n}\r\n\r\nexport let okObj = (dat) => {\r\n    return { resultcode: 0, result: \"Ok\", data: dat, message: \"\" }\r\n}\r\n\r\n\r\n// export let ApiSendInfo =\r\n// {\r\n//     settings: {timeout: 10, }, // настройки. timeout - таймаут актуальности запроса, после истечения времени, запрос удаляется\r\n//     requests: [/* {name: \"PlaceAPIgetAll\", time: new Date()} */], \r\n//     system: {},\r\n//     addRequest: function(name){\r\n//         let requestInQueue = this_.requests.filter(req => req.name == name);\r\n//         if (requestInQueue && requestInQueue.length > 0){\r\n//             return false;\r\n//         }\r\n//         let currentDT = new Date();\r\n//         this.requests.push({name, time: currentDT});\r\n//         return {name, time: currentDT};\r\n//     },\r\n//     checkRequest: function(name){\r\n//         let requestInQueue = this_.requests.filter(req => req.name == name);\r\n//         if (requestInQueue && requestInQueue.length > 0){\r\n//             return true;\r\n//         }\r\n//         return false;\r\n//     },\r\n//     check: function(){\r\n//         ////debugger\r\n//         this_.requests = this_.requests ? this_.requests.map(req => {\r\n//             let now = new Date();\r\n//             if ((req.time - now).getSeconds() < this_.settings.timeout){\r\n//                 return req;\r\n//             }\r\n//         }) : []\r\n//     },\r\n// }\r\n\r\n//export const ApiTimer = setInterval(ApiSendInfo.check, 1000);\r\n\r\nexport const VKAPI = {\r\n    getUser(id) {\r\n        debugger\r\n        return PostJsonInstance.get(\"https://api.vk.com/method/users.get?user_id=\" + id + \"&v=5.52\").then(data => {\r\ndebugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n        \r\n    }\r\n}\r\n\r\nexport const CityAPI = {\r\n    // запрос всех мест\r\n    // startindex - индекс, с которого начинать ответ\r\n    getAll(startindex = 0) {\r\n        //let formData = new FormData();\r\n        //formData.append(\"startindex\", startindex);\r\n        return PostJsonInstance.post(\"City/GetAllFromAreas\" + authQueryString/*, formData*/).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    },\r\n}\r\n\r\nexport const PlaceAPI = {\r\n\r\n    // запрос всех мест\r\n    // startindex - индекс, с которого начинать ответ\r\n    getAll(startindex = 0) {\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        return PostJsonInstance.post(\"Places/GetPlaces\" + authQueryString, formData).then(data => {\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n\r\n    // запрос всех мест города по Id города\r\n    // startindex - индекс, с которого начинать ответ\r\n    getAllInCityByCityUmbracoId(cityId, startindex = 0) {\r\n        //////debugger\r\n        //if (!ApiSendInfo.checkRequest(\"PlaceAPIgetAllInCityByCityUmbracoId\")){\r\n        //ApiSendInfo.addRequest(\"PlaceAPIgetAllInCityByCityUmbracoId\");\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"cityumbracoid\", cityId);\r\n        return PostJsonInstance.post(\"Places/getAllInCityByCityUmbracoId\" + authQueryString, formData).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n        //}\r\n    },\r\n\r\n\r\n\r\n    // запрос места по его Id\r\n    // placeId - Id места\r\n    getById(placeId) {\r\n        let formData = new FormData();\r\n        formData.append(\"placeid\", placeId);\r\n        return PostJsonInstance.post(\"Places/GetPlaceById\" + authQueryString, formData).then(data => {\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n\r\n\r\n}\r\n\r\nexport const SimplePlaceAPI = {\r\n\r\n    // запрос всех мест города по Id города\r\n    // startindex - индекс, с которого начинать ответ\r\n    getAllInCityByCityUmbracoId(cityId, startindex = 0) {\r\n        //////debugger\r\n        //if (!ApiSendInfo.checkRequest(\"PlaceAPIgetAllInCityByCityUmbracoId\")){\r\n        //ApiSendInfo.addRequest(\"PlaceAPIgetAllInCityByCityUmbracoId\");\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"cityumbracoid\", cityId);\r\n        return PostJsonInstance.post(\"SimplePlace/GetSimplePlacesInCity\" + authQueryString, formData).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n        //}\r\n    },\r\n\r\n    // запрос всех аренд города по Id города\r\n    // startindex - индекс, с которого начинать ответ\r\n    // history - запрос истории (true) или актуального (false)\r\n    \r\n\r\n}\r\n\r\nexport const RentAPI = {\r\n\r\n    // запрос всех аренд города по Id города\r\n    // startindex - индекс, с которого начинать ответ\r\n    // history - запрос истории (true) или актуального (false)\r\n    getAllRentsInCityByCityUmbracoId(cityId, startindex = 0) {\r\n        //////debugger\r\n        //if (!ApiSendInfo.checkRequest(\"PlaceAPIgetAllInCityByCityUmbracoId\")){\r\n        //ApiSendInfo.addRequest(\"PlaceAPIgetAllInCityByCityUmbracoId\");\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"cityumbracoid\", cityId);\r\n        formData.append(\"history\", false);\r\n        return PostJsonInstance.post(\"Rents/GetRentsInCityByCityId\" + authQueryString, formData).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n        //}\r\n    },\r\n\r\n}\r\n\r\nexport const CollectAPI = {\r\n\r\n    getAll() {\r\n        return PostJsonInstance.post(\"Collects/GetAll\").then(data => {\r\n            return okObj(data.data);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    // запрос всех сборов в месте по его Id\r\n    // placeId - Id места\r\n    // startindex - индекс, с которого начинать ответ\r\n    getAllInPlaceByPlaceId(placeId, startindex = 0) {\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"placeid\", placeId);\r\n\r\n        return PostJsonInstance.post(\"Collects/GetAllInPlace\" + authQueryString, formData).then(data => {\r\n            return okObj(data.data);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    // запрос всех сборов в городе по его Id\r\n    // cityId - Id города\r\n    // startindex - индекс, с которого начинать ответ\r\n    getAllInCityByCityId(cityId, startindex = 0) {\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"cityid\", cityId);\r\n        return PostJsonInstance.post(\"Collects/GetAllInCityByCityId\" + authQueryString, formData).then(data => {\r\n            return okObj(data.data);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    \r\n    addSimpleCollect(userProfileId, simpleCollect) {\r\n        debugger\r\n        //simpleCollectUserProfile\r\n\r\n        let userProfile = {\r\n            UserProfileId: userProfileId\r\n        }\r\n        //matchInfo.When = new Date(matchInfo.When.year, matchInfo.When.month - 1, matchInfo.When.day, hours, minutes );\r\n        return PostJsonInstance.post(\"SimpleCollect/AddCollect\" + authQueryString, JSON.stringify({ simpleCollect: { ...simpleCollect }, userProfile: { ...userProfile } })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    editSimpleCollect(userProfileId, simpleCollect) {\r\n        debugger\r\n        //simpleCollectUserProfile\r\n\r\n        let userProfile = {\r\n            UserProfileId: userProfileId\r\n        }\r\n        //matchInfo.When = new Date(matchInfo.When.year, matchInfo.When.month - 1, matchInfo.When.day, hours, minutes );\r\n        return PostJsonInstance.post(\"SimpleCollect/EditCollect\" + authQueryString, JSON.stringify({ simpleCollect: { ...simpleCollect }, userProfile: { ...userProfile } })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    delSimpleCollect(userProfileId, simpleCollect) {\r\n        debugger\r\n        //simpleCollectUserProfile\r\n\r\n        let userProfile = {\r\n            UserProfileId: userProfileId\r\n        }\r\n        //matchInfo.When = new Date(matchInfo.When.year, matchInfo.When.month - 1, matchInfo.When.day, hours, minutes );\r\n        return PostJsonInstance.post(\"SimpleCollect/DelCollect\" + authQueryString, JSON.stringify({ simpleCollect: { ...simpleCollect }, userProfile: { ...userProfile } })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    registerSimpleMemberToSimpleCollect(userProfileId, simpleCollect) {\r\n        //simpleCollectUserProfile\r\n\r\n        let userProfile = {\r\n            UserProfileId: userProfileId\r\n        }\r\n        //matchInfo.When = new Date(matchInfo.When.year, matchInfo.When.month - 1, matchInfo.When.day, hours, minutes );\r\n        return PostJsonInstance.post(\"SimpleCollect/RegisterMember\" + authQueryString, JSON.stringify({ simpleCollect: { ...simpleCollect }, userProfile: { ...userProfile } })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    deleteMemberFromSimpleCollect(userProfileId, simpleCollect, simpleMember, reason=\"\") {\r\n        debugger\r\n        //simpleCollectUserProfile\r\n        simpleMember.Comment=reason;\r\n\r\n        let userProfile = {\r\n            UserProfileId: userProfileId\r\n        }\r\n        //matchInfo.When = new Date(matchInfo.When.year, matchInfo.When.month - 1, matchInfo.When.day, hours, minutes );\r\n        return PostJsonInstance.post(\"SimpleCollect/DeleteMember\" + authQueryString, JSON.stringify({ simpleCollect: { ...simpleCollect }, userProfile: { ...userProfile }, simpleMember: {...simpleMember} })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n\r\n    // запрос всех сборов в городе по его Id\r\n    // cityId - Id города\r\n    // startindex - индекс, с которого начинать ответ\r\n    getAllSimpleByCityUmbracoId(cityId, startindex = 0) {\r\n        //debugger\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"cityId\", cityId);\r\n        formData.append(\"history\", false);\r\n        return PostJsonInstance.post(\"SimpleCollect/GetSimpleCollectsInCityByCityId\" + authQueryString, formData).then(data => {\r\n            //return okObj(data.data);\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n    },\r\n}\r\n\r\nexport const TeamAPI = {\r\n\r\n    // getAll() {\r\n    //     return PostJsonInstance.post(\"Collects/GetAll\").then(data => {\r\n    //         return okObj(data.data);\r\n    //     })\r\n    //         .catch(error => {\r\n    //             return errorObj(error)\r\n    //         })\r\n    // },\r\n\r\n    // запрос всех сборов в месте по его Id\r\n    // placeId - Id места\r\n    // startindex - индекс, с которого начинать ответ\r\n    getTeamInfoByTeamId(teamId) {\r\n        let formData = new FormData();\r\n        formData.append(\"teamid\", teamId);\r\n\r\n        return PostJsonInstance.post(\"SimpleTeam/GetById\" + authQueryString, formData).then(data => {\r\n            //debugger\r\n            return okObj(data.data);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n}\r\n\r\nexport const ProfileAPI = {\r\n    // запрос информации о пользователе\r\n    getUserProfile(vkUserData) {\r\n\r\n        return PostJsonInstance.post(\"Account/GetUserProfile\" + authQueryString, JSON.stringify({ ...vkUserData })).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    // авторизация пользователя (авторегистрация в случае, если такой пользователь отсутствует в базе)\r\n    getAuthInfo_old(formData) {\r\n        return PostJsonInstance.post(\"Account/Auth\" + authQueryString, formData).then(data => {\r\n            return okObj(data.data);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    // регистрация/обновление даты рождения + получение данных о профиле\r\n    getAuthInfo(vkUser) {\r\n\r\n        let [day, month, year] = vkUser.bdate.split('.');\r\n        let bDate = new Date(Date.UTC(year ? +year : 1, month ? (+month - 1) : 1, day ? day : 1, 0, 0, 0));\r\n\r\n        let vkUserData = {\r\n            'bdate': bDate,\r\n            'city': { 'id': vkUser.city.id, 'title': vkUser.city.title },\r\n            'country': { 'id': vkUser.country.id, 'title': vkUser.country.title },\r\n            'first_name': vkUser.first_name,\r\n            'id': vkUser.id,\r\n            'last_name': vkUser.last_name,\r\n            'photo_100': vkUser.photo_100,\r\n            'photo_200': vkUser.photo_200,\r\n            'photo_max_orig': vkUser.photo_max_orig,\r\n            'sex': vkUser.sex,\r\n            'timezone': vkUser.timezone,\r\n        }\r\n\r\n        return PostJsonInstance.post(\"Account/Register\" + authQueryString, JSON.stringify({ ...vkUserData })).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    // изменение города привязки пользователя\r\n    setUserProfileCity(userData) {\r\n        if (userData) {\r\n            return PostJsonInstance.post(\"Account/UpdateUserProfileCity\" + authQueryString, JSON.stringify({ ...userData })).then(data => {\r\n\r\n                return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n            })\r\n                .catch(error => {\r\n                    return errorObj(error)\r\n                })\r\n        }\r\n        else {\r\n            return errorObj(\"Внутренняя ошибка, не получены данные от провайдера в API\");\r\n        }\r\n    }\r\n}\r\n\r\nexport const CityTournamentAdminAPI = {\r\n    // запрос всех админов города\r\n    // startindex - индекс, с которого начинать ответ\r\n    getAll(startindex = 0) {\r\n        //let formData = new FormData();\r\n        //formData.append(\"startindex\", startindex);\r\n        return PostJsonInstance.post(\"SimpleCityTournamentAdmin/GetAll\" + authQueryString/*, formData*/).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    // возвращает всех админов города\r\n    getAllInCityByCityId(cityUmbracoId, startindex = 0) {\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"cityumbracoid\", cityUmbracoId);\r\n        return PostJsonInstance.post(\"SimpleCityTournamentAdmin/GetAllInCity\" + authQueryString, formData).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    /// запрос групп турнира\r\n    getTournamentGroups(tournament, startindex) {\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"tournamentId\", tournament.Id);\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/GetTournamentGroups\" + authQueryString, formData).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    changeTeamTournamentGroup(team, newgroup, oldgroup,  userprofile){\r\n        //debugger\r\n        let teamToSend = {\r\n            Id: team.Id\r\n        }\r\n        let newgroupToSend = {\r\n            Id: newgroup.Id,\r\n            TournamentId: newgroup.TournamentId,\r\n        }\r\n        let oldgroupToSend = {\r\n            Id: oldgroup.Id,\r\n            TournamentId: oldgroup.TournamentId,\r\n        }\r\n//debugger\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/SetTeamTournamentGroup\" + authQueryString, JSON.stringify({ team: { ...teamToSend }, \r\n            newGroup: { ...newgroupToSend }, oldGroup: { ...oldgroupToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            //debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                //debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    \r\n    // возвращает заявки по турниру (для админа турнира)\r\n    getTournamentTeamsByTournament(userprofile, tournament, startindex = 0) {\r\n        ////debugger \r\n        let tournamentToSend = {\r\n            Id: tournament.Id\r\n        }\r\n\r\n        return PostJsonInstance.post(\"SimpleTournament/GetTeamsByTournament\" + authQueryString, JSON.stringify({ tournament: { ...tournamentToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            //debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                //debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    getAllByAdminProfileId(userProfileId, startindex = 0) {\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"adminprofileid\", userProfileId);\r\n        return PostJsonInstance.post(\"SimpleTournament/GetAllByAdminId\" + authQueryString, formData).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    saveTournament(tournament, userprofile) {\r\n        ////debugger\r\n        \r\n\r\n        if (tournament.Id < 0){\r\n            let tournamentToSend = {\r\n                ...tournament,\r\n                WhenBegin: new Date(tournament.WhenBegin.year, tournament.WhenBegin.month - 1, tournament.WhenBegin.day + 1),\r\n                WhenEnd: new Date(tournament.WhenEnd.year, tournament.WhenEnd.month - 1, tournament.WhenEnd.day + 1),\r\n                Year: tournament.WhenEnd.year,\r\n                CityId: userprofile.CityUmbracoId, // важный момент. пока не загружен с сервера существующий турнир, мы не знаем к какому городу привязка. берем CityUmbracoId из профиля (на сервере в Add это обрабатывается)\r\n            }\r\n\r\n            return PostJsonInstance.post(\"SimpleTournament/Add\" + authQueryString, JSON.stringify({ tournament: { ...tournamentToSend }, userProfile: { ...userprofile } })).then(data => {\r\n                ////debugger\r\n                return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n            })\r\n                .catch(error => {\r\n                    ////debugger\r\n                    return errorObj(error)\r\n                })\r\n        }\r\n        else{\r\n            let tournamentToSend = {\r\n                ...tournament,\r\n                WhenBegin: new Date(tournament.WhenBegin.year, tournament.WhenBegin.month - 1, tournament.WhenBegin.day + 1),\r\n                WhenEnd: new Date(tournament.WhenEnd.year, tournament.WhenEnd.month - 1, tournament.WhenEnd.day + 1),\r\n                Year: tournament.WhenEnd.year,\r\n                TournamentGroups: [...tournament.TournamentGroups.map(item => {\r\n                    return {\r\n                        Name: item.Name,\r\n                        Id: item.Id != undefined ? item.Id : -1,\r\n                    }\r\n                })],\r\n                CityId: tournament.CityId, // важный момент. пока не загружен с сервера существующий турнир, мы не знаем к какому городу привязка. берем CityUmbracoId из профиля (на сервере в Add это обрабатывается)\r\n            }\r\n\r\n            return PostJsonInstance.post(\"SimpleTournament/Update\" + authQueryString, JSON.stringify({ tournament: { ...tournamentToSend }, userProfile: { ...userprofile } })).then(data => {\r\n                ////debugger\r\n                return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n            })\r\n                .catch(error => {\r\n                    ////debugger\r\n                    return errorObj(error)\r\n                })\r\n        }\r\n    },\r\n\r\n    /// публикация турнира (или снятие с публикации, если publish=false)\r\n    publishTournament(tournament, userprofile, publish) {\r\n        \r\n        let tournamentToSend = {\r\n            ...tournament,\r\n            WhenBegin: new Date(tournament.WhenBegin.year, tournament.WhenBegin.month - 1, tournament.WhenBegin.day + 1),\r\n            WhenEnd: new Date(tournament.WhenEnd.year, tournament.WhenEnd.month - 1, tournament.WhenEnd.day + 1),\r\n            Published: publish,\r\n            Year: tournament.WhenEnd.year,\r\n            CityId: userprofile.CityUmbracoId,\r\n        }\r\n        return PostJsonInstance.post(\"SimpleTournament/Publish\" + authQueryString, JSON.stringify({ tournament: { ...tournamentToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                \r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    /// удаление турнира (пометка на удаление)\r\n    deleteTournament(tournament, userprofile) {\r\n        ////debugger\r\n        let tournamentToSend = {\r\n            ...tournament,\r\n            WhenBegin: new Date(tournament.WhenBegin.year, tournament.WhenBegin.month - 1, tournament.WhenBegin.day + 1),\r\n            WhenEnd: new Date(tournament.WhenEnd.year, tournament.WhenEnd.month - 1, tournament.WhenEnd.day + 1),\r\n            Year: tournament.WhenEnd.year,\r\n            CityId: userprofile.CityUmbracoId,\r\n        }\r\n        return PostJsonInstance.post(\"SimpleTournament/Delete\" + authQueryString, JSON.stringify({ tournament: { ...tournamentToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            ////debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                ////debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    // удаление команды (отклонение заявки от команды) из турнира\r\n    deleteTeamFromTournamentByTeam(team, tg, userprofile, admintext){\r\n        //debugger\r\n        let teamToSend = {\r\n            Id: team.Id\r\n        }\r\n        let tournamentGroupToSend = {\r\n            Id: tg.Id,\r\n            TournamentId: tg.TournamentId,\r\n        }\r\n//debugger\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/DeleteTeamFromTournament\" + authQueryString, JSON.stringify({ team: { ...teamToSend }, \r\n            tournamentGroup: { ...tournamentGroupToSend }, userProfile: { ...userprofile }, admintext: admintext })).then(data => {\r\n            //debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                //debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    /// удаление группы турнира\r\n    deleteTournamentGroup(tournament, userprofile, tournamentGroupId) {\r\n        ////debugger\r\n        let tournamentToSend = {\r\n            ...tournament,\r\n            WhenBegin: new Date(tournament.WhenBegin.year, tournament.WhenBegin.month - 1, tournament.WhenBegin.day + 1),\r\n            WhenEnd: new Date(tournament.WhenEnd.year, tournament.WhenEnd.month - 1, tournament.WhenEnd.day + 1),\r\n            Year: tournament.WhenEnd.year,\r\n            CityId: userprofile.CityUmbracoId,\r\n        }\r\n\r\n        let tournamentGroup = {\r\n            Id: tournamentGroupId,\r\n        }\r\n        return PostJsonInstance.post(\"SimpleTournamentGroup/Delete\" + authQueryString, JSON.stringify({ tournament: { ...tournamentToSend }, userProfile: { ...userprofile }, tournamentGroup: {...tournamentGroup} })).then(data => {\r\n            ////debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                ////debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n   \r\n    /// добавление группы турнира\r\n    addTournamentGroup(tournament, userprofile, tGroup) {\r\n        ////debugger\r\n        let tournamentToSend = {\r\n            ...tournament,\r\n            WhenBegin: new Date(tournament.WhenBegin.year, tournament.WhenBegin.month - 1, tournament.WhenBegin.day + 1),\r\n            WhenEnd: new Date(tournament.WhenEnd.year, tournament.WhenEnd.month - 1, tournament.WhenEnd.day + 1),\r\n            Year: tournament.WhenEnd.year,\r\n            CityId: userprofile.CityUmbracoId,\r\n        }\r\n\r\n        let tournamentGroup = {\r\n            Id: tGroup.Id,\r\n            Name: tGroup.Name,\r\n        }\r\n        return PostJsonInstance.post(\"SimpleTournamentGroup/Add\" + authQueryString, JSON.stringify({ tournament: { ...tournamentToSend }, userProfile: { ...userprofile }, tournamentGroup: {...tournamentGroup} })).then(data => {\r\n            ////debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                ////debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n\r\n\r\n    // AddContact(contact){\r\n    //     ////debugger\r\n    //     //return instace.get('/contacts/getcontacts');\r\n    //     let Contact= contact;\r\n    //     return jsonInstace.post(baseUrl + 'Contacts/New', JSON.stringify({...Contact})).then(x => {\r\n    //         ////debugger\r\n    //         return x.data;\r\n    //     }).catch(y => {\r\n    //         ////debugger\r\n    //         console.log(y)\r\n    //     });\r\n    // },\r\n}\r\n\r\nexport const TeamAdminAPI = {\r\n    // запрос всех админов города\r\n    // startindex - индекс, с которого начинать ответ\r\n    getAll(startindex = 0) {\r\n        //let formData = new FormData();\r\n        //formData.append(\"startindex\", startindex);\r\n        return PostJsonInstance.post(\"SimpleTeamAdmin/GetAll\" + authQueryString/*, formData*/).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    getAllInCityByCityId(cityUmbracoId, startindex = 0) {\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"cityumbracoid\", cityUmbracoId);\r\n        return PostJsonInstance.post(\"SimpleTeamAdmin/GetAllInCity\" + authQueryString, formData).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    getAllByAdminProfileId(userProfileId, startindex = 0) {\r\n        let formData = new FormData();\r\n        formData.append(\"startindex\", startindex);\r\n        formData.append(\"adminprofileid\", userProfileId);\r\n        return PostJsonInstance.post(\"SimpleTeam/GetAllByAdminId\" + authQueryString, formData).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    saveTeam(team, userprofile) {\r\n        \r\n        if (team.Id < 0){\r\n            let teamToSend = {\r\n                ...team,\r\n                WhenBorn: new Date(team.WhenBorn.year, team.WhenBorn.month - 1, team.WhenBorn.day + 1),\r\n                Year: team.WhenBorn.year,\r\n                CityId: userprofile.CityUmbracoId, // важный момент. пока не загружен с сервера существующий турнир, мы не знаем к какому городу привязка. берем CityUmbracoId из профиля (на сервере в Add это обрабатывается)\r\n            }\r\n\r\n            return PostJsonInstance.post(\"SimpleTeam/Add\" + authQueryString, JSON.stringify({ team: { ...teamToSend }, userProfile: { ...userprofile } })).then(data => {\r\n                ////debugger\r\n                return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n            })\r\n                .catch(error => {\r\n                    ////debugger\r\n                    return errorObj(error)\r\n                })\r\n        }\r\n        else{\r\n            let teamToSend = {\r\n                ...team,\r\n                WhenBorn: new Date(team.WhenBorn.year, team.WhenBorn.month - 1, team.WhenBorn.day + 1),\r\n                Year: team.WhenBorn.year,\r\n                CityId: team.CityId, // важный момент. пока не загружен с сервера существующий турнир, мы не знаем к какому городу привязка. берем CityUmbracoId из профиля (на сервере в Add это обрабатывается)\r\n            }\r\n\r\n            return PostJsonInstance.post(\"SimpleTeam/Update\" + authQueryString, JSON.stringify({ team: { ...teamToSend }, userProfile: { ...userprofile } })).then(data => {\r\n                ////debugger\r\n                return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n            })\r\n                .catch(error => {\r\n                    ////debugger\r\n                    return errorObj(error)\r\n                })\r\n        }\r\n    },\r\n\r\n    /// публикация турнира (или снятие с публикации, если publish=false)\r\n    publishTournament(tournament, userprofile, publish) {\r\n        \r\n        let tournamentToSend = {\r\n            ...tournament,\r\n            WhenBegin: new Date(tournament.WhenBegin.year, tournament.WhenBegin.month - 1, tournament.WhenBegin.day + 1),\r\n            WhenEnd: new Date(tournament.WhenEnd.year, tournament.WhenEnd.month - 1, tournament.WhenEnd.day + 1),\r\n            Published: publish,\r\n            Year: tournament.WhenEnd.year,\r\n            CityId: userprofile.CityUmbracoId,\r\n        }\r\n        return PostJsonInstance.post(\"SimpleTeam/Publish\" + authQueryString, JSON.stringify({ tournament: { ...tournamentToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                \r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    /// удаление турнира (пометка на удаление)\r\n    deleteTeam(team, userprofile) {\r\n        let teamToSend = {\r\n            ...team,\r\n            WhenBorn: new Date(team.WhenBorn.year, team.WhenBorn.month - 1, team.WhenBorn.day + 1),\r\n            Year: team.WhenBorn.year,\r\n            CityId: team.CityId, // важный момент. пока не загружен с сервера существующий турнир, мы не знаем к какому городу привязка. берем CityUmbracoId из профиля (на сервере в Add это обрабатывается)\r\n        }\r\n        return PostJsonInstance.post(\"SimpleTeam/Delete\" + authQueryString, JSON.stringify({ team: { ...teamToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            ////debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                ////debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n}\r\n\r\nexport const BidTeamAPI = {\r\n    \r\n    getActualTournaments(userprofile, team, startindex = 0) {\r\n        ////debugger \r\n        let teamToSend = {\r\n            ...team,\r\n            WhenBorn: new Date(team.WhenBorn.year, team.WhenBorn.month - 1, team.WhenBorn.day + 1),\r\n            Year: team.WhenBorn.year,\r\n        }\r\n\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/GetActualTournaments\" + authQueryString, JSON.stringify({ team: { ...teamToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            ////debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                ////debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    getTeamBidsByTeam(userprofile, team, startindex = 0) {\r\n        ////debugger \r\n        let teamToSend = {\r\n            ...team,\r\n            WhenBorn: new Date(team.WhenBorn.year, team.WhenBorn.month - 1, team.WhenBorn.day + 1),\r\n            Year: team.WhenBorn.year,\r\n        }\r\n\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/GetTeamBidsByTeam\" + authQueryString, JSON.stringify({ team: { ...teamToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            ////debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                ////debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n\r\n    // возвращает заявки по турниру (для админа турнира)\r\n    getTeamBidsByTournament(userprofile, tournament, startindex = 0) {\r\n        ////debugger \r\n        let tournamentToSend = {\r\n            Id: tournament.Id\r\n        }\r\n\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/GetTeamBidsByTournament\" + authQueryString, JSON.stringify({ tournament: { ...tournamentToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                \r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n    // согласовывает заявку (для админа турнира)\r\n    acceptTeamToTournamentBid(bid, userprofile, tournament, admintext) {\r\n        ////debugger \r\n        let tournamentToSend = {\r\n            Id: tournament.Id\r\n        }\r\n   //debugger     \r\n        bid.AdminTournamentComment = admintext;\r\n\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/AcceptBid\" + authQueryString, JSON.stringify({ bid: {...bid}, tournament: { ...tournamentToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            //debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                //debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    \r\n    // отклоняет заявку (для админа турнира)\r\n    declineTeamToTournamentBid(bid, userprofile, tournament, admintext) {\r\n        ////debugger \r\n        let tournamentToSend = {\r\n            Id: tournament.Id\r\n        }\r\n   //debugger     \r\n        bid.AdminTournamentComment = admintext;\r\n\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/DeclineBid\" + authQueryString, JSON.stringify({ bid: {...bid}, tournament: { ...tournamentToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            //debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                //debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n\r\n    addBidTeamToTournament(tournamentgroup, userprofile, team, teamName, startindex = 0) {\r\n        ////debugger \r\n        let teamToSend = {\r\n            ...team,\r\n            WhenBorn: new Date(team.WhenBorn.year, team.WhenBorn.month - 1, team.WhenBorn.day + 1),\r\n            Year: team.WhenBorn.year,\r\n        }\r\n\r\n        let bid = {\r\n                    TeamName: (teamName != \"\") ? teamName : team.Name, \r\n                    When: new Date(),\r\n                    TournamentGroupId: tournamentgroup.Id,\r\n                    UserProfileId: userprofile.UserProfileId,\r\n                    TeamId: team.Id,\r\n                    Team: null,\r\n                    Approved: false,\r\n                    UserProfile: null,\r\n                    ErrorMessage: \"\",\r\n                    AdminTournamentComment : \"\",\r\n                    TournamentGroup: null,\r\n                }\r\n\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/Add\" + authQueryString, JSON.stringify({ bidTeamToTournament: { ...bid }, team: { ...teamToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            //debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                //debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    delBidTeamToTournament(bid, userprofile, team) {\r\n        ////debugger \r\n        let teamToSend = {\r\n            ...team,\r\n            WhenBorn: new Date(team.WhenBorn.year, team.WhenBorn.month - 1, team.WhenBorn.day + 1),\r\n            Year: team.WhenBorn.year,\r\n        }\r\n\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/Delete\" + authQueryString, JSON.stringify({ bidTeamToTournament: { ...bid }, team: { ...teamToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            ////debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                ////debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    /// допуск комады к турниру\r\n    approveBidTeamToTournament(bid, userprofile, tournament, approve, admincomment) {\r\n        ////debugger \r\n        let bidToSend = {...bid,\r\n            AdminTournamentComment: admincomment,\r\n            Approve: approve,\r\n        }\r\n\r\n        return PostJsonInstance.post(\"SimpeBidTeamToTournament/Approve\" + authQueryString, JSON.stringify({ bid: { ...bidToSend }, tournament: { ...tournament }, userProfile: { ...userprofile } })).then(data => {\r\n            ////debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                ////debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n\r\n}\r\n\r\nexport const MatchAPI = {\r\n    addMatch(matchInfo, userprofile, hours, minutes) {\r\n        \r\n        //new Date()\r\n        matchInfo.When = new Date(matchInfo.When.year, matchInfo.When.month - 1, matchInfo.When.day, hours, minutes );\r\n        return PostJsonInstance.post(\"Match/Add2\" + authQueryString, JSON.stringify({ match: { ...matchInfo }, userProfile: { ...userprofile } })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                //debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    delMatch(matchInfo, userprofile, hours, minutes) {\r\n        \r\n        //new Date()\r\n        matchInfo.When = new Date(matchInfo.When.year, matchInfo.When.month - 1, matchInfo.When.day, hours, minutes );\r\n        return PostJsonInstance.post(\"Match/Del\" + authQueryString, JSON.stringify({ match: { ...matchInfo }, userProfile: { ...userprofile } })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                //debugger\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    getAllMatchesByTournament(tournament, userprofile) {\r\n        \r\n        let tournamentToSend = {\r\n            Id: tournament.Id\r\n        }\r\n        //new Date()\r\n        //matchInfo.When = new Date(matchInfo.When.year, matchInfo.When.month - 1, matchInfo.When.day, hours, minutes );\r\n        //return PostJsonInstance.post(\"Match/GetByTournament\" + authQueryString, JSON.stringify({ tournament: { ...tourn }, userProfile: { ...userprofile } })).then(data => {\r\n        return PostJsonInstance.post(\"Match/GetByTournament\" + authQueryString, JSON.stringify({ tournament: { ...tournamentToSend }, userProfile: { ...userprofile } })).then(data => {\r\n            \r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                \r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    getCurrentMatchesByCity(userProfile) {\r\n        let formData = new FormData();\r\n        formData.append(\"cityumbracoid\", userProfile.CityUmbracoId);\r\n        return PostJsonInstance.post(\"Match/GetByCity\" + authQueryString, formData).then(data => {\r\n            //debugger\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n                \r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n\r\n}\r\n\r\nexport const TournamentAPI = {\r\n    getAllTournamentsInCityByCityUmbracoId(cityUmbracoId) {\r\n        \r\n        let formData = new FormData();\r\n        //formData.append(\"startindex\", startindex);\r\n        formData.append(\"cityumbracoid\", cityUmbracoId);\r\n        return PostJsonInstance.post(\"SimpleTournament/GetAllCurrentInCity\" + authQueryString, formData).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    },\r\n    \r\n    \r\n    getTournamentTablesByTournamentId(tournamentId) {\r\n        \r\n        let formData = new FormData();\r\n        formData.append(\"tournamentId\", tournamentId);\r\n        return PostJsonInstance.post(\"Tables/GetByTournamentId\" + authQueryString, formData).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    }\r\n}\r\n\r\nexport const ServiceAPI = {\r\n    checkConnection() {\r\n        \r\n        return PostJsonInstance.post(\"Service/Connect\" + authQueryString).then(data => {\r\n\r\n            return ((data.data.ErrorMessage == \"\") || (data.data.ErrorMessage == undefined) || (data.data.ErrorMessage == null)) ? okObj(data.data) : errorObj(data.data.ErrorMessage);\r\n        })\r\n            .catch(error => {\r\n\r\n                return errorObj(error)\r\n            })\r\n    },\r\n}","import {ampluaTypes, users} from './constants/commonConstants'\r\nimport { setActiveMenuItem } from \"./mainMenuReducer\";\r\nimport { authQueryString } from './../utils/api/server';\r\nimport { ServiceAPI, errorObj } from './../utils/api/api.js'\r\n\r\nconst ANY_ACTION_TYPE = \"ANY_ACTION_TYPE\";\r\nconst SYSTEM_SET_LOADING = \"SYSTEM_SET_LOADING\";\r\nconst SYSTEM_CHECK_LOADING = \"SYSTEM_CHECK_LOADING\";\r\nconst SYSTEM_SET_CONNECTED = \"SYSTEM_SET_CONNECTED\";\r\nconst SYSTEM_SET_DISCONNECTED = \"SYSTEM_SET_DISCONNECTED\";\r\nconst SYSTEM_PUSH_TO_HISTORY = \"SYSTEM_PUSH_TO_HISTORY\";\r\nconst SYSTEM_SET_CURRENT_MODAL_WINDOW = \"SYSTEM_SET_CURRENT_MODAL_WINDOW\";\r\nconst SYSTEM_POP_FROM_HISTORY = \"SYSTEM_POP_FROM_HISTORY\";\r\nconst SYSTEM_SET_GLOBAL_POPOUT = \"SYSTEM_SET_GLOBAL_POPOUT\";\r\nconst SYSTEM_SET_ERROR_MESSAGE = \"SYSTEM_SET_ERROR_MESSAGE\";\r\nconst SYSTEM_RESET_ERROR = \"SYSTEM_RESET_ERROR\";\r\nconst SYSTEM_SET_SHOW_ADMIN_TOURNEY_TAB = \"SYSTEM_SET_SHOW_ADMIN_TOURNEY_TAB\";\r\n\r\n\r\nconst initState = {\r\n    currentMenu: {},\r\n    Connected: false,\r\n    history: [\"hot\"],\r\n    GlobalPopout: false,\r\n    CurrentModalWindow: null,\r\n    //ErrorObject: {resultcode: 0, result: \"Ok\", data: null, message: \"\"},\r\n    ErrorObject: \"\",\r\n    ShowAdminTourneyTab: false,\r\n    ShowAdminTeamTab: true,\r\n    Loading: true,\r\n    CheckLoading: new Date(),\r\n     // level \r\n\r\n}\r\n\r\n\r\nexport let systemReducer = (state = initState, action) => \r\n{\r\n    \r\n    switch (action.type){\r\n        case ANY_ACTION_TYPE: {\r\n            return state;\r\n        }\r\n        case SYSTEM_PUSH_TO_HISTORY: {\r\n            return {...state,\r\n                history: [...state.history, action.item]\r\n            };\r\n        }\r\n        case SYSTEM_CHECK_LOADING: {\r\n            return {...state,\r\n                CheckLoading: new Date(),\r\n            };\r\n        }\r\n        case SYSTEM_SET_CONNECTED: {\r\n            \r\n            return {...state,\r\n                Connected: true,\r\n            };\r\n        }\r\n        case SYSTEM_SET_DISCONNECTED: {\r\n            \r\n            return {...state,\r\n                Connected: false,\r\n            };\r\n        }\r\n        case SYSTEM_SET_GLOBAL_POPOUT: {\r\n            return {...state,\r\n                GlobalPopout: action.on,\r\n            };\r\n        }\r\n        case SYSTEM_SET_CURRENT_MODAL_WINDOW: {\r\n            return {...state,\r\n                CurrentModalWindow: action.modal,\r\n            };\r\n        }\r\n        case SYSTEM_SET_LOADING: {\r\n            return {...state,\r\n                Loading: action.loading,\r\n                GlobalPopout: action.loading,\r\n            };\r\n        }\r\n        case SYSTEM_SET_ERROR_MESSAGE: {\r\n            \r\n            return {...state,\r\n                ErrorObject: {...action.errorMessage},\r\n                // че-то ошибочки начинают какие-то левые вылезать, если делать все как тут нужно\r\n                // ErrorObject: {...state.ErrorObject,\r\n                //     message: action.errorMessage,\r\n                //     resultcode: -1, \r\n                //     result: \"\",\r\n                // }\r\n            };\r\n        }\r\n        case SYSTEM_RESET_ERROR: {\r\n            \r\n            return {...state,\r\n                ErrorObject: {...initState.ErrorObject},\r\n            };\r\n        }\r\n        case SYSTEM_POP_FROM_HISTORY: {\r\n            \r\n            return {...state,\r\n                history: state.history.length > 1 ? [...state.history.slice(0, state.history.length-1)] : [...state.history]\r\n            };\r\n        }\r\n        case SYSTEM_SET_SHOW_ADMIN_TOURNEY_TAB: {\r\n            \r\n            return {...state,\r\n                ShowAdminTourneyTab: action.showAdminTourneyTab\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const anyActionCreator = (val) => {\r\n    return {\r\n        type: ANY_ACTION_TYPE,\r\n        anyVal: val\r\n    }\r\n}\r\n\r\nexport const setLoading = (loading) => {\r\n    return {\r\n        type: SYSTEM_SET_LOADING,\r\n        loading\r\n    }\r\n}\r\n\r\nexport const updateLoading = () => {\r\n    return {\r\n        type: SYSTEM_CHECK_LOADING\r\n    }\r\n}\r\n\r\nexport const setConnected = () => {\r\n    return {\r\n        type: SYSTEM_SET_CONNECTED\r\n    }\r\n}\r\n\r\nexport const setDisconnected = () => {\r\n    return {\r\n        type: SYSTEM_SET_DISCONNECTED\r\n    }\r\n}\r\n\r\nexport const pushToHistory = (val) => {\r\n    return {\r\n        type: SYSTEM_PUSH_TO_HISTORY,\r\n        item: val\r\n    }\r\n}\r\n\r\nexport const setShowAdminTourneyTab = (val) => {\r\n    return {\r\n        type: SYSTEM_SET_SHOW_ADMIN_TOURNEY_TAB,\r\n        showAdminTourneyTab: val\r\n    }\r\n}\r\n\r\nexport const popFromHistory = (val) => {\r\n    return {\r\n        type: SYSTEM_POP_FROM_HISTORY,\r\n        item: val\r\n    }\r\n}\r\n\r\nexport const setGlobalPopout = (on) => {\r\n    return {\r\n        type: SYSTEM_SET_GLOBAL_POPOUT,\r\n        on\r\n    }\r\n}\r\n\r\nexport const setCurrentModalWindow = (modal) => {\r\n    return {\r\n        type: SYSTEM_SET_CURRENT_MODAL_WINDOW,\r\n        modal\r\n    }\r\n}\r\n\r\nexport const setErrorMessage = (errorMessage) => {\r\n    return {\r\n        type: SYSTEM_SET_ERROR_MESSAGE,\r\n        errorMessage\r\n    }\r\n}\r\n\r\nexport const resetError = () => {\r\n    return {\r\n        type: SYSTEM_RESET_ERROR\r\n    }\r\n}\r\n\r\n// export const setLastFromHistoryMenuItem = (val) => {\r\n//     return {\r\n//         type: POP_FROM_HISTORY,\r\n//         item: val\r\n//     }\r\n// }\r\n\r\nexport const goToPanel = (nextPanel, back) => {\r\n    return (dispatch, getState) => {\r\n        \r\n        if (back){\r\n            let preLast = getState().system.history.length > 1 ? getState().system.history[getState().system.history.length - 2] : (getState().system.history.length == 1 && getState().system.history[0]);\r\n            dispatch(setActiveMenuItem(preLast));\r\n            dispatch(popFromHistory(nextPanel));\r\n        }\r\n        else{\r\n            dispatch(pushToHistory(nextPanel));\r\n            dispatch(setActiveMenuItem(nextPanel));\r\n        }\r\n        \r\n    }\r\n}\r\n\r\n\r\n// проверка связи с сервисом\r\nexport const checkConnection = () => {\r\n    return dispatch => {\r\n        dispatch(setGlobalPopout(true))\r\n        dispatch(resetError())\r\n\r\n        if (authQueryString && authQueryString.length > 0)\r\n        ServiceAPI.checkConnection()\r\n                .then(pl => {\r\n                    \r\n                    if (pl && pl.result == \"Ok\") {\r\n                        dispatch(setConnected());\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        dispatch(setErrorMessage(errorObj(\"Ошибка при соединении с сервисом\")))\r\n                        dispatch(setDisconnected());\r\n                        dispatch(setGlobalPopout(false))\r\n\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            dispatch(setErrorMessage(errorObj(\"Ошибка запуска приложения\")))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport default systemReducer;","import { setGlobalPopout, setErrorMessage } from \"./systemReducer\";\r\nimport { CollectAPI } from './../utils/api/api.js'\r\nimport { Match } from './constants/commonConstants'\r\nimport { EmptyTournament } from './constants/commonConstants'\r\n\r\nimport { authQueryString } from './../utils/api/server';\r\n\r\n\r\nconst COLLECTS_SET_ALL_SIMPLE_COLLECTS = \"COLLECTS_SET_ALL_SIMPLE_COLLECTS\";\r\nconst COLLECTS_SELECT_SIMPLE_COLLECT = \"COLLECTS_SELECT_SIMPLE_COLLECT\";\r\nconst COLLECTS_SET_COLLECT_ITEM_MODE = \"COLLECTS_SET_COLLECT_ITEM_MODE\";\r\nconst COLLECTS_DEL_SIMPLE_COLLECT = \"COLLECTS_DEL_SIMPLE_COLLECT\";\r\nconst COLLECTS_ADD_SIMPLE_COLLECT = \"COLLECTS_ADD_SIMPLE_COLLECT\";\r\nconst COLLECTS_SET_SIMPLE_COLLECT = \"COLLECTS_SET_SIMPLE_COLLECT\";\r\nconst COLLECTS_SET_SELECTED_COLLECT_MEMBERS = \"COLLECTS_SET_SELECTED_COLLECT_MEMBERS\";\r\nconst COLLECTS_DELETE_MEMBER_FROM_SIMPLE_COLLECTS = \"COLLECTS_DELETE_MEMBER_FROM_SIMPLE_COLLECTS\";\r\nconst COLLECTS_ADD_MEMBER_TO_SELECTED_SIMPLE_COLLECT = \"COLLECTS_ADD_MEMBER_TO_SELECTED_SIMPLE_COLLECT\";\r\n\r\nDate.prototype.addDays = function(days) {\r\n    var date = new Date(this.getFullYear(), this.getMonth(), this.getDate(), 0, 0, 0);\r\n    date.setDate(date.getDate() + days);\r\n    return date;\r\n}\r\n\r\nconst currentDate = new Date();\r\n\r\nconst initState = {\r\n    collects: [],\r\n    selected: {},\r\n    mode: \"view\",\r\n}\r\n\r\n\r\nlet collectReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case COLLECTS_SET_ALL_SIMPLE_COLLECTS: {\r\n            return {\r\n                ...state,\r\n                collects: [...action.simplecollects],\r\n            };\r\n        }\r\n        case COLLECTS_SELECT_SIMPLE_COLLECT: {\r\n            return{\r\n                ...state,\r\n                selected: action.simplecollect,\r\n            }\r\n        }\r\n        case COLLECTS_SET_COLLECT_ITEM_MODE: {\r\n            return{\r\n                ...state,\r\n                mode: action.mode,\r\n            }\r\n        }\r\n        case COLLECTS_SET_SELECTED_COLLECT_MEMBERS: {\r\n            return{\r\n                ...state,\r\n                selected: {\r\n                    ...state.selected,\r\n                    Members: [...action.members],\r\n                },\r\n            }\r\n        }\r\n        case COLLECTS_ADD_SIMPLE_COLLECT: {\r\n            \r\n            return{\r\n                ...state,\r\n                collects: [...state.collects, action.collect],\r\n                selected: {...action.collect},\r\n            }\r\n        }\r\n        case COLLECTS_SET_SIMPLE_COLLECT: {\r\n            \r\n            return{\r\n                ...state,\r\n                collects: [...state.collects.map(col => {\r\n                    \r\n                    if (col.Id == action.collect.Id)\r\n                    {\r\n                        col = {...action.collect}\r\n                    }\r\n                    return col\r\n                })],\r\n                selected: {...action.collect},\r\n            }\r\n        }\r\n        case COLLECTS_DEL_SIMPLE_COLLECT: {\r\n            let res = {\r\n                ...state,\r\n                collects: [...state.collects.filter(col => col.Id != action.collect.Id) ],\r\n                selected: {...state.selected,\r\n                    Published: false,\r\n                    Deleted: true,\r\n            }\r\n            }\r\n            return res;\r\n        }\r\n        case COLLECTS_DELETE_MEMBER_FROM_SIMPLE_COLLECTS: {\r\n            \r\n            return{\r\n                ...state,\r\n                collects: [...state.collects.filter(m => m.Id != state.selected.Id),\r\n                    {...state.selected,\r\n                        Members: [...state.selected.Members.filter(m => m.Id != action.member.Id)],\r\n                    }\r\n                ],\r\n                selected: {\r\n                    ...state.selected,\r\n                    Members: [...state.selected.Members.filter(m => m.Id != action.member.Id)],\r\n                },\r\n            }\r\n        }\r\n        case COLLECTS_ADD_MEMBER_TO_SELECTED_SIMPLE_COLLECT: {\r\n            debugger\r\n            return{\r\n                ...state,\r\n                collects: [...state.collects.filter(m => m.Id != state.selected.Id),\r\n                    {...state.selected,\r\n                        Members: [...state.selected.Members, action.member],\r\n                    }\r\n                ],\r\n                selected: {\r\n                    ...state.selected,\r\n                    Members: [...state.selected.Members, action.member],\r\n                },\r\n            }\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\nexport const setAllSimpleCollects = (simplecollects) => {\r\n    return {\r\n        type: COLLECTS_SET_ALL_SIMPLE_COLLECTS,\r\n        simplecollects\r\n    }\r\n}\r\n\r\nexport const deleteMemberFromSimpleCollect = (member) => {\r\n    return {\r\n        type: COLLECTS_DELETE_MEMBER_FROM_SIMPLE_COLLECTS,\r\n        member\r\n    }\r\n}\r\n\r\nexport const addMemberToSelectedSimpleCollect = (member) => {\r\n    return {\r\n        type: COLLECTS_ADD_MEMBER_TO_SELECTED_SIMPLE_COLLECT,\r\n        member\r\n    }\r\n}\r\n\r\nexport const selectSimpleCollect = (simplecollect) => {\r\n    return {\r\n        type: COLLECTS_SELECT_SIMPLE_COLLECT,\r\n        simplecollect\r\n    }\r\n}\r\n\r\nexport const setCollectItemMode = (mode) => {\r\n    return {\r\n        type: COLLECTS_SET_COLLECT_ITEM_MODE,\r\n        mode\r\n    }\r\n}\r\n\r\nexport const delSimpleCollect = (collect) => {\r\n    return {\r\n        type: COLLECTS_DEL_SIMPLE_COLLECT,\r\n        collect\r\n    }\r\n}\r\n\r\nexport const addSimpleCollect = (collect) => {\r\n    return {\r\n        type: COLLECTS_ADD_SIMPLE_COLLECT,\r\n        collect\r\n    }\r\n}\r\n\r\nexport const setSimpleCollect = (collect) => {\r\n    return {\r\n        type: COLLECTS_SET_SIMPLE_COLLECT,\r\n        collect\r\n    }\r\n}\r\n\r\nexport const setSelectedMembers = (members) => {\r\n    return {\r\n        type: COLLECTS_SET_SELECTED_COLLECT_MEMBERS,\r\n        members\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// возвращает актуальные простые сборы города\r\nexport const getAllSimpleCollectsInCityByCityUmbracoId = (cityId = -1, userProfile = null) => {\r\n    return dispatch => {\r\n        if (cityId != -1) \r\n            {\r\n                if (authQueryString && authQueryString.length > 0){\r\n                \r\n                    CollectAPI.getAllSimpleByCityUmbracoId(cityId)\r\n                        .then(pl => {\r\n                            //debugger\r\n                            if (pl && pl.data.length > 0) {\r\n                                dispatch(setAllSimpleCollects(pl.data));\r\n                                dispatch((pl.data));\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                            else {\r\n                                dispatch(setErrorMessage(\"Не получены данные CollectAPI.getAllSimpleByCityUmbracoId\"))\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n\r\n                            dispatch(setErrorMessage(error))\r\n                            dispatch(setGlobalPopout(false))\r\n                        })\r\n                    }\r\n                else {\r\n\r\n                    //dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                    dispatch(setGlobalPopout(false))\r\n\r\n                }\r\n            }\r\n        \r\n    }\r\n}\r\n\r\n// отказ участника сбора\r\nexport const DeleteMemberFromCollect = (userProfileId = -1, collect = null, simpleMember=null, reason = \"\") => {\r\n    return dispatch => {\r\n        if ((userProfileId != -1) && (collect != null) &&  (simpleMember != null))\r\n            {\r\n                if (authQueryString && authQueryString.length > 0)\r\n                {\r\n                        CollectAPI.deleteMemberFromSimpleCollect(userProfileId, collect, simpleMember, reason)\r\n                            .then(pl => {\r\n                                //debugger\r\n                                if (pl && pl.data) {\r\n                                    dispatch(deleteMemberFromSimpleCollect(pl.data));\r\n                                    dispatch((pl.data));\r\n                                    dispatch(setGlobalPopout(false))\r\n                                }\r\n                                else {\r\n                                    dispatch(setErrorMessage(\"Не получены данные CollectAPI.deleteMemberFromSimpleCollect\"))\r\n                                    dispatch(setGlobalPopout(false))\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n\r\n                                dispatch(setErrorMessage(error))\r\n                                dispatch(setGlobalPopout(false))\r\n                            })\r\n                }\r\n                else {\r\n\r\n                    //dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                    dispatch(setGlobalPopout(false))\r\n\r\n                }\r\n            }\r\n        \r\n    }\r\n}\r\n\r\n// добавление сбора\r\nexport const AddSimpleCollect = (userProfileId = -1, collect = null) => {\r\n    return dispatch => {\r\n        if ((userProfileId != -1) && (collect != null))\r\n            {\r\n                if (authQueryString && authQueryString.length > 0)\r\n                {\r\n                        CollectAPI.addSimpleCollect(userProfileId, collect)\r\n                            .then(pl => {\r\n                                //debugger\r\n                                if (pl && pl.data) {\r\n                                    dispatch(addSimpleCollect(pl.data));\r\n                                    dispatch((pl.data));\r\n                                    dispatch(setGlobalPopout(false))\r\n                                }\r\n                                else {\r\n                                    dispatch(setErrorMessage(\"Не получены данные CollectAPI.addSimpleCollect\"))\r\n                                    dispatch(setGlobalPopout(false))\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n\r\n                                dispatch(setErrorMessage(error))\r\n                                dispatch(setGlobalPopout(false))\r\n                            })\r\n                }\r\n                else {\r\n\r\n                    //dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                    dispatch(setGlobalPopout(false))\r\n\r\n                }\r\n            }\r\n        \r\n    }\r\n}\r\n\r\n// изменение сбора\r\nexport const EditSimpleCollect = (userProfileId = -1, collect = null) => {\r\n    return dispatch => {\r\n        if ((userProfileId != -1) && (collect != null))\r\n            {\r\n                if (authQueryString && authQueryString.length > 0)\r\n                {\r\n                        CollectAPI.editSimpleCollect(userProfileId, collect)\r\n                            .then(pl => {\r\n                                \r\n                                if (pl && pl.data) {\r\n                                    \r\n                                    dispatch(setSimpleCollect(pl.data));\r\n                                    dispatch((pl.data));\r\n                                    dispatch(setGlobalPopout(false))\r\n                                }\r\n                                else {\r\n                                    dispatch(setErrorMessage(\"Не получены данные CollectAPI.addSimpleCollect\"))\r\n                                    dispatch(setGlobalPopout(false))\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n\r\n                                dispatch(setErrorMessage(error))\r\n                                dispatch(setGlobalPopout(false))\r\n                            })\r\n                }\r\n                else {\r\n\r\n                    //dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                    dispatch(setGlobalPopout(false))\r\n\r\n                }\r\n            }\r\n        \r\n    }\r\n}\r\n\r\n// отмена сбора\r\nexport const DelSimpleCollect = (userProfileId = -1, collect = null) => {\r\n    return dispatch => {\r\n        if ((userProfileId != -1) && (collect != null))\r\n            {\r\n                if (authQueryString && authQueryString.length > 0)\r\n                {\r\n                        CollectAPI.delSimpleCollect(userProfileId, collect)\r\n                            .then(pl => {\r\n                                //debugger\r\n                                if (pl && pl.data) {\r\n                                    dispatch(delSimpleCollect(pl.data));\r\n                                    dispatch((pl.data));\r\n                                    dispatch(setGlobalPopout(false))\r\n                                }\r\n                                else {\r\n                                    dispatch(setErrorMessage(\"Не получены данные CollectAPI.delSimpleCollect\"))\r\n                                    dispatch(setGlobalPopout(false))\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n\r\n                                dispatch(setErrorMessage(error))\r\n                                dispatch(setGlobalPopout(false))\r\n                            })\r\n                }\r\n                else {\r\n\r\n                    //dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                    dispatch(setGlobalPopout(false))\r\n\r\n                }\r\n            }\r\n        \r\n    }\r\n}\r\n\r\n// регистрация участника на сбор\r\nexport const registerMemberToSimpleCollect = (userProfileId = -1, collect = null) => {\r\n    return dispatch => {\r\n        if ((userProfileId != -1) && (collect != null))\r\n            {\r\n                if (authQueryString && authQueryString.length > 0)\r\n                {\r\n                        CollectAPI.registerSimpleMemberToSimpleCollect(userProfileId, collect)\r\n                            .then(pl => {\r\n                                //debugger\r\n                                if (pl && pl.data) {\r\n\r\n                                    dispatch(addMemberToSelectedSimpleCollect(pl.data));\r\n                                    dispatch((pl.data));\r\n                                    dispatch(setGlobalPopout(false))\r\n                                }\r\n                                else {\r\n                                    dispatch(setErrorMessage(\"Не получены данные CollectAPI.addSimpleCollect\"))\r\n                                    dispatch(setGlobalPopout(false))\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n\r\n                                dispatch(setErrorMessage(error))\r\n                                dispatch(setGlobalPopout(false))\r\n                            })\r\n                }\r\n                else {\r\n\r\n                    //dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                    dispatch(setGlobalPopout(false))\r\n\r\n                }\r\n            }\r\n        \r\n    }\r\n}\r\n\r\n\r\n\r\n    export default collectReducer;","import { setGlobalPopout, setErrorMessage } from \"./systemReducer\";\r\nimport { rents } from './constants/commonConstants'\r\nimport { RentAPI } from './../utils/api/api.js'\r\nimport { authQueryString } from './../utils/api/server';\r\nimport { datesWithoutTimeIsSame } from './../utils/convertors/dateUtils'\r\n\r\nconst demoRents = rents;\r\n\r\nconst RENTS_SET_RENTS = \"RENTS_SET_RENTS\";\r\nconst RENTS_SET_SELECTED_RENT = \"RENTS_SET_SELECTED_RENT\";\r\n\r\n\r\n\r\nconst initState = {\r\n    rents: [],\r\n    selectedRent: {},\r\n    selectedDayRents: [],\r\n}\r\n\r\n\r\nlet rentReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case RENTS_SET_RENTS: {\r\n            return {\r\n                ...state,\r\n                rents: [...action.rents],\r\n            };\r\n        }\r\n        case RENTS_SET_SELECTED_RENT: {\r\n            return {\r\n                ...state,\r\n                selectedDayRents: [...state.rents.filter(r => datesWithoutTimeIsSame(new Date(r.From),action.rentDate) && (r.SimplePlaceId == action.simplePlaceId))],\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const setRents = (rents) => {\r\n    return {\r\n        type: RENTS_SET_RENTS,\r\n        rents\r\n    }\r\n}\r\n\r\nexport const setSelectedRent = (simplePlaceId, rentDate) => {\r\n    return {\r\n        type: RENTS_SET_SELECTED_RENT,\r\n        simplePlaceId,\r\n        rentDate\r\n    }\r\n}\r\n\r\n\r\n// все аренды с сервера по UmbracoId города\r\nexport const getAllRentsInCityByCityId = (cityId, startindex = 0) => {\r\n    return dispatch => {\r\n\r\n        if (authQueryString && authQueryString.length > 0)\r\n            RentAPI.getAllRentsInCityByCityUmbracoId(cityId, startindex)\r\n                .then(pl => {\r\n                    if (pl && pl.data.length > 0) {\r\n                        \r\n                        dispatch(setRents(pl.data));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        dispatch(setRents(demoRents))\r\n                        dispatch(setGlobalPopout(false))\r\n\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            dispatch(setRents(demoRents))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default rentReducer;","import { setGlobalPopout, setErrorMessage, resetError } from \"./systemReducer\";\r\nimport { simplePlaces } from './constants/commonConstants'\r\nimport { SimplePlaceAPI } from './../utils/api/api.js'\r\nimport { authQueryString } from './../utils/api/server';\r\n\r\nconst demoPlaces = simplePlaces;\r\n\r\nconst PLACES_SET_ALL_PLACES = \"PLACES_SET_ALL_PLACES\";\r\nconst PLACES_SET_PLACE_BY_UMBRACO_ID = \"PLACES_SET_PLACE_BY_UMBRACO_ID\";\r\nconst PLACES_SET_SELECTED_PLACE = \"PLACES_SET_SELECTED_PLACE\";\r\n\r\n\r\n\r\nconst initState = {\r\n    places: [],\r\n    selectedPlace: {},\r\n}\r\n\r\n\r\nlet simplePlaceReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case PLACES_SET_ALL_PLACES: {\r\n            return {\r\n                ...state,\r\n                places: [...action.places],\r\n            };\r\n        }\r\n        case PLACES_SET_SELECTED_PLACE: {\r\n            return {\r\n                ...state,\r\n                selectedPlace: state.places.find(x => x.Id == action.placeId),\r\n            };\r\n        }\r\n        case PLACES_SET_PLACE_BY_UMBRACO_ID: {\r\n            return {\r\n                ...state,\r\n                places: [...action.places],\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\nexport const setPlaces = (places) => {\r\n    return {\r\n        type: PLACES_SET_ALL_PLACES,\r\n        places\r\n    }\r\n}\r\n\r\nexport const setSelectedSimplePlace = (placeId) => {\r\n    return {\r\n        type: PLACES_SET_SELECTED_PLACE,\r\n        placeId\r\n    }\r\n}\r\n\r\n\r\nexport const setPlace = (placeId, placeData) => {\r\n    return {\r\n        type: PLACES_SET_PLACE_BY_UMBRACO_ID,\r\n        placeId,\r\n        placeData\r\n    }\r\n}\r\n\r\n\r\n// все места с сервера по UmbracoId города\r\nexport const getAllSimplePlacesInCityByCityId = (cityId, startindex = 0) => {\r\n    return dispatch => {\r\n        dispatch(setGlobalPopout(true))\r\n        dispatch(resetError())\r\n\r\n        if (authQueryString && authQueryString.length > 0)\r\n            SimplePlaceAPI.getAllInCityByCityUmbracoId(cityId, startindex)\r\n                .then(pl => {\r\n                    if (pl && pl.data.length > 0) {\r\n                        \r\n                        dispatch(setPlaces(pl.data));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        dispatch(setPlaces(demoPlaces))\r\n                        dispatch(setGlobalPopout(false))\r\n\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            dispatch(setPlaces(demoPlaces))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default simplePlaceReducer;","import React, { Component } from 'react'\r\nimport { Button } from '@vkontakte/vkui'\r\nimport { withNotify } from '../HOCs/withNotify'\r\n\r\nconst ButtonWithNotify = (props) => {\r\n  //debugger\r\n \r\n    return (\r\n        <Button Accept={null} Close={props.Close} Message={props.Message} {...props}></Button>\r\n        \r\n    )\r\n}\r\n\r\nexport default withNotify(ButtonWithNotify)","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport {pushToHistory, popFromHistory, goToPanel, setCurrentModalWindow} from '../../../../store/systemReducer'\r\nimport ModalCommon from '../../../Modals/ModalCommon/ModalCommon'\r\n\r\n\r\n/*\r\nisBack={false} - флаг возврата на предыдущую панель\r\ntoMenuName=\"viewcollect\"  - куда переход (имя из id в View на главной странице в Epic на главной странице (также должно быть в mainMenuReducer в списке менюшек))\r\nitem = {itm} - объект, передаваемый в параметр handleClick\r\nhandleClick = {selectCollect} - функция, выполняемая по клику\r\n*/\r\n\r\n\r\nexport const withNotify = (WrappedComponent) => {\r\n    \r\n    const mapStateToProps = state => ({\r\n        history: state.system.history,\r\n    })\r\n    \r\n    const mapDispatchToProps = {\r\n        goToPanel, setCurrentModalWindow\r\n    }\r\n\r\n    class hocComponent extends React.Component{\r\n        constructor(props){\r\n            super(props);\r\n            this.clickEvent = this.clickEvent.bind(this);\r\n            this.AcceptAndClose = this.AcceptAndClose.bind(this);\r\n\r\n        }\r\n\r\n        AcceptAndClose(){\r\n            this.props.Yes();\r\n            this.props.setCurrentModalWindow(null);\r\n        }\r\n\r\n        clickEvent(evt){\r\n            // тут выводим окошко с вопросом (уверен?), если да, то делаем действие, переданное в хэндлере\r\n            if (this.props.handleClick != undefined && this.props.item != undefined)\r\n                this.props.handleClick(this.props.item);\r\n            else if (this.props.handleClick != undefined && this.props.item == undefined)\r\n                this.props.handleClick();\r\n                \r\n            this.props.setCurrentModalWindow(<ModalCommon \r\n                modalName=\"AreYouSure\" \r\n                //Message={this.props.Message} \r\n                data={{ message: this.props.Message }}\r\n                Close={() => this.props.setCurrentModalWindow(null)}\r\n                Accept={this.AcceptAndClose}\r\n                ></ModalCommon>);\r\n            //this.props.goToPanel(this.props.toMenuName, this.props.isBack);\r\n        }\r\n\r\n        componentDidUpdate(prevProps, prevState){\r\n            \r\n        }\r\n\r\n\r\n        render(){\r\n            \r\n            return <WrappedComponent onClick={this.clickEvent} {...this.props}></WrappedComponent>\r\n            \r\n        }\r\n    }\r\n\r\n    return connect(mapStateToProps, mapDispatchToProps)(hocComponent)\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport {\r\n    RichCell, Avatar, FormLayout, FormItem, Input, InfoRow, Group, DatePicker, Textarea,\r\n    File, CellButton, Button, Header, List, Cell, Select, CustomSelectOption, IconButton,\r\n    CardGrid, Card, SplitLayout, SplitCol, Div, Radio, RangeSlider, useAdaptivity, VKCOM\r\n} from '@vkontakte/vkui'\r\nimport { defaultPhotoPath } from './../../../../../store/dataTypes/common.js'\r\nimport { Icon24Camera, Icon28AddOutline } from '@vkontakte/icons';\r\nimport { connect } from 'react-redux';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport {\r\n    dateToString, dateTimeToTimeString, datesWithoutTimeIsSame, timeSlotsForSimpleCollects, timeToString,\r\n    dateSelectorValueToJSDateValue, jSDateValueToDateSelectorValue, timeSlotsForCollects, addToTime\r\n} from './../../../../../utils/convertors/dateUtils';\r\nimport {\r\n    DeleteMemberFromCollect, AddSimpleCollect, setCollectItemMode, EditSimpleCollect,\r\n    registerMemberToSimpleCollect, DelSimpleCollect, setSelectedMembers\r\n} from './../../../../../store/collectReducer';\r\nimport { setSelectedRent } from './../../../../../store/rentReducer';\r\nimport { setSelectedSimplePlace } from './../../../../../store/simplePlaceReducer';\r\nimport { Checkbox } from '@vkontakte/vkui/dist/components/Checkbox/Checkbox';\r\nimport { myProfile } from '../../../../../store/constants/commonConstants';\r\nimport ButtonWithNotify from '../../../Common/WithNotify/ButtonWithNotify';\r\n\r\n\r\n// включить защиту от создания сбора на прошедшее время! \r\n\r\n\r\nconst SimpleCollectItem = (props) => {\r\n    let currentDate = new Date();\r\n    let maxCollectDate = new Date();\r\n    let workoutSelector = \"\";\r\n    let totalCost = 0;\r\n    let ranges = \"\";\r\n\r\n    let minutesOneSlot = 30; // количество минут в таймслоте\r\n    let minTimeSlotToRent = 2; // минимальный таймслот для аренды (в таймслотах, а не в минутах меряем)\r\n\r\n    let adapt = useAdaptivity();\r\n    let workoutColNumber = adapt.viewWidth+1; // количество столбцов. должно отличаться на разных разрешениях экрана\r\n    //adapt.viewWidth\r\n\r\n    let [acceptBeMember, setAcceptBeMember] = useState(false)\r\n    let [showPanelBeMember, setShowPanelBeMember] = useState(false)\r\n    let [showCancelMemberForm, setShowCancelMemberForm] = useState(false)\r\n    let [cancelReason, setCancelReason] = useState(\"\")\r\n    let [details, setDetails] = useState(\"\")\r\n    let [collectType, setCollectType] = useState(3)\r\n    let [needMembers, setNeedMembers] = useState(10)\r\n    let [selectedDate, setSelectedDate] = useState(jSDateValueToDateSelectorValue(currentDate))\r\n    let [costMembers, setCostMembers] = useState(200)\r\n    let [costAll, setCostAll] = useState(2000)\r\n    let [plus, setPlus] = useState(costAll - (costMembers * needMembers))\r\n    let [selectedSlots, setSelectedSlots] = useState(new Array()) //  тут отдельные выбранные ячейки\r\n    let selectedTimeRanges = new Array() // тут сгруппированные выбранные ячейки отдельными диапазонами\r\n\r\n\r\n    useEffect(() => {\r\n        if (props.collect.selected && props.collect.selected.Members && props.collect.selected.Members != undefined && props.collect.selected.Members.length > 0) {\r\n\r\n            let vkids = \"\";\r\n            let memberPhotos = props.collect.selected.Members.map(m => {\r\n                vkids += m.UserProfile.UserVkId.slice(2) + \",\"\r\n                return { id: m.UserProfile.UserVkId.slice(2), photo: \"\" }\r\n            });\r\n\r\n            //\r\n            const params = bridge.send(\"VKWebAppGetAuthToken\", { \"app_id\": 7161115, \"scope\": \"\" }).then(res => {\r\n                bridge.send(\"VKWebAppCallAPIMethod\",\r\n                    {\r\n                        \"method\": \"users.get\",\r\n                        \"request_id\": \"userphotorequest\",\r\n                        \"params\": {\r\n                            \"user_ids\": vkids,\r\n                            \"fields\": \"photo_100\",\r\n                            \"v\": \"5.131\",\r\n                            \"access_token\": res.access_token\r\n                        }\r\n                    })\r\n                    .then(us => {\r\n\r\n\r\n\r\n                        let members = props.collect.selected.Members.map(m => {\r\n                            let photo = us.response.filter(p => ((\"id\" + p.id) == m.UserProfile.UserVkId));\r\n                            if (photo && photo[0] != undefined) {\r\n                                m.UserProfile.PhotoPath = photo[0].photo_100;\r\n                            }\r\n                            return m;\r\n\r\n                        })\r\n\r\n                        props.setSelectedMembers(members);\r\n                        //m.UserProfile.PhotoPath = us.photo_100;\r\n                        //props.setSelectedUser(us);\r\n                    })\r\n\r\n                    // bridge.send(\"VKWebAppOpenPayForm\", {\r\n                    //     \"app_id\": 7161115, \r\n                    //     \"action\": \"pay-to-service\", \r\n                    //     \"params\": {\r\n                    //         \"amount\": 1.5,\r\n                    //         \"data\": {\r\n                    //                 \"currency\": \"RUB\",\r\n                    //                 \"merchant_data\": \"eyJvcmRlcl9pZCI6IjI1NTMxIiwidHMiOiIxNTM5MzI5NzcwIiwiYW1vdW50IjoxLjUsImN1cnJlbmN5IjoiUlVCIn0=\",\r\n                    //                 \"merchant_sign\": \"63d5dce9d2c9d29198ba12ba3f8e270e6606a221\",\r\n                    //                 \"order_id\": \"25531\",\r\n                    //                 \"ts\": \"1539329770\"\r\n                    //                 },\r\n                    //         \"description\": \"Test Payment\",\r\n                    //         \"action\": \"pay-to-service\",\r\n                    //         \"merchant_id\": 617001,\r\n                    //                 \"version\": 2,\r\n                    //         \"sign\": res.access_token\r\n                    //     }\r\n                    // });\r\n            })\r\n\r\n            \r\n        }\r\n\r\n    }, props.collect.selected.Id)\r\n\r\n    //debugger\r\n    let youAreMember = (props.collect.selected.Members && props.collect.selected.Members.length > 0)\r\n        ?\r\n        (props.collect.selected.Members.filter(m => m.UserProfileId == props.myProfile.UserProfileId).length > 0 ? true : false)\r\n        :\r\n        false;\r\n    let youAreOrganizer = (props.collect.selected && props.collect.selected != undefined && props.myProfile && props.myProfile != undefined) ?\r\n        props.collect.selected.CreatorId == props.myProfile.UserProfileId :\r\n        false;\r\n\r\n    //let [youAreMember, setYouAreMember] = useState(yam);\r\n\r\n    let simplePlaces = props.simplePlace.places;\r\n\r\n    let changePlace = (e) => {\r\n        props.setSelectedSimplePlace(+e.currentTarget.value);\r\n        props.setSelectedRent(+e.currentTarget.value, dateSelectorValueToJSDateValue(selectedDate));\r\n        setSelectedSlots([])\r\n    }\r\n\r\n    let changeDate = (value) => {\r\n        setSelectedDate(value);\r\n        setSelectedSlots([])\r\n\r\n    }\r\n\r\n    let changeCollectType = (type) => {\r\n        setCollectType(type)\r\n    }\r\n\r\n    let selectSlot = (value) => {\r\n        // взять минимальное количество слотов и сделать проверку на послеющие ячейки\r\n        // и это же самое нужно сделать на сервере! чтобы исключить двойную аренду\r\n        // проверить следующий слот (не конец смены, следующий не арендован, не перерыв)\r\n        let tmpSelectedSlot = [];\r\n\r\n        // выявили выбранное время\r\n        let res = selectedSlots.filter(ss => (ss.Hours == value.Hours && ss.Minutes == value.Minutes));\r\n        if (res.length != 0)\r\n            tmpSelectedSlot = selectedSlots.filter(ss => (ss.Hours != value.Hours || ss.Minutes != value.Minutes));\r\n        else\r\n            tmpSelectedSlot = [...selectedSlots, value];\r\n\r\n        // сортировка\r\n        tmpSelectedSlot.sort((a, b) => {\r\n            let i1 = a.Hours * (60 / minutesOneSlot * minutesOneSlot) + a.Minutes;\r\n            let i2 = b.Hours * (60 / minutesOneSlot * minutesOneSlot) + b.Minutes;\r\n\r\n            return (i1 - i2)\r\n        })\r\n\r\n\r\n\r\n        setSelectedSlots(tmpSelectedSlot);\r\n    }\r\n\r\n    let gotoCollect = (value) => {\r\n\r\n\r\n    }\r\n\r\n    let gotoProfile = (profileId) => {\r\n        window.open(\"https://vk.com/\" + profileId, '_blank');\r\n    }\r\n\r\n\r\n    const CancelMember = () => {\r\n        let member = {\r\n            UserProfileId: props.myProfile.UserProfileId,\r\n            SimpleCollectId: props.collect.selected.Id,\r\n        }\r\n        props.DeleteMemberFromCollect(props.myProfile.UserProfileId, props.collect.selected, member, cancelReason);\r\n        setAcceptBeMember(false);\r\n        setShowPanelBeMember(false);\r\n        setShowCancelMemberForm(false);\r\n        setCancelReason(\"\");\r\n        youAreMember = false;\r\n        //setYouAreMember(false);\r\n    }\r\n\r\n    const deleteMember = (memberUserProfile) => {\r\n        \r\n        let member = {\r\n            UserProfileId: memberUserProfile.UserProfileId,\r\n            SimpleCollectId: props.collect.selected.Id,\r\n        }\r\n        props.DeleteMemberFromCollect(props.myProfile.UserProfileId, props.collect.selected, member, cancelReason);\r\n        setAcceptBeMember(false);\r\n        setShowPanelBeMember(false);\r\n        setShowCancelMemberForm(false);\r\n        setCancelReason(\"Удален организатором\");\r\n        youAreMember = false;\r\n        //setYouAreMember(false);\r\n    }\r\n\r\n    const AcceptRights = () => {\r\n        setAcceptBeMember(!acceptBeMember);\r\n    }\r\n\r\n    const calculateCostAll = (costall) => {\r\n        setCostAll(costall);\r\n        let costMem = Math.round(costall / needMembers);\r\n        setCostMembers(costMem);\r\n\r\n        setPlus((costMem * needMembers) - costall);\r\n    }\r\n\r\n    const calculateNeedMembers = (need) => {\r\n\r\n        \r\n            setNeedMembers(need);\r\n            setCostMembers(Math.round(costAll / need));\r\n            setPlus((Math.round(costAll / need) * need) - costAll);\r\n        \r\n    }\r\n\r\n    const calculateCostMembers = (membercost) => {\r\n        setCostMembers(membercost);\r\n        setPlus((membercost * needMembers) - costAll);\r\n    }\r\n\r\n    const registerToCollect = () => {\r\n\r\n        props.registerMemberToSimpleCollect(props.myProfile.UserProfileId, props.collect.selected);\r\n    }\r\n\r\n    const createCollect = () => {\r\n\r\n        let collect = {\r\n            Name: props.selectedPlace.Name,\r\n            // +\"_\"+selectedDate.year.toString()+\".\"+selectedDate.month.toString()+\".\"+selectedDate.day.toString()+\"_\"+props.myProfile.UserProfileId+\"_\"+ new Date().getMinutes().toString()+\"-\"+ new Date().getSeconds().toString(),\r\n            When: new Date(\r\n                selectedDate.year,\r\n                selectedDate.month - 1,\r\n                selectedDate.day,\r\n                selectedTimeRanges[0].Hours + 3, // прибавил 3 часа (разница от UTC)\r\n                selectedTimeRanges[0].Minutes),\r\n            DurationMinutes: selectedTimeRanges[0].SlotMinutes,\r\n            Details: details,\r\n            FullPrice: costAll,\r\n            Comment: \"\",\r\n            Cost: costMembers /*selectedTimeRanges[0].PricePerSlot*/,\r\n            NeedMembers: +needMembers,\r\n            SimplePlaceId: props.selectedPlace.Id,\r\n            CreatorId: props.myProfile.UserProfileId,\r\n        }\r\n        props.AddSimpleCollect(props.myProfile.UserProfileId, collect)\r\n        props.setCollectItemMode(\"view\");\r\n    }\r\n\r\n    const saveChanges = () => {\r\n\r\n        let collect = {\r\n            Id: props.collect.selected.Id,\r\n            Name: props.selectedPlace.Name,\r\n            // +\"_\"+selectedDate.year.toString()+\".\"+selectedDate.month.toString()+\".\"+selectedDate.day.toString()+\"_\"+props.myProfile.UserProfileId+\"_\"+ new Date().getMinutes().toString()+\"-\"+ new Date().getSeconds().toString(),\r\n            When: props.collect.selected.When,\r\n            DurationMinutes: props.collect.selected.DurationMinutes,\r\n            Details: details,\r\n            FullPrice: props.collect.selected.FullPrice,\r\n            Comment: props.collect.selected.Comment,\r\n            Cost: costMembers /*selectedTimeRanges[0].PricePerSlot*/,\r\n            NeedMembers: +needMembers,\r\n            SimplePlaceId: props.collect.selected.SimplePlaceId,\r\n            CreatorId: props.collect.selected.CreatorId,\r\n        }\r\n        props.EditSimpleCollect(props.myProfile.UserProfileId, collect)\r\n        props.setCollectItemMode(\"view\");\r\n    }\r\n\r\n    const cancelCollect = () => {\r\n        props.DelSimpleCollect(props.myProfile.UserProfileId, props.collect.selected);\r\n    }\r\n\r\n    const changeCollect = () => {\r\n\r\n        setDetails(props.collect.selected.Details);\r\n        setCostAll(props.collect.selected.FullPrice);\r\n        setNeedMembers(props.collect.selected.NeedMembers);\r\n        setCostMembers(props.collect.selected.Cost);\r\n\r\n        setPlus((props.collect.selected.Cost * props.collect.selected.NeedMembers) - props.collect.selected.FullPrice);\r\n\r\n        props.setCollectItemMode(\"edit\");\r\n    }\r\n\r\n    const cancelSave = () => {\r\n\r\n        setDetails(props.collect.selected.Details ? props.collect.selected.Details : \"\");\r\n        setCostAll(props.collect.selected.FullPrice);\r\n        setNeedMembers(props.collect.selected.NeedMembers);\r\n        setCostMembers(props.collect.selected.Cost);\r\n\r\n        setPlus((props.collect.selected.Cost * props.collect.selected.NeedMembers) - props.collect.selected.FullPrice);\r\n\r\n        props.setCollectItemMode(\"view\");\r\n    }\r\n\r\n    // строим контрол выбора времени\r\n    // если место и время выборано\r\n    if ((props.selectedPlace) && (props.selectedPlace.Worktime != null) && (props.selectedPlace.Worktime != undefined)) {\r\n        //debugger\r\n        // собираем все слоты из расписания, которые совпадают с выбранной датой\r\n        let worktimeSlots = props.selectedPlace.Worktime.filter(wt => {\r\n            //selectedDate, wt, rents\r\n            let selectedDT = new Date(dateSelectorValueToJSDateValue(selectedDate)) // selected in box\r\n            let from = new Date(wt.FromTime) // current item date and start time\r\n            let to = new Date(wt.ToTime) // current item date and end time\r\n            if (datesWithoutTimeIsSame(from, selectedDT))\r\n                return true;\r\n            else\r\n                return false;\r\n        }).sort((a, b) => new Date(a.FromTime).valueOf() - new Date(b.FromTime).valueOf())\r\n\r\n        // если выборка дала данные (слоты)\r\n        if (worktimeSlots && worktimeSlots != undefined && worktimeSlots.length > 0 && worktimeSlots[0] != undefined) {\r\n            // если верменной слот найден, производим с ним модификации по формированию и покраске кнопок, а также назначения им действий\r\n\r\n            let fromTmp = new Date(worktimeSlots[0].FromTime); // берем время ОТ первого слота\r\n            let toTmp = new Date(worktimeSlots[worktimeSlots.length - 1].ToTime);  // берем время ДО последнего слота\r\n            let slotsNumber = (toTmp.valueOf() - fromTmp.valueOf()) / (minutesOneSlot * 60 * 1000); // общее количество слотов\r\n            let numberOfCols = slotsNumber < workoutColNumber ? slotsNumber : workoutColNumber; // количество колонок\r\n            let numberOfRows = Math.trunc(slotsNumber / numberOfCols) == slotsNumber / numberOfCols ? slotsNumber / numberOfCols : Math.trunc(slotsNumber / numberOfCols) + 1; // количество строк\r\n\r\n            let slots = timeSlotsForSimpleCollects(slotsNumber, 60 / minutesOneSlot, fromTmp.getHours()); // получили общее время работы с разбивкой по диапазонам (обычно по 30 минут на каждую ячейку)\r\n\r\n            // бежим по массиву слотов расписаний\r\n            slots = slots.map((slot, slotCurrentIndex) => {\r\n\r\n                \r\n                worktimeSlots.forEach(worktimeSlot => {\r\n                    \r\n                    let curentWorktimeSlotFromTime = new Date(worktimeSlot.FromTime);\r\n                    let curentWorktimeSlotToTime = new Date(worktimeSlot.ToTime);\r\n                    let currentSlotTime = new Date(\r\n                        curentWorktimeSlotFromTime.getFullYear(), \r\n                        curentWorktimeSlotFromTime.getMonth(), \r\n                        curentWorktimeSlotFromTime.getDate(), \r\n                        slot.Hours, slot.Minutes);\r\n\r\n\r\n                    if ((worktimeSlot != null) \r\n                        && (worktimeSlot != undefined) \r\n                        && (curentWorktimeSlotFromTime <= currentSlotTime && curentWorktimeSlotToTime > currentSlotTime)\r\n                        ) {\r\n                        // расставляем перерывы. \r\n                        // пробегаем по массиву перерывов, сверяя время с текущим слотом. если совпало, значит маркируем в слот-массиве этот слот как недоступный\r\n                        if (worktimeSlot.Breaks && worktimeSlot.Breaks.length > 0) {\r\n                            worktimeSlot.Breaks.forEach(brek => {\r\n\r\n                                let from = new Date(brek.FromTime);\r\n                                let to = new Date(brek.ToTime);\r\n\r\n                                let brekTime = new Date(from.getFullYear(), from.getMonth(), from.getDate(), slot.Hours, slot.Minutes);\r\n\r\n                                if (from <= brekTime && (to > brekTime)) {\r\n                                    slot.Enabled = false;\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                        // расставляем аренды\r\n                        // пробегаем по массиву арендованного времени, сверяя время с текущим слотом. если совпало, значит маркируем в слот-массиве этот слот как занятый\r\n                        props.rent.selectedDayRents.forEach(rnt => {\r\n\r\n                            let from = new Date(rnt.From);\r\n                            let to = addToTime(from, 0, rnt.DurationMinutes);\r\n\r\n                            let rentTime = new Date(from.getFullYear(), from.getMonth(), from.getDate(), slot.Hours, slot.Minutes);\r\n                            \r\n\r\n                            if (from <= rentTime && (to > rentTime)) {\r\n\r\n                                if (rnt.Published)\r\n                                    slot.Rented = true;\r\n                            }\r\n                        });\r\n\r\n                        // расставляем выбранные слоты\r\n                        if (selectedSlots && Array.isArray(selectedSlots) && selectedSlots.length > 0) {\r\n\r\n                            selectedSlots.forEach(slt => {\r\n\r\n                                let from = new Date(`01/01/2000 ${slt.Hours}:${slt.Minutes}`);\r\n                                let to = addToTime(from, 0, minutesOneSlot);\r\n\r\n                                let selectedTime = new Date(from.getFullYear(), from.getMonth(), from.getDate(), slot.Hours, slot.Minutes);\r\n\r\n                                if (from <= selectedTime && (to > selectedTime)) {\r\n\r\n                                    slt.PricePerSlot = worktimeSlot.CostPerHour / (60 / minutesOneSlot);\r\n                                    slot.PricePerSlot = worktimeSlot.CostPerHour / (60 / minutesOneSlot);\r\n                                    slot.Selected = true;\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    else {\r\n                        workoutSelector = <InfoRow>Расписания нет</InfoRow>\r\n                    }\r\n                });\r\n\r\n                return slot;\r\n            }\r\n            )\r\n\r\n\r\n            // маркируем доступное и недоступное время и создаем результирующий массив кнопок\r\n            let iButtons = slots.map(x => {\r\n                if (x.Enabled) {\r\n                    if (x.Rented) {\r\n                        return <Div>\r\n                            <Button onClick={() => gotoCollect(x)} mode=\"destructive\">{`${x.Hours <= 9 ? \"0\" + x.Hours.toString() : x.Hours.toString()}:${x.Minutes <= 9 ? \"0\" + x.Minutes.toString() : x.Minutes.toString()}`}</Button>\r\n                        </Div>\r\n                    }\r\n                    else {\r\n                        if (x.Selected) {\r\n                            return <Div>\r\n                                <Button onClick={() => selectSlot(x)} mode=\"primary\">{`${x.Hours <= 9 ? \"0\" + x.Hours.toString() : x.Hours.toString()}:${x.Minutes <= 9 ? \"0\" + x.Minutes.toString() : x.Minutes.toString()}`}</Button>\r\n                            </Div>\r\n                        }\r\n                        else {\r\n                            return <Div>\r\n                                <Button onClick={() => selectSlot(x)} mode=\"commerce\">{`${x.Hours <= 9 ? \"0\" + x.Hours.toString() : x.Hours.toString()}:${x.Minutes <= 9 ? \"0\" + x.Minutes.toString() : x.Minutes.toString()}`}</Button>\r\n                            </Div>\r\n                        }\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    if (x.Rented) {\r\n                        return <Div>\r\n                            <Button mode=\"destructive\">{`${x.Hours <= 9 ? \"0\" + x.Hours.toString() : x.Hours.toString()}:${x.Minutes <= 9 ? \"0\" + x.Minutes.toString() : x.Minutes.toString()}`}</Button>\r\n                        </Div>\r\n                    }\r\n                    else {\r\n                        return <Div>\r\n                            <Button mode=\"secondary\">{`${x.Hours <= 9 ? \"0\" + x.Hours.toString() : x.Hours.toString()}:${x.Minutes <= 9 ? \"0\" + x.Minutes.toString() : x.Minutes.toString()}`}</Button>\r\n                        </Div>\r\n                    }\r\n                }\r\n            })\r\n\r\n            //selectedTimeRanges = new Array()\r\n            // вычисляем выбранные временные промежутки и выводим их в список\r\n            for (let i = 0; i < selectedSlots.length; i++) {\r\n                if (selectedSlots[i - 1] != null && selectedSlots[i - 1] != undefined) {\r\n\r\n                    let i1 = selectedSlots[i].Hours * (60 / minutesOneSlot * minutesOneSlot) + selectedSlots[i].Minutes;\r\n                    let i2 = selectedSlots[i - 1].Hours * (60 / minutesOneSlot * minutesOneSlot) + selectedSlots[i - 1].Minutes;\r\n\r\n                    if ((i1 - i2) <= minutesOneSlot) {\r\n                        selectedTimeRanges[selectedTimeRanges.length - 1].SlotMinutes += selectedSlots[i].SlotMinutes;\r\n                        selectedTimeRanges[selectedTimeRanges.length - 1].PricePerSlot += selectedSlots[i].PricePerSlot;\r\n                    }\r\n                    else {\r\n                        selectedTimeRanges.push(\r\n                            {\r\n                                Hours: selectedSlots[i].Hours,\r\n                                Minutes: selectedSlots[i].Minutes,\r\n                                SlotMinutes: selectedSlots[i].SlotMinutes,\r\n                                Enabled: selectedSlots[i].Enabled,\r\n                                Selected: selectedSlots[i].Selected,\r\n                                Rented: selectedSlots[i].Rented,\r\n                                PricePerSlot: selectedSlots[i].PricePerSlot,\r\n                            }\r\n                        )\r\n                    }\r\n                }\r\n                else {\r\n\r\n                    selectedTimeRanges.push(\r\n                        {\r\n                            Hours: selectedSlots[i].Hours,\r\n                            Minutes: selectedSlots[i].Minutes,\r\n                            SlotMinutes: selectedSlots[i].SlotMinutes,\r\n                            Enabled: selectedSlots[i].Enabled,\r\n                            Selected: selectedSlots[i].Selected,\r\n                            Rented: selectedSlots[i].Rented,\r\n                            PricePerSlot: selectedSlots[i].PricePerSlot,\r\n                        }\r\n                    )\r\n                }\r\n\r\n            }\r\n\r\n\r\n            // если изменилась цена, перезапишем ее в состоянии\r\n            totalCost = selectedTimeRanges.reduce((acc, cur) => acc += cur.PricePerSlot, 0);\r\n            if (totalCost != costAll)\r\n                calculateCostAll(selectedTimeRanges.reduce((acc, cur) => acc += cur.PricePerSlot, 0))\r\n\r\n            let splitCols = []\r\n\r\n            // разбиваем кнопки по колонкам для наиболее удобного отображения \r\n            for (let i = 0; i < numberOfCols; i++)//4\r\n            {\r\n                let sCol = []\r\n                for (let j = 0; j < numberOfRows; j++)//5\r\n                {\r\n                    sCol.push(iButtons[i * numberOfRows + j])\r\n                }\r\n                splitCols.push(<SplitCol width=\"25%\">{sCol}</SplitCol>)\r\n            }\r\n\r\n            ranges = (selectedTimeRanges && selectedTimeRanges.length > 0) ? selectedTimeRanges.map(tr => {\r\n                let until = addToTime(new Date(`01/01/2000 ${tr.Hours}:${tr.Minutes}`), 0, tr.SlotMinutes);\r\n                return <InfoRow>с {timeToString(tr.Hours, tr.Minutes)} до {timeToString(until.getHours(), until.getMinutes())}  ({tr.PricePerSlot} руб.) </InfoRow>\r\n\r\n\r\n            }) :\r\n                \"Время не выбрано\"\r\n\r\n\r\n            // записываем полученную иерархию контролов в единый селектор\r\n            workoutSelector =\r\n                <SplitLayout>\r\n                    {splitCols}\r\n                </SplitLayout>\r\n\r\n        }\r\n\r\n\r\n    }\r\n    else\r\n        workoutSelector = <InfoRow>Расписания нет</InfoRow>\r\n\r\n\r\n\r\n\r\n\r\n\r\n    switch (props.collect.mode) {\r\n        case \"view\": {\r\n            if (props.collect.selected.Deleted != undefined && props.collect.selected.Deleted == true) {\r\n                return (\r\n                    <>\r\n                        <FormItem>\r\n                            <InfoRow><strong>Этот сбор был отменен</strong></InfoRow>\r\n                        </FormItem>\r\n                        <FormItem top=\"Дата и время\">\r\n                            <InfoRow>{props.collect.selected.When && props.collect.selected.When != undefined ? dateToString(props.collect.selected.When) + \" в \" : \" \"}\r\n                                {props.collect.selected.When && props.collect.selected.When != undefined ? dateTimeToTimeString(props.collect.selected.When) : \" \"}</InfoRow>\r\n                        </FormItem>\r\n                        <FormItem top=\"Место\">\r\n                            <RichCell caption={props.collect.selected.Place && props.collect.selected.Place.Address != undefined ? props.collect.selected.Place.Address : \"\"}>\r\n                                {props.collect.selected.Place && props.collect.selected.Place.Name != undefined ? props.collect.selected.Place.Name : \"\"}</RichCell>\r\n                        </FormItem>\r\n                        <FormItem top=\"Информация\" disabled>\r\n                            <InfoRow>{props.collect.selected.Details}</InfoRow>\r\n                        </FormItem>\r\n                    </>\r\n                )\r\n            }\r\n            else {\r\n                return (\r\n                    <>\r\n                        {props.collect.selected && props.collect.selected != undefined ?\r\n                            <>\r\n\r\n                                <FormItem top=\"Ваш город\">\r\n                                    <InfoRow>{(props.myProfile && props.myProfile.CityUmbracoName) ? props.myProfile.CityUmbracoName : \"\"}</InfoRow>\r\n                                </FormItem>\r\n                                <FormItem top=\"Дата и время\">\r\n                                    <InfoRow>{props.collect.selected.When && props.collect.selected.When != undefined ? dateToString(props.collect.selected.When) + \" в \" : \" \"}\r\n                                        {props.collect.selected.When && props.collect.selected.When != undefined ? dateTimeToTimeString(props.collect.selected.When) : \" \"}</InfoRow>\r\n                                </FormItem>\r\n                                <FormItem top=\"Место\">\r\n                                    <RichCell caption={props.collect.selected.Place && props.collect.selected.Place.Address != undefined ? props.collect.selected.Place.Address : \"\"}>\r\n                                        {props.collect.selected.Place && props.collect.selected.Place.Name != undefined ? props.collect.selected.Place.Name : \"\"}</RichCell>\r\n                                </FormItem>\r\n                                <FormItem top=\"Информация\">\r\n                                    <InfoRow>{props.collect.selected.Details}</InfoRow>\r\n                                </FormItem>\r\n                                <FormItem top=\"Сколько человек нужно\">\r\n                                    <InfoRow>{props.collect.selected.NeedMembers}\r\n                                        {(props.collect.selected.Members && props.collect.selected.Members.length > 0) &&\r\n                                            ` (нужно еще ${props.collect.selected.NeedMembers - props.collect.selected.Members.length} чел.)`\r\n                                        }\r\n                                    </InfoRow>\r\n\r\n                                </FormItem>\r\n                                <FormItem top=\"Стоимость на 1 человека\">\r\n                                    <InfoRow>{props.collect.selected.Cost}</InfoRow>\r\n                                </FormItem>\r\n                                <Group header={<Header mode=\"secondary\">Участники</Header>}>\r\n                                    {(props.collect.selected.Members && props.collect.selected.Members.length > 0) ?\r\n                                        <FormItem>\r\n                                            <List>\r\n                                                {props.collect.selected.Members.map((item) => {\r\n\r\n                                                    return <RichCell\r\n                                                    text={`${item.UserProfile.Name} ${item.UserProfile.Surname} ${item.UserProfileId == props.collect.selected.Creator.UserProfileId ? \" (Организатор)\" : \"\"}`}\r\n                                                        before={item.UserProfile.PhotoPath && item.UserProfile.PhotoPath != undefined ?\r\n                                                            <Avatar size={72} src={item.UserProfile.PhotoPath} />\r\n                                                            :\r\n                                                            null\r\n                                                        }\r\n                                                        actions={\r\n                                                        props.myProfile.UserProfileId == props.collect.selected.Creator.UserProfileId ? \r\n                                                            <Group>\r\n                                                                {item.UserProfile.UserProfileId != props.collect.selected.Creator.UserProfileId && \r\n                                                                    <ButtonWithNotify mode=\"destructive\" Message={`Уверены, что хотите исключить ${item.UserProfile.Name} ${item.UserProfile.Surname}?`} Yes={() => deleteMember(item.UserProfile)}>Исключить</ButtonWithNotify>}\r\n                                                                {item.UserProfile.UserProfileId != props.myProfile.UserProfileId && \r\n                                                                    <Button onClick={() => gotoProfile(item.UserProfile.UserVkId)}>Профиль ВК</Button>}\r\n                                                            </Group>\r\n                                                            :\r\n                                                            <>\r\n                                                                {item.UserProfile.UserProfileId != props.myProfile.UserProfileId && \r\n                                                                    <Button onClick={() => gotoProfile(item.UserProfile.UserVkId)}>Профиль ВК</Button>}\r\n                                                            </>\r\n\r\n                                                    }\r\n                                                    >\r\n                                                    </RichCell>\r\n                                                }\r\n\r\n                                                )\r\n\r\n                                                }\r\n                                            </List>\r\n                                        </FormItem>\r\n                                        :\r\n                                        <FormItem>\r\n                                            <InfoRow>Пока нет участников. Стань первым.</InfoRow>\r\n                                        </FormItem>\r\n                                    }\r\n                                </Group>\r\n                                {\r\n                                    (!youAreMember) ?\r\n                                        (\r\n                                            (new Date(props.collect.selected.When) > new Date()) ?\r\n                                                (\r\n                                                    (props.collect.selected.Members.length < props.collect.selected.NeedMembers) ?\r\n                                                    ((!showPanelBeMember) ?\r\n                                                        <FormItem top=\"Участие\">\r\n                                                            <CellButton onClick={() => setShowPanelBeMember(!showPanelBeMember)}>Стать участником</CellButton>\r\n                                                        </FormItem>\r\n                                                        :\r\n                                                        <FormItem top=\"Стать участником\">\r\n                                                            {(acceptBeMember) &&\r\n                                                                <CellButton onClick={registerToCollect}>Зарегистрироваться на сбор</CellButton>\r\n                                                            }\r\n                                                            <Checkbox checked={acceptBeMember} onChange={AcceptRights}>\r\n                                                                {`Подтверждаю, что готов прибыть на сбор в ${props.collect.selected.Place.Name} в \r\n                                    ${dateToString(props.collect.selected.When)} к ${dateTimeToTimeString(props.collect.selected.When)}\r\n                                    и оплатить взнос в размере ${props.collect.selected.Cost} рублей`}\r\n                                                            </Checkbox>\r\n                                                        </FormItem>)\r\n                                                        :\r\n                                                        <FormItem top=\"Участие\">\r\n                                                            <InfoRow>Регистрация закончена. Народ набран.</InfoRow>\r\n                                                        </FormItem>\r\n                                                )\r\n                                                :\r\n                                                <FormItem top=\"Участие\">\r\n                                                    <InfoRow>Регистрация закончена</InfoRow>\r\n                                                </FormItem>\r\n                                        )\r\n                                        :\r\n                                        <FormItem top=\"Участие\">\r\n                                            {(new Date(props.collect.selected.When) > new Date()) ?\r\n                                                <>\r\n                                                    <InfoRow>{(!youAreOrganizer) ? `Вы подтвердили участие в сборе` : `Вы организатор сбора`}</InfoRow>\r\n                                                    {(!showCancelMemberForm) ?\r\n                                                        ((!youAreOrganizer) ?\r\n                                                            <RichCell actions={<ButtonWithNotify mode=\"destructive\" Message=\"Отказаться от участия?\" Yes={() => setShowCancelMemberForm(true)}>Отказаться от участия</ButtonWithNotify>}></RichCell> :\r\n                                                            <RichCell actions={\r\n                                                                <>\r\n                                                                    <Button mode=\"primary\"\r\n                                                                        onClick={changeCollect}\r\n                                                                    >Изменить сбор</Button>\r\n                                                                    <ButtonWithNotify mode=\"destructive\"\r\n                                                                        Message=\"Желаете отменить сбор?\"\r\n                                                                        Yes={cancelCollect}\r\n                                                                    >Отменить сбор</ButtonWithNotify>\r\n                                                                </>\r\n                                                            }></RichCell>\r\n\r\n                                                        )\r\n                                                        :\r\n                                                        <Group>\r\n                                                            <FormItem>\r\n                                                                <b>Вы хотите отказаться от участия? Укажите причину отказа</b>\r\n                                                            </FormItem>\r\n                                                            <FormItem>\r\n                                                                <Input type=\"text\" value={cancelReason} onChange={(e) => setCancelReason(e.currentTarget.value)} defaultValue=\"\" />\r\n                                                            </FormItem>\r\n                                                            <FormItem>\r\n                                                                <Button onClick={() => setShowCancelMemberForm(false)}>Не отказываться</Button>\r\n                                                                {cancelReason.length > 4 && <Button onClick={CancelMember} mode=\"destructive\">Отказаться</Button>}\r\n                                                            </FormItem>\r\n                                                        </Group>\r\n                                                    }\r\n                                                </>\r\n                                                :\r\n                                                <InfoRow>Вы участвовали в сборе</InfoRow>\r\n                                            }\r\n                                        </FormItem>\r\n                                }\r\n\r\n                            </>\r\n                            :\r\n                            <></>\r\n                        }\r\n                    </>\r\n                )\r\n            }\r\n        }; break;\r\n        case \"add\": {\r\n            return (\r\n                <>\r\n                    <FormItem top=\"Ваш город\">\r\n                        <InfoRow>{(props.myProfile && props.myProfile.CityUmbracoName) ? props.myProfile.CityUmbracoName : \"\"}</InfoRow>\r\n                    </FormItem>\r\n                    <FormItem top=\"Место\">\r\n                        <Select\r\n                            placeholder=\"Не выбрано\"\r\n                            value={(props.selectedPlace && props.selectedPlace.Id) ? props.selectedPlace.Id : null}\r\n                            onChange={e => changePlace(e)}\r\n                            options={simplePlaces.map(place => ({\r\n                                label: place.Name, value: place.Id\r\n                                // , avatar: user.photo_100 \r\n                            }))}\r\n                            renderOption={({ option, ...restProps }) => (\r\n                                <CustomSelectOption {...restProps}\r\n                                //   before={<Avatar size={24} src={option.avatar} />} \r\n                                />\r\n                            )}\r\n                        />\r\n                        {/* <RichCell caption={props.collect.selected.Place.Address}>{props.collect.selected.Place.Name}</RichCell> */}\r\n                    </FormItem>\r\n                    <FormItem top=\"Дата\">\r\n                        <DatePicker\r\n                            min={jSDateValueToDateSelectorValue(currentDate)}\r\n                            max={{ day: currentDate.getDate(), month: currentDate.getMonth() + 2, year: currentDate.getFullYear() }}\r\n                            defaultValue={selectedDate}\r\n                            onDateChange={(value) => { changeDate(value) }}\r\n                        />\r\n                        {/* <InfoRow>{dateToString(props.collect.selected.When)} в {dateTimeToTimeString(props.collect.selected.When)}</InfoRow> */}\r\n                    </FormItem>\r\n                    <FormItem>\r\n                        {workoutSelector}\r\n\r\n                    </FormItem>\r\n                    <FormItem top=\"Выранное время\">\r\n                        {ranges}\r\n                    </FormItem>\r\n                    {selectedTimeRanges && selectedTimeRanges.length > 0 ?\r\n                        <Group>\r\n\r\n\r\n                            <FormItem>\r\n                                <InfoRow>\r\n                                    <br />\r\n                                    Вы можете сначала собрать людей и после оплатить. <br />\r\n                                    Либо вы можете сначала оплатить, а потом собирать людей. <br />\r\n                                    Аренда площадки гарантируется только после её оплаты.\r\n                                </InfoRow>\r\n                            </FormItem>\r\n\r\n                            <FormItem>\r\n                                <Group>\r\n                                    {\r\n                                        (selectedTimeRanges && selectedTimeRanges.length > 1) ?\r\n                                            <InfoRow style={{ \"color\": \"red\" }}>Вы отметили {selectedTimeRanges.length} диапазона(ов) времени: <br />\r\n                                                {ranges}\r\n                                                В таком режиме вы можете только арендовать всё выбранное время.\r\n                                                Чтобы создать сбор, необходимо выбрать только один диапазон подряд идущего времени, например,\r\n                                                18:00, 18:30 и 19:00 (с 18:00 до 19:30 - 1.5 часа)</InfoRow>\r\n                                            : <></>\r\n                                    }\r\n                                    {(selectedTimeRanges && selectedTimeRanges.length > 1) ?\r\n                                        <Group>\r\n                                            <Radio name=\"collect\" value=\"1\" checked={collectType == 1 ? true : false} onChange={() => changeCollectType(1)} description={`вы отметили ${selectedTimeRanges.length} сбора(ов)`} disabled>Оплатить потом создать</Radio>\r\n                                            <Radio name=\"collect\" value=\"2\" checked={collectType == 2 ? true : false} onChange={() => changeCollectType(2)} description={`вы отметили ${selectedTimeRanges.length} сбора(ов)`} disabled>Создать потом оплатить</Radio>\r\n                                            <Radio name=\"collect\" value=\"3\" checked={collectType == 3 ? true : false} onChange={() => changeCollectType(3)} description=\"Без создания сбора\">Просто оплатить выбранное время</Radio>\r\n                                        </Group>\r\n                                        :\r\n                                        <Group>\r\n                                            <Radio name=\"collect\" value=\"1\" checked={collectType == 1 ? true : false} onChange={() => changeCollectType(1)} description=\"После оплаты аренда закреплена за вами\">Оплатить потом создать сбор</Radio>\r\n                                            <Radio name=\"collect\" value=\"2\" checked={collectType == 2 ? true : false} onChange={() => changeCollectType(2)} description=\"Закрепление аренды будет только после оплаты\">Создать сбор потом оплатить</Radio>\r\n                                            <Radio name=\"collect\" value=\"3\" checked={collectType == 3 ? true : false} onChange={() => changeCollectType(3)} description=\"Без создания сбора\">Просто оплатить выбранное время</Radio>\r\n                                        </Group>\r\n\r\n                                    }\r\n\r\n                                </Group>\r\n                            </FormItem>\r\n                            {collectType != 3 &&\r\n                                <>\r\n                                    <FormItem top=\"Информация по сбору\">\r\n                                        <Textarea defaultValue={details} value={details} onChange={e => setDetails(e.currentTarget.value)}\r\n                                            placeholder=\"Укажите здесь важную информацию для участников сбора\" />\r\n                                    </FormItem>\r\n                                    <FormItem top=\"Сколько человек нужно\">\r\n                                        <Input type=\"Number\"\r\n                                            defaultValue={needMembers}\r\n                                            value={needMembers}\r\n                                            placeholder=\"10\"\r\n                                            onChange={e => calculateNeedMembers(e.currentTarget.value)}\r\n                                        ></Input>\r\n\r\n                                    </FormItem>\r\n                                    <FormItem top=\"Стоимость выбранного времени (не видно участникам)\">\r\n                                        <InfoRow>{costAll}</InfoRow>\r\n                                        {/* <Input type=\"Number\"\r\n                                    defaultValue={costAll}\r\n                                    value={costAll}\r\n                                    placeholder=\"2000\"\r\n                                    onChange={e => calculateCostAll(e.currentTarget.value)}\r\n                                ></Input> */}\r\n                                    </FormItem>\r\n                                    <FormItem top=\"Стоимость на 1 человека (эту цену увидят участники)\">\r\n                                        <Input type=\"Number\"\r\n                                            defaultValue={costMembers}\r\n                                            value={costMembers}\r\n                                            placeholder=\"200\"\r\n                                            onChange={e => calculateCostMembers(e.currentTarget.value)}\r\n                                        ></Input>\r\n                                    </FormItem>\r\n                                    <FormItem top=\"Остаток после оплаты\">\r\n                                        <InfoRow>{plus} руб</InfoRow>\r\n                                    </FormItem>\r\n                                </>\r\n                            }\r\n                            <FormItem top=\"Публикация\">\r\n                                {selectedTimeRanges && selectedTimeRanges.length > 0 ? (\r\n                                    collectType == 1 ? <RichCell\r\n                                        caption=\"Оплатить и создать сбор\"\r\n                                        actions={<Button>Оплатить и создать сбор</Button>}\r\n                                    >\r\n                                    </RichCell> :\r\n                                        (collectType == 2 ?\r\n                                            <RichCell\r\n                                                caption=\"Создать сбор и оплатить\"\r\n                                                actions={<Button onClick={createCollect}>Создать сбор</Button>}\r\n                                            >\r\n                                            </RichCell> :\r\n                                            <RichCell\r\n                                                caption=\"Оплатить выбранное время без создания сбора\"\r\n                                                actions={<Button>Оплатить</Button>}\r\n                                            >\r\n                                            </RichCell>)\r\n                                ) :\r\n                                    <RichCell\r\n                                        caption=\"Выберите место, дату и время занятий\">\r\n                                    </RichCell>}\r\n                            </FormItem>\r\n                        </Group>\r\n                        :\r\n                        <></>\r\n                    }\r\n                </>\r\n            )\r\n        }; break;\r\n        case \"edit\": {\r\n            return (\r\n                <>\r\n                    <FormItem top=\"Ваш город\">\r\n                        <InfoRow>{(props.myProfile && props.myProfile.CityUmbracoName) ? props.myProfile.CityUmbracoName : \"\"}</InfoRow>\r\n                    </FormItem>\r\n                    <FormItem top=\"Дата и время\">\r\n                        <InfoRow>{dateToString(props.collect.selected.When)} в {dateTimeToTimeString(props.collect.selected.When)}</InfoRow>\r\n                    </FormItem>\r\n                    <FormItem top=\"Место\">\r\n                        <RichCell caption={props.collect.selected.Place.Address}>{props.collect.selected.Place.Name}</RichCell>\r\n                    </FormItem>\r\n\r\n\r\n                    <FormItem top=\"Информация по сбору\">\r\n                        <Textarea defaultValue={details} value={details} onChange={e => setDetails(e.currentTarget.value)} placeholder=\"Сделать чтобы можно было покупать аренду без сбора. сбор опционально делается\" />\r\n                    </FormItem>\r\n                    <FormItem top=\"Сколько человек нужно\"\r\n                    bottom={\r\n                        props.collect.mode == \"edit\" \r\n                    && props.collect.selected.Members \r\n                    && props.collect.selected.Members != undefined \r\n                    && props.collect.selected.Members.length > 0 \r\n                    && (needMembers < props.collect.selected.Members.length) ?\r\n                    <CellButton mode=\"danger\">Нельзя указывать меньше, чем зарегистрированных участников</CellButton>\r\n                    : \"\"\r\n                    }\r\n                    >\r\n                        <Input type=\"Number\"\r\n                            defaultValue={needMembers}\r\n                            value={needMembers}\r\n                            placeholder=\"10\"\r\n                            onChange={e => calculateNeedMembers(e.currentTarget.value)}\r\n                        ></Input>\r\n\r\n                    </FormItem>\r\n                    <FormItem top=\"Стоимость выбранного времени (не видно участникам)\">\r\n                        <InfoRow>{costAll}</InfoRow>\r\n                        {/* <Input type=\"Number\"\r\n                                defaultValue={costAll}\r\n                                value={costAll}\r\n                                placeholder=\"2000\"\r\n                                onChange={e => calculateCostAll(e.currentTarget.value)}\r\n                            ></Input> */}\r\n                    </FormItem>\r\n                    <FormItem top=\"Стоимость на 1 человека (эту цену увидят участники)\">\r\n                        <Input type=\"Number\"\r\n                            defaultValue={costMembers}\r\n                            value={costMembers}\r\n                            placeholder=\"200\"\r\n                            onChange={e => calculateCostMembers(e.currentTarget.value)}\r\n                        ></Input>\r\n                    </FormItem>\r\n                    <FormItem top=\"Остаток после оплаты\">\r\n                        <InfoRow>{plus} руб</InfoRow>\r\n                    </FormItem>\r\n\r\n                    <FormItem top=\"Сохранение\">\r\n                        <RichCell\r\n                            actions={\r\n                                <Group>\r\n                                    <Button\r\n                                        onClick={cancelSave}\r\n                                    >Отменить изменения</Button>\r\n                                    {\r\n                                        props.collect.mode == \"edit\" \r\n                                        && props.collect.selected.Members \r\n                                        && props.collect.selected.Members != undefined \r\n                                        && props.collect.selected.Members.length > 0 \r\n                                        && (needMembers >= props.collect.selected.Members.length) ?\r\n                                        <Button\r\n                                        Message = \"Сохранить внесенные изменения?\"\r\n                                        Yes={saveChanges}\r\n                                    >Сохранить изменения</Button>\r\n                                        :\r\n                                        <Button disabled>Исправьте ошибки...</Button>\r\n                                }\r\n                                </Group>\r\n                            }\r\n                        >\r\n                        </RichCell>\r\n                    </FormItem>\r\n\r\n\r\n                </>\r\n            )\r\n        }; break;\r\n        default: {\r\n            <Group>\r\n                Не выбран режим отображения компонента (view, add, edit)\r\n            </Group>\r\n        }; break;\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        collect: state.collectEntity,\r\n        simplePlace: state.simplePlaceEntity,\r\n        selectedPlace: state.simplePlaceEntity.selectedPlace,\r\n        selectedRent: state.rentEntity.selectedRent,\r\n        rent: state.rentEntity,\r\n        myProfile: state.profileEntity.myProfile,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    DeleteMemberFromCollect, setSelectedSimplePlace, setSelectedRent, AddSimpleCollect, registerMemberToSimpleCollect,\r\n    DelSimpleCollect, setCollectItemMode, EditSimpleCollect, setSelectedMembers,\r\n})(SimpleCollectItem)","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport {pushToHistory, popFromHistory, goToPanel} from '../../../../store/systemReducer'\r\n\r\n\r\n/*\r\nisBack={false} - флаг возврата на предыдущую панель\r\ntoMenuName=\"viewcollect\"  - куда переход (имя из id в View на главной странице в Epic на главной странице (также должно быть в mainMenuReducer в списке менюшек))\r\nitem = {itm} - объект, передаваемый в параметр handleClick\r\nhandleClick = {selectCollect} - функция, выполняемая по клику\r\n*/\r\n\r\n\r\nexport const withHistorySave = (WrappedComponent) => {\r\n    \r\n    const mapStateToProps = state => ({\r\n        history: state.system.history,\r\n    })\r\n    \r\n    const mapDispatchToProps = {\r\n        goToPanel\r\n    }\r\n\r\n    class hocComponent extends React.Component{\r\n        constructor(props){\r\n            super(props);\r\n            this.clickEvent = this.clickEvent.bind(this);\r\n\r\n        }\r\n\r\n        clickEvent(evt){\r\n            \r\n            if (this.props.handleClick != undefined && this.props.item != undefined)\r\n                this.props.handleClick(this.props.item);\r\n            else if (this.props.handleClick != undefined && this.props.item == undefined)\r\n                this.props.handleClick();\r\n            this.props.goToPanel(this.props.toMenuName, this.props.isBack);\r\n        }\r\n\r\n        componentDidUpdate(prevProps, prevState){\r\n            \r\n        }\r\n\r\n\r\n        render(){\r\n            \r\n            return <WrappedComponent onClick={this.clickEvent} {...this.props}></WrappedComponent>\r\n            \r\n        }\r\n    }\r\n\r\n    return connect(mapStateToProps, mapDispatchToProps)(hocComponent)\r\n}\r\n","import React, { Component } from 'react'\r\nimport { RichCell } from '@vkontakte/vkui'\r\nimport { withHistorySave } from '../HOCs/withHistorySave'\r\n\r\nconst RichCellWithHistory = (props) => {\r\n  \r\n \r\n    return (\r\n        <RichCell isBack={false} {...props}></RichCell>\r\n        \r\n    )\r\n}\r\n\r\nexport default withHistorySave(RichCellWithHistory)","import React, { Component } from 'react'\r\nimport {TabbarItem } from '@vkontakte/vkui'\r\nimport { withHistorySave } from '../HOCs/withHistorySave'\r\nimport { Icon24ChevronRight } from '@vkontakte/icons';\r\n\r\nconst Icon24ChevronRightWithHistory = (props) => {\r\n  \r\n \r\n    return (\r\n        <Icon24ChevronRight isBack={false} {...props}></Icon24ChevronRight>\r\n        \r\n    )\r\n}\r\n\r\nexport default withHistorySave(Icon24ChevronRightWithHistory)","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, InfoRow, Group, List, Cell, Button, FormItem } from '@vkontakte/vkui'\r\nimport { defaultPhotoPath } from '../../../../store/dataTypes/common'\r\nimport RichCellWithHistory from '../../Common/WithHistory/RichCellWithHistory'\r\nimport { dateToString } from '../../../../utils/convertors/dateUtils'\r\nimport Icon24ChevronRightWithHistory from '../../Common/WithHistory/Icon24ChevronRightWithHistory'\r\nimport ButtonWithNotify from '../../Common/WithNotify/ButtonWithNotify'\r\n\r\n\r\n\r\nconst TeamAdminList = (props) => {\r\n\r\n    //const [tournamentList, setTournamentList] = useState(props.tournaments)\r\n    // const list = props.tournaments.map(x => {\r\n    //     return <TournamentListItem>{x.Name}</TournamentListItem>\r\n    // })\r\n\r\n        \r\n\r\n    return (\r\n        <Group>\r\n            <List>\r\n                {(props.List && props.List.length > 0) ?\r\n                    props.List.map(item => {\r\n                        let date = new Date(item.WhenBorn);\r\n                        return (\r\n                            <FormItem>\r\n                                <RichCell\r\n                                    multiline\r\n                                    actions={\r\n                                        <>\r\n                                        {/* {!item.Published ? \r\n                                        <Button onClick={() => props.Button1Handle(item, true)}>Опубликовать</Button>\r\n                                        : \r\n                                        <Button onClick={() => props.Button1Handle(item, false)} mode=\"secondary\">Снять с публикации</Button>} */}\r\n                                        <ButtonWithNotify Yes={() => props.Button2Handle(item)} Message=\"Удалить команду?\" mode=\"destructive\">Удалить</ButtonWithNotify>\r\n                                        </>\r\n                                        }\r\n                                    // caption={date && `Основана: ${dateToString(date)}`}\r\n                                    after={\r\n                                        <Icon24ChevronRightWithHistory\r\n                                            handleClick={() => props.CellClick(item)} \r\n                                            toMenuName=\"teamitem\" \r\n                                            data-story=\"teamitem\"\r\n                                        >\r\n\r\n                                        </Icon24ChevronRightWithHistory>\r\n                                    }\r\n                                    // text={item.Published ? \"Опубликован\" : \"Не опубликован\"}\r\n                                >\r\n                                    {item.Name}\r\n                                </RichCell>\r\n                            </FormItem>\r\n                        )\r\n                    })\r\n                    : \r\n                    <FormItem><InfoRow>Нет команд</InfoRow></FormItem>\r\n                }\r\n\r\n            </List>\r\n        </Group>\r\n    )\r\n}\r\n\r\nexport default TeamAdminList","import { setGlobalPopout, setErrorMessage } from \"./systemReducer\";\r\nimport { CityTournamentAdminAPI, BidTeamAPI, TournamentAPI } from './../utils/api/api.js'\r\nimport { cityTournamentAdmins } from './constants/commonConstants'\r\nimport { EmptyTournament } from './constants/commonConstants'\r\n\r\nimport { authQueryString } from './../utils/api/server';\r\n\r\nlet demoCityTournamentAdmins = cityTournamentAdmins;\r\n\r\nconst TOURNAMENT_SET_ALL_TOURNAMENTS = \"TOURNAMENT_SET_ALL_TOURNAMENTS\";\r\nconst TOURNAMENT_SET_SELECTED_TOURNAMENT = \"TOURNAMENT_SET_SELECTED_TOURNAMENT\";\r\nconst TOURNAMENT_MY_ADD_OR_EDIT = \"TOURNAMENT_MY_ADD_OR_EDIT\";\r\nconst TOURNAMENT_SET_TOURNAMENTGROUPS = \"TOURNAMENT_SET_TOURNAMENTGROUPS\";\r\nconst TOURNAMENT_SET_TOURNAMENTTEAMS = \"TOURNAMENT_SET_TOURNAMENTTEAMS\";\r\nconst TOURNAMENT_SET_MYTOURNAMENT = \"TOURNAMENT_SET_MYTOURNAMENT\";\r\nconst TOURNAMENT_DELETE_MYTOURNAMENT = \"TOURNAMENT_DELETE_MYTOURNAMENT\";\r\nconst TOURNAMENT_SET_MODE = \"TOURNAMENT_SET_MODE\";\r\nconst TOURNAMENT_MATCH_LENGTH = \"TOURNAMENT_MATCH_LENGTH\";\r\nconst TOURNAMENT_SET_ALL_CITYTOURNAMENTADMINS = \"TOURNAMENT_SET_ALL_CITYTOURNAMENTADMINS\";\r\nconst TOURNAMENT_SET_WHEN_BEGIN = \"TOURNAMENT_SET_WHEN_BEGIN\";\r\nconst TOURNAMENT_SET_WHEN_END = \"TOURNAMENT_SET_WHEN_END\";\r\nconst TOURNAMENT_SET_NAME = \"TOURNAMENT_SET_NAME\";\r\nconst TOURNAMENT_SET_DETAILS = \"TOURNAMENT_SET_DETAILS\";\r\nconst TOURNAMENT_SET_REGLAMENT = \"TOURNAMENT_SET_REGLAMENT\";\r\nconst TOURNAMENT_DEL_GROUP_BY_KEY_ID = \"TOURNAMENT_DEL_GROUP_BY_KEY_ID\";\r\nconst TOURNAMENT_DEL_GROUP_BY_ID = \"TOURNAMENT_DEL_GROUP_BY_ID\";\r\nconst TOURNAMENT_ADD_GROUP = \"TOURNAMENT_ADD_GROUP\";\r\nconst TOURNAMENT_SET_GROUP = \"TOURNAMENT_RESET_TOURNAMENT\";\r\nconst TOURNAMENT_RESET_TOURNAMENT = \"TOURNAMENT_SET_GROUP\";\r\nconst TOURNAMENT_PUBLISH = \"TOURNAMENT_PUBLISH\";\r\nconst TOURNAMENT_UNPUBLISH = \"TOURNAMENT_UNPUBLISH\";\r\nconst TOURNAMENT_SET_MY_TOURNAMENTS = \"TOURNAMENT_SET_MY_TOURNAMENTS\";\r\nconst TOURNAMENT_SET_TOURNAMENT_BY_ID = \"TOURNAMENT_SET_TOURNAMENT_BY_ID\";\r\nconst TOURNAMENT_SET_NEW_BIDS = \"TOURNAMENT_SET_NEW_BIDS\";\r\nconst TOURNAMENT_DEL_BID = \"TOURNAMENT_DEL_BID\";\r\nconst TOURNAMENT_SET_SELECTED_TOURNAMENT_TABLES = \"TOURNAMENT_SET_SELECTED_TOURNAMENT_TABLES\";\r\n\r\nconst currentDate = new Date();\r\nconst emptyTournament = EmptyTournament\r\n\r\nconst initState = {\r\n    tournaments: [], // все турниры\r\n    bidsNew: [], // новые заявки на турниры\r\n    selectedForView: {}, // выбранный турнир для просмотра в пользовательском режиме (а надо ли?)\r\n    selected: emptyTournament, // выбранный для просмотра/создания/редактирования турнир\r\n    selectedTables: [],  // турнирные таблицы выбранного турнира для просмотра пользователями\r\n    myTournaments: [], // те, что я создал\r\n    cityTournamentAdmins: [], // админы текущего города\r\n    mode: \"view\", // режим отображения турнира (\"view\" - просмотр, \"add\" - добавление, \"edit\" - редактирование)\r\n}\r\n\r\n\r\nlet tournamentReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case TOURNAMENT_SET_ALL_TOURNAMENTS: {\r\n            return {\r\n                ...state,\r\n                tournaments: [...action.tournaments],\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_MY_TOURNAMENTS: {\r\n            return {\r\n                ...state,\r\n                myTournaments: [...action.myTournaments],\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_MODE: {\r\n            return {\r\n                ...state,\r\n                mode: action.mode,\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_MYTOURNAMENT: {\r\n            return {\r\n                ...state,\r\n                myTournaments: [...state.myTournaments.map(tour => {\r\n                    \r\n                    if (tour.Id == action.mytournament.Id) {{\r\n                        tour = {...action.mytournament};\r\n                    }}\r\n                    return tour;\r\n                })],\r\n            };\r\n        }\r\n        case TOURNAMENT_DELETE_MYTOURNAMENT: {\r\n            \r\n            return {\r\n                ...state,\r\n                myTournaments: [...state.myTournaments.filter(tour => tour.Id != action.mytournament.Id )],\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_SELECTED_TOURNAMENT_TABLES: {\r\n            \r\n            return {\r\n                ...state,\r\n                selectedTables: [...action.tables],\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_SELECTED_TOURNAMENT: {\r\n            let index = -1;\r\n            let max = -1;\r\n            \r\n            \r\n\r\n            state.selected.TournamentGroups.forEach(item => {\r\n                if (item.KeyId != undefined){\r\n                    if (item.KeyId > max)\r\n                        max = item.KeyId;\r\n                }\r\n            });\r\n\r\n\r\n            return {\r\n                ...state,\r\n                selected: {...action.tournament,\r\n                    WhenBegin: {day: new Date(action.tournament.WhenBegin).getDate(), \r\n                        month: new Date(action.tournament.WhenBegin).getMonth()+1, \r\n                        year: new Date(action.tournament.WhenBegin).getFullYear()},\r\n                    WhenEnd: {day: new Date(action.tournament.WhenEnd).getDate(), \r\n                        month: new Date(action.tournament.WhenEnd).getMonth()+1, \r\n                        year: new Date(action.tournament.WhenEnd).getFullYear()},\r\n                    TournamentGroups: [...action.tournament.TournamentGroups.map(item => {\r\n                        return {...item, KeyId: ++max}\r\n                    })]\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_RESET_TOURNAMENT: {\r\n            return {\r\n                ...state,\r\n                selected: {...emptyTournament},\r\n            };\r\n        }\r\n        case TOURNAMENT_MY_ADD_OR_EDIT: {\r\n            let newTourn = state.myTournaments.filter(t => t.Id == action.tournament.Id)\r\n            if (newTourn){\r\n                return {\r\n                    ...state,\r\n                    myTournaments: [\r\n                        ...state.myTournaments.map(t => {\r\n                            if (t.Id == action.tournament.Id){\r\n                                t = {...t.tournament}\r\n                            }\r\n                            return t;\r\n                        })\r\n                    ],\r\n                };\r\n            }\r\n            else{\r\n                return {\r\n                    ...state,\r\n                    myTournaments: [\r\n                        ...state.myTournaments, action.tournament\r\n                    ],\r\n                };\r\n            }\r\n        }\r\n        case TOURNAMENT_MATCH_LENGTH: {\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                MatchLength: action.value,\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_ALL_CITYTOURNAMENTADMINS: {\r\n            return {\r\n                ...state,\r\n                cityTournamentAdmins: [...action.cityTournamentAdmins],\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_NEW_BIDS: {\r\n            return {\r\n                ...state,\r\n                bidsNew: [...action.bids],\r\n            };\r\n        }\r\n        case TOURNAMENT_DEL_BID: {\r\n            return {\r\n                ...state,\r\n                bidsNew: [...state.bidsNew.filter(x => x.Id != action.bid.Id)],\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_WHEN_BEGIN: {\r\n\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    WhenBegin: action.when,\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_WHEN_END: {\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    WhenEnd: action.when,\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_NAME: {\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    Name: action.value,\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_REGLAMENT: {\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    Reglament: action.value,\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_DETAILS: {\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    Details: action.value,\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_PUBLISH: {\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    Published: true,\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_UNPUBLISH: {\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    Published: false,\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_ADD_GROUP: {\r\n            let max = -1;\r\n            state.selected.TournamentGroups.forEach(item => {\r\n                if (item.KeyId != undefined){\r\n                    if (item.KeyId > max)\r\n                        max = item.KeyId;\r\n                }\r\n            });\r\n\r\n            // if (action.group.Id < 0)\r\n            //     return {\r\n            //         ...state,\r\n            //         selected: {...state.selected, \r\n            //             TournamentGroups: [...state.selected.TournamentGroups, \r\n            //                 {\r\n            //                     KeyId: max + 1,    \r\n            //                     Name: action.group.Name\r\n            //                 }],\r\n            //         },\r\n            //     };\r\n            // else\r\n                return {\r\n                    ...state,\r\n                    selected: {...state.selected, \r\n                        TournamentGroups: [...state.selected.TournamentGroups, \r\n                            {\r\n                                ...action.group,\r\n                                KeyId: max + 1,    \r\n                                Id: action.group.Id,\r\n                                Name: action.group.Name\r\n                            }],\r\n                    },\r\n                };\r\n\r\n        }\r\n        case TOURNAMENT_SET_GROUP: {\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    TournamentGroups: state.selected.TournamentGroups.map(item => {\r\n                        if (item.Id == action.groupId)\r\n                        {\r\n                            item.Id = action.groupId;\r\n                            item.KeyId = action.groupId;\r\n                            item.Name = action.groupName;\r\n                        }\r\n                        return item;\r\n                    }),\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_TOURNAMENTGROUPS: {\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    TournamentGroups: [...action.groups],\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_SET_TOURNAMENTTEAMS: {\r\n\r\n            let newTGroups = [];\r\n            \r\n\r\n            // clear tournament groups\r\n            state.selected.TournamentGroups.forEach(tg => {\r\n                tg.Teams = [];\r\n            })\r\n\r\n            // заполнение групп\r\n            action.bidsWithTeamsAndGroups.forEach(bid => {\r\n                \r\n                newTGroups = state.selected.TournamentGroups.map(tg => {\r\n                    \r\n                    if (tg.Id == bid.TournamentGroupId)\r\n                    {\r\n                        bid.Team.Name = bid.TeamName;\r\n                        tg.Teams = [...tg.Teams, bid.Team];\r\n                    }\r\n                    return tg;\r\n                })\r\n            });\r\n            \r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    TournamentGroups: [...newTGroups],\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_DEL_GROUP_BY_KEY_ID: {\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    TournamentGroups: state.selected.TournamentGroups.filter(item => item.KeyId != action.groupId),\r\n                },\r\n            };\r\n        }\r\n        case TOURNAMENT_DEL_GROUP_BY_ID: {\r\n            debugger\r\n            return {\r\n                ...state,\r\n                selected: {...state.selected, \r\n                    TournamentGroups: state.selected.TournamentGroups.filter(item => item.Id != action.groupId),\r\n                },\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\nexport const setTournaments = (tournaments) => {\r\n    return {\r\n        type: TOURNAMENT_SET_ALL_TOURNAMENTS,\r\n        tournaments\r\n    }\r\n}\r\n\r\nexport const setTournamentTables = (tables) => {\r\n    return {\r\n        type: TOURNAMENT_SET_SELECTED_TOURNAMENT_TABLES,\r\n        tables\r\n    }\r\n}\r\n\r\nexport const setMyTournament = (mytournament) => {\r\n    return {\r\n        type: TOURNAMENT_SET_MYTOURNAMENT,\r\n        mytournament\r\n    }\r\n}\r\n\r\nexport const addOrEditTournament = (tournament) => {\r\n    return {\r\n        type: TOURNAMENT_MY_ADD_OR_EDIT,\r\n        tournament\r\n    }\r\n}\r\n\r\nexport const setSelectedTournament = (tournament) => {\r\n    return {\r\n        type: TOURNAMENT_SET_SELECTED_TOURNAMENT,\r\n        tournament\r\n    }\r\n}\r\n\r\nexport const deleteMyTournament = (mytournament) => {\r\n    return {\r\n        type: TOURNAMENT_DELETE_MYTOURNAMENT,\r\n        mytournament\r\n    }\r\n}\r\n\r\nexport const setMyTournaments = (myTournaments) => {\r\n    return {\r\n        type: TOURNAMENT_SET_MY_TOURNAMENTS,\r\n        myTournaments\r\n    }\r\n}\r\n\r\nexport const tournamentPublish = () => {\r\n    return {\r\n        type: TOURNAMENT_PUBLISH,\r\n    }\r\n}\r\n\r\nexport const tournamentUnpublish = () => {\r\n    return {\r\n        type: TOURNAMENT_UNPUBLISH,\r\n    }\r\n}\r\n\r\nexport const resetTournament = () => {\r\n    return {\r\n        type: TOURNAMENT_RESET_TOURNAMENT\r\n    }\r\n}\r\n\r\nexport const setTournamentWhenBegin = (when) => {\r\n    return {\r\n        type: TOURNAMENT_SET_WHEN_BEGIN,\r\n        when\r\n    }\r\n}\r\n\r\nexport const setTournamentWhenEnd = (when) => {\r\n    return {\r\n        type: TOURNAMENT_SET_WHEN_END,\r\n        when\r\n    }\r\n}\r\n\r\nexport const setTournamentMode = (mode) => {\r\n    return {\r\n        type: TOURNAMENT_SET_MODE,\r\n        mode\r\n    }\r\n}\r\n\r\nexport const setTournamentName = (value) => {\r\n    return {\r\n        type: TOURNAMENT_SET_NAME,\r\n        value\r\n    }\r\n}\r\n\r\nexport const setTournamentMatchLength = (value) => {\r\n    return {\r\n        type: TOURNAMENT_MATCH_LENGTH,\r\n        value\r\n    }\r\n}\r\n\r\nexport const setTournamentDetails = (value) => {\r\n    return {\r\n        type: TOURNAMENT_SET_DETAILS,\r\n        value\r\n    }\r\n}\r\n\r\nexport const setTournamentReglament = (value) => {\r\n    return {\r\n        type: TOURNAMENT_SET_REGLAMENT,\r\n        value\r\n    }\r\n}\r\n\r\nexport const setTournamentNewBids = (bids) => {\r\n    return {\r\n        type: TOURNAMENT_SET_NEW_BIDS,\r\n        bids\r\n    }\r\n}\r\n\r\nexport const setCityTournamentAdmins = (cityTournamentAdmins) => {\r\n    return {\r\n        type: TOURNAMENT_SET_ALL_CITYTOURNAMENTADMINS,\r\n        cityTournamentAdmins\r\n    }\r\n}\r\n\r\nexport const setSelectedTournamentGroups = (groups) => {\r\n    return {\r\n        type: TOURNAMENT_SET_TOURNAMENTGROUPS,\r\n        groups\r\n    }\r\n}\r\n\r\nexport const setTournamentTeams = (bidsWithTeamsAndGroups) => {\r\n    return {\r\n        type: TOURNAMENT_SET_TOURNAMENTTEAMS,\r\n        bidsWithTeamsAndGroups\r\n    }\r\n}\r\n\r\nexport const delGroupFromTournamentByKeyId = (tournamentId, groupId) => {\r\n    return {\r\n        type: TOURNAMENT_DEL_GROUP_BY_KEY_ID,\r\n        tournamentId,\r\n        groupId\r\n    }\r\n}\r\n\r\nexport const delGroupFromTournamentById = (tournamentId, groupId) => {\r\n    debugger\r\n    return {\r\n        type: TOURNAMENT_DEL_GROUP_BY_ID,\r\n        tournamentId,\r\n        groupId\r\n    }\r\n}\r\n\r\nexport const addGroupToTournament = (group) => {\r\n    return {\r\n        type: TOURNAMENT_ADD_GROUP,\r\n        group\r\n    }\r\n}\r\n\r\nexport const editGroupInTournament = (tournamentId, groupId, groupName) => {\r\n    return {\r\n        type: TOURNAMENT_SET_GROUP,\r\n        tournamentId,\r\n        groupId,\r\n        groupName\r\n    }\r\n}\r\n\r\nexport const deleteTournamentBid = (bid) => {\r\n    return {\r\n        type: TOURNAMENT_DEL_BID,\r\n        bid\r\n    }\r\n}\r\n\r\n// перемещение заявки от команды в другую группу по команде\r\nexport const replaceTeam = (team, tOldGoup, tNewGroup) => {\r\n    \r\n} \r\n\r\n// отмена заявки от команды (удаление из турнира) по команде\r\nexport const deleteTeam = (team, tGoup) => {\r\n\r\n}\r\n\r\n// все админы турниров города\r\nexport const getAllCityTournamentAdmins = (startindex = 0) => {\r\n    return dispatch => {\r\n\r\n        dispatch(setGlobalPopout(true))\r\n        if (authQueryString && authQueryString.length > 0)\r\n            CityTournamentAdminAPI.getAll(startindex)\r\n                .then(pl => {\r\n                    if (pl && pl.data.length > 0) {\r\n                        \r\n                        dispatch(setCityTournamentAdmins(pl.data));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        \r\n                        dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    \r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            \r\n            dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// все админы города с сервера по Id города\r\nexport const getAllCityTournamentAdminsByCityId = (cityTournamentId, startindex = 0) => {\r\n    return dispatch => {\r\n\r\n        if (authQueryString && authQueryString.length > 0)\r\n            CityTournamentAdminAPI.getAllInCityByCityId(cityTournamentId, startindex)\r\n                .then(pl => {\r\n                    if (pl && pl.data.length > 0) {\r\n                        \r\n                        dispatch(setCityTournamentAdmins(pl.data));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                        dispatch(setGlobalPopout(false))\r\n\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// сохраняет (добавляет) в базу новый турнир\r\nexport const saveSelectedTournament = (tournament = null, userprofile = null) => {\r\n    return dispatch => {\r\n        if (tournament != null){\r\n            if (authQueryString && authQueryString.length > 0)\r\n                CityTournamentAdminAPI.saveTournament(tournament, userprofile)\r\n                    .then(pl => {\r\n                        debugger\r\n                        if (pl && pl.data) {\r\n                            dispatch(addOrEditTournament(pl.data))\r\n                            //dispatch(resetTournament());\r\n                            //dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            //dispatch(setErrorMessage(\"Не удалось сохранить турнир\"))\r\n                            //dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        //dispatch(setErrorMessage(\"Не удалось сохранить турнир: \" + error))\r\n                        //dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                //dispatch(setErrorMessage(\"Не удалось сохранить турнир\"))\r\n                //dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            //dispatch(setErrorMessage(\"Не удалось сохранить турнир, в функцию передан null\"))\r\n            //dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// опубликовывает турнир\r\nexport const publishTournament = (tournament = null, userprofile = null, publish = false) => {\r\n    \r\n    return dispatch => {\r\n        if ((tournament != null) && (userprofile != null)){\r\n\r\n            if (authQueryString && authQueryString.length > 0)\r\n                CityTournamentAdminAPI.publishTournament(tournament, userprofile, publish)\r\n                    .then(pl => {\r\n\r\n                        if (pl) {\r\n                            // изменить полученный турнир в списке\r\n                            dispatch(setMyTournament(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось опубликовать турнир\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось опубликовать турнир: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось опубликовать турнир\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось опубликовать турнир, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// удаляет турнир\r\nexport const deleteTournament = (tournament = null, userprofile = null) => {\r\n    \r\n    return dispatch => {\r\n        if ((tournament != null) || (userprofile == null)){\r\n            if (authQueryString && authQueryString.length > 0)\r\n                CityTournamentAdminAPI.deleteTournament(tournament, userprofile)\r\n                    .then(pl => {\r\n                        if (pl) {\r\n                            // изменить полученный турнир в списке\r\n                            dispatch(deleteMyTournament(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось удалить турнир\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось удалить турнир: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось удалить турнир\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось удалить турнир, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// запрашивает новые заявки в турнир\r\nexport const getTournamentNewBids = (tournament = null, userprofile = null) => {\r\n    \r\n    return dispatch => {\r\n        if ((tournament != null) && (userprofile != null)){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            BidTeamAPI.getTeamBidsByTournament(userprofile, tournament)\r\n                    .then(pl => {\r\n                        if (pl) {\r\n                            // изменить полученный турнир в списке\r\n                            dispatch(setTournamentNewBids(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось загрузить заявки турнира\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось загрузить заявки турнира: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось загрузить заявки турнира\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось загрузить заявки турнира, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// запрашивает группы и заявленные команды турнира\r\nexport const getTournamentTeams = (tournament = null, userprofile = null) => {\r\n    \r\n    return dispatch => {\r\n        if ((tournament != null) && (userprofile != null)){\r\n            if (authQueryString && authQueryString.length > 0)\r\n                CityTournamentAdminAPI.getTournamentTeamsByTournament(userprofile, tournament)\r\n                    .then(pl => {\r\n                        if (pl) {\r\n                            \r\n                            dispatch(setTournamentTeams(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось загрузить группы и команды турнира\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось загрузить группы и команды турнира: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось загрузить группы и команды турнира\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось загрузить группы и команды турнира, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// изменяет группу команды в турнире\r\nexport const changeTournamentTeamBidTournamentGroup = (team = null, newgroup = null, oldgroup = null, userprofile = null) => {\r\n    debugger\r\n    return dispatch => {\r\n        if ((team != null) && (userprofile != null) && (newgroup != null) && (oldgroup != null)) {\r\n            \r\n            if (authQueryString && authQueryString.length > 0)\r\n            \r\n                CityTournamentAdminAPI.changeTeamTournamentGroup(team, newgroup, oldgroup, userprofile)\r\n                    .then(pl => {\r\n                        if (pl) {\r\n                            \r\n                            dispatch(setTournamentTeams(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось сменить группу\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось сменить группу: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось сменить группу\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось сменить группу, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// запрос групп турнира\r\nexport const getTournamentGroups = (tournament = null) => {\r\n    \r\n    return dispatch => {\r\n        if (tournament != null){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            CityTournamentAdminAPI.getTournamentGroups(tournament)\r\n                    .then(pl => {\r\n                        \r\n                        if (pl) {\r\n                           // debugger\r\n                            dispatch(setSelectedTournamentGroups(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось получить список групп турнира\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось получить список групп турнира: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось получить список групп турнира\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось получить список групп турнира, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// Подтверждает заявку в турнир\r\nexport const acceptTeamToTournamentBid = (bid = null, tournament = null, userprofile = null, admintext = \"\") => {\r\n    \r\n    return dispatch => {\r\n        if ((tournament != null) && (userprofile != null)  && (bid != null)){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            BidTeamAPI.acceptTeamToTournamentBid(bid, userprofile, tournament, admintext)\r\n                    .then(pl => {\r\n                        if (pl) {\r\n                            // изменить полученный турнир в списке\r\n                            debugger\r\n                            dispatch(deleteTournamentBid(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось подтвердить заявку от команды в турнир\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось подтвердить заявку от команды в турнир: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось подтвердить заявку от команды в турнир\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось подтвердить заявку от команды в турнир, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// Отклоняет заявку в турнир\r\nexport const declineTeamToTournamentBid = (bid = null, tournament = null, userprofile = null, admintext = \"\") => {\r\n    \r\n    return dispatch => {\r\n        if ((tournament != null) && (userprofile != null)  && (bid != null)){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            BidTeamAPI.declineTeamToTournamentBid(bid, userprofile, tournament, admintext)\r\n                    .then(pl => {\r\n                        if (pl) {\r\n                            // изменить полученный турнир в списке\r\n                            debugger\r\n                            dispatch(deleteTournamentBid(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось подтвердить заявку от команды в турнир\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось подтвердить заявку от команды в турнир: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось подтвердить заявку от команды в турнир\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось подтвердить заявку от команды в турнир, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// Удаляет команду из турнира\r\nexport const deleteTeamFromTournament = (team = null, tournamentGroup = null, userprofile = null, admintext = \"\") => {\r\n    \r\n    return dispatch => {\r\n        if ((tournamentGroup != null) && (userprofile != null)  && (team != null)){\r\n            if (authQueryString && authQueryString.length > 0)\r\n                CityTournamentAdminAPI.deleteTeamFromTournamentByTeam(team, tournamentGroup, userprofile, admintext)\r\n                    .then(pl => {\r\n                        if (pl && pl.data) {\r\n                            // изменить полученный турнир в списке\r\n                            debugger\r\n                            dispatch(setTournamentTeams(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось удалить команду из турнира\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось удалить команду из турнира: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось удалить команду из турнира\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось удалить команду из турнира, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// удаляет группу турнира\r\nexport const deleteTournamentGroup = (tournament = null, userprofile = null, tournamentGroupId = -1) => {\r\n    debugger\r\n    return dispatch => {\r\n        if ((tournament != null) || (userprofile == null)){\r\n            if (authQueryString && authQueryString.length > 0){\r\n                if (tournamentGroupId < 0)\r\n                {\r\n                    debugger\r\n                    dispatch(delGroupFromTournamentById(tournament.Id, tournamentGroupId));\r\n                    dispatch(setGlobalPopout(false))\r\n                }\r\n                else\r\n                {\r\n                    CityTournamentAdminAPI.deleteTournamentGroup(tournament, userprofile, tournamentGroupId)\r\n                    .then(pl => {\r\n                        if (pl) {\r\n                            debugger\r\n                            dispatch(delGroupFromTournamentById(tournament.Id, pl.data.Id))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось удалить группу турнира\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось удалить группу турнира: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n                }\r\n            }\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось удалить группу турнира\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось удалить группу турнира, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// добавляет группу турнира\r\nexport const addTournamentGroup = (tournament = null, userprofile = null, tournamentGroup = null) => {\r\n    debugger\r\n    return dispatch => {\r\n        if ((tournament != null) || (userprofile == null)){\r\n            if (authQueryString && authQueryString.length > 0){\r\n                if (tournament.Id < 0)\r\n                {\r\n                    debugger\r\n                    dispatch(addGroupToTournament(tournamentGroup));\r\n                    dispatch(setGlobalPopout(false))\r\n                }\r\n                else\r\n                {\r\n                    CityTournamentAdminAPI.addTournamentGroup(tournament, userprofile, tournamentGroup)\r\n                    .then(pl => {\r\n                        if (pl) {\r\n                            debugger\r\n                            dispatch(addGroupToTournament(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось удалить группу турнира\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось удалить группу турнира: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n                }\r\n            }\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось удалить группу турнира\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось удалить группу турнира, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n// возвращает с сервера все турниры для админа по его UserProfileId\r\nexport const getMyTournaments = (userProfileId = -1) => {\r\n    return dispatch => {\r\n        if (userProfileId != null){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            \r\n                \r\n                CityTournamentAdminAPI.getAllByAdminProfileId(userProfileId)\r\n                    .then(pl => {\r\n                        if (pl && pl.data.length > 0) {\r\n                            \r\n                            dispatch(setMyTournaments(pl.data));\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось загрузить турниры\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось загрузить турниры: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            \r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось загрузить турниры\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось загрузить турниры, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// возвращает с сервера все турниры города для пользователя\r\nexport const getTournamentsByCityId = (cityUmbId = -1) => {\r\n    return dispatch => {\r\n        if (cityUmbId != null){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            \r\n                \r\n            TournamentAPI.getAllTournamentsInCityByCityUmbracoId(cityUmbId)\r\n                    .then(pl => {\r\n                        if (pl && pl.data.length > 0) {\r\n                            \r\n                            dispatch(setTournaments(pl.data));\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось загрузить турниры\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        debugger\r\n                        dispatch(setErrorMessage(\"Не удалось загрузить турниры: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            \r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось загрузить турниры\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось загрузить турниры, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// возвращает с сервера турнирные таблицы групп/лиг выбранного турнира\r\nexport const getTournamentTablesByTournamentId = (tournamentId = -1) => {\r\n    return dispatch => {\r\n        if (tournamentId != null){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            \r\n                \r\n            TournamentAPI.getTournamentTablesByTournamentId(tournamentId)\r\n                    .then(pl => {\r\n                        if (pl && pl.data.length > 0) {\r\n                            \r\n                            dispatch(setTournamentTables(pl.data));\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось загрузить турнирные таблицы\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось загрузить турнирные таблицы: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            \r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось загрузить турнирные таблицы\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось загрузить турнирные таблицы, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default tournamentReducer;","import { setGlobalPopout, setErrorMessage } from \"./systemReducer\";\r\nimport { TeamAdminAPI, TeamAPI, CityTournamentAdminAPI } from './../utils/api/api.js'\r\nimport { TeamAdmins } from './constants/commonConstants'\r\n\r\nimport { authQueryString } from './../utils/api/server';\r\n\r\nlet demoCityTeamAdmins = TeamAdmins;\r\n\r\nconst TEAM_SET_ALL_TEAMS = \"TEAM_SET_ALL_TEAMS\";\r\nconst TEAM_SET_SELECTED_TEAM = \"TEAM_SET_SELECTED_TEAM\";\r\nconst TEAM_SET_MYTEAM = \"TEAM_SET_MYTEAM\";\r\nconst TEAM_ADD_MYTEAM = \"TEAM_ADD_MYTEAM\";\r\nconst TEAM_DELETE_MYTEAM = \"TEAM_DELETE_MYTEAM\";\r\nconst TEAM_SET_MODE = \"TEAM_SET_MODE\";\r\nconst TEAM_SET_ALL_CITYTEAMADMINS = \"TEAM_SET_ALL_CITYTEAMADMINS\";\r\nconst TEAM_SET_WHEN_BORN = \"TEAM_SET_WHEN_BORN\";\r\nconst TEAM_SET_NAME = \"TEAM_SET_NAME\";\r\nconst TEAM_SET_DETAILS = \"TEAM_SET_DETAILS\";\r\nconst TEAM_SET_REGLAMENT = \"TEAM_SET_REGLAMENT\";\r\nconst TEAM_DEL_GROUP = \"TEAM_DEL_GROUP\";\r\nconst TEAM_ADD_GROUP = \"TEAM_ADD_GROUP\";\r\nconst TEAM_SET_GROUP = \"TEAM_RESET_TEAM\";\r\nconst TEAM_RESET_TEAM = \"TEAM_SET_GROUP\";\r\nconst TEAM_PUBLISH = \"TEAM_PUBLISH\";\r\nconst TEAM_UNPUBLISH = \"TEAM_UNPUBLISH\";\r\nconst TEAM_SET_MY_TEAMS = \"TEAM_SET_MY_TEAMS\";\r\nconst TEAM_SET_TEAM_BY_ID = \"TEAM_SET_TEAM_BY_ID\";\r\n\r\nconst currentDate = new Date();\r\n\r\nconst emptyTeam = {\r\n    Id: -1,\r\n    Name: \"\",\r\n    Year: 0,\r\n    WhenBorn: { day: currentDate.getDay(), month: currentDate.getMonth() + 1, year: currentDate.getFullYear() },\r\n    Details: \"\",\r\n    Logo: \"\",\r\n    CityId: -1,\r\n    TournamentGroups: [],\r\n    Admins: [],\r\n    Matches: [],\r\n    Players: [],\r\n    Published: false,\r\n    Deleted: false,\r\n}\r\n\r\nconst initState = {\r\n    teams: [], // все турниры\r\n    selected: emptyTeam, // выбранный для просмотра/создания/редактирования турнир\r\n    myTeams: [], // те, что я создал\r\n    cityTeamAdmins: [], // админы текущего города\r\n    mode: \"view\", // режим отображения команды (\"view\" - просмотр, \"add\" - добавление, \"edit\" - редактирование)\r\n}\r\n\r\n\r\nlet teamReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case TEAM_SET_ALL_TEAMS: {\r\n            return {\r\n                ...state,\r\n                teams: [...action.teams],\r\n            };\r\n        }\r\n        case TEAM_SET_MY_TEAMS: {\r\n           // debugger\r\n            return {\r\n                ...state,\r\n                myTeams: [...action.myTeams],\r\n            };\r\n        }\r\n        case TEAM_SET_MODE: {\r\n            return {\r\n                ...state,\r\n                mode: action.mode,\r\n            };\r\n        }\r\n        case TEAM_ADD_MYTEAM: {\r\n\r\n            return {\r\n                ...state,\r\n                myTeams: [...state.myTeams, { ...action.myteam }]\r\n            };\r\n        }\r\n        case TEAM_SET_MYTEAM: {\r\n\r\n            return {\r\n                ...state,\r\n                myTeams: [...state.myTeams.map(tour => {\r\n\r\n                    if (tour.Id == action.myteam.Id) {\r\n                        {\r\n                            tour = { ...action.myteam, };\r\n                        }\r\n                    }\r\n                    return tour;\r\n                })],\r\n            };\r\n        }\r\n        case TEAM_DELETE_MYTEAM: {\r\n\r\n            return {\r\n                ...state,\r\n                myTeams: [...state.myTeams.filter(tour => tour.Id != action.myteam.Id)],\r\n            };\r\n        }\r\n        case TEAM_SET_SELECTED_TEAM: {\r\n            let maxT = -1, maxA = -1, maxM = -1, maxP = -1;\r\n            debugger\r\n\r\n\r\n            state.selected.TournamentGroups.forEach(item => {\r\n                if (item.KeyId != undefined) {\r\n                    if (item.KeyId > maxT)\r\n                        maxT = item.KeyId;\r\n                }\r\n            });\r\n            state.selected.Admins.forEach(item => {\r\n                if (item.KeyId != undefined) {\r\n                    if (item.KeyId > maxA)\r\n                        maxA = item.KeyId;\r\n                }\r\n            });\r\n            state.selected.Matches.forEach(item => {\r\n                if (item.KeyId != undefined) {\r\n                    if (item.KeyId > maxM)\r\n                        maxM = item.KeyId;\r\n                }\r\n            });\r\n            state.selected.Players.forEach(item => {\r\n                if (item.KeyId != undefined) {\r\n                    if (item.KeyId > maxP)\r\n                        maxP = item.KeyId;\r\n                }\r\n            });\r\n\r\n\r\n            return {\r\n                ...state,\r\n                selected: {\r\n                    ...action.team,\r\n                    WhenBorn: {\r\n                        day: new Date(action.team.WhenBorn).getDate(),\r\n                        month: new Date(action.team.WhenBorn).getMonth() + 1,\r\n                        year: new Date(action.team.WhenBorn).getFullYear()\r\n                    },\r\n                    TournamentGroups: [...action.team.TournamentGroups.map(item => {\r\n                        return { ...item, KeyId: ++maxT }\r\n                    })],\r\n                    Admins: [...action.team.Admins.map(item => {\r\n                        return { ...item, KeyId: ++maxA }\r\n                    })],\r\n                    Matches: [...action.team.Matches.map(item => {\r\n                        return { ...item, KeyId: ++maxM }\r\n                    })],\r\n                    Players: [...action.team.Players.map(item => {\r\n                        return { ...item, KeyId: ++maxP }\r\n                    })],\r\n                },\r\n            };\r\n        }\r\n        case TEAM_RESET_TEAM: {\r\n            return {\r\n                ...state,\r\n                selected: { ...emptyTeam },\r\n            };\r\n        }\r\n        case TEAM_SET_ALL_CITYTEAMADMINS: {\r\n            return {\r\n                ...state,\r\n                cityTeamAdmins: [...action.cityTeamAdmins],\r\n            };\r\n        }\r\n        case TEAM_SET_WHEN_BORN: {\r\n            return {\r\n                ...state,\r\n                selected: {\r\n                    ...state.selected,\r\n                    WhenBorn: action.when,\r\n                },\r\n            };\r\n        }\r\n        case TEAM_SET_NAME: {\r\n            return {\r\n                ...state,\r\n                selected: {\r\n                    ...state.selected,\r\n                    Name: action.value,\r\n                },\r\n            };\r\n        }\r\n        case TEAM_SET_REGLAMENT: {\r\n            return {\r\n                ...state,\r\n                selected: {\r\n                    ...state.selected,\r\n                    Reglament: action.value,\r\n                },\r\n            };\r\n        }\r\n        case TEAM_SET_DETAILS: {\r\n            return {\r\n                ...state,\r\n                selected: {\r\n                    ...state.selected,\r\n                    Details: action.value,\r\n                },\r\n            };\r\n        }\r\n        case TEAM_PUBLISH: {\r\n            return {\r\n                ...state,\r\n                selected: {\r\n                    ...state.selected,\r\n                    Published: true,\r\n                },\r\n            };\r\n        }\r\n        case TEAM_UNPUBLISH: {\r\n            return {\r\n                ...state,\r\n                selected: {\r\n                    ...state.selected,\r\n                    Published: false,\r\n                },\r\n            };\r\n        }\r\n        case TEAM_ADD_GROUP: {\r\n            let max = -1;\r\n            state.selected.TeamGroups.forEach(item => {\r\n                if (item.KeyId != undefined) {\r\n                    if (item.KeyId > max)\r\n                        max = item.KeyId;\r\n                }\r\n            });\r\n            return {\r\n                ...state,\r\n                selected: {\r\n                    ...state.selected,\r\n                    TeamGroups: [...state.selected.TeamGroups,\r\n                    {\r\n                        KeyId: max + 1,\r\n                        Name: action.groupName\r\n                    }],\r\n                },\r\n            };\r\n        }\r\n        case TEAM_SET_GROUP: {\r\n            return {\r\n                ...state,\r\n                selected: {\r\n                    ...state.selected,\r\n                    TeamGroups: state.selected.TeamGroups.map(item => {\r\n                        if (item.Id == action.groupId) {\r\n                            item.Id = action.groupId;\r\n                            item.KeyId = action.groupId;\r\n                            item.Name = action.groupName;\r\n                        }\r\n                        return item;\r\n                    }),\r\n                },\r\n            };\r\n        }\r\n        case TEAM_DEL_GROUP: {\r\n            return {\r\n                ...state,\r\n                selected: {\r\n                    ...state.selected,\r\n                    TeamGroups: state.selected.TeamGroups.filter(item => item.KeyId != action.groupId),\r\n                },\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\nexport const setTeams = (teams) => {\r\n    return {\r\n        type: TEAM_SET_ALL_TEAMS,\r\n        teams\r\n    }\r\n}\r\n\r\nexport const setMyTeam = (myteam) => {\r\n    return {\r\n        type: TEAM_SET_MYTEAM,\r\n        myteam\r\n    }\r\n}\r\n\r\nexport const addMyTeam = (myteam) => {\r\n    return {\r\n        type: TEAM_ADD_MYTEAM,\r\n        myteam\r\n    }\r\n}\r\n\r\nexport const setSelectedTeam = (team) => {\r\n    debugger\r\n    return {\r\n        type: TEAM_SET_SELECTED_TEAM,\r\n        team\r\n    }\r\n}\r\n\r\nexport const deleteMyTeam = (myteam) => {\r\n    return {\r\n        type: TEAM_DELETE_MYTEAM,\r\n        myteam\r\n    }\r\n}\r\n\r\nexport const setMyTeams = (myTeams) => {\r\n    return {\r\n        type: TEAM_SET_MY_TEAMS,\r\n        myTeams\r\n    }\r\n}\r\n\r\nexport const teamPublish = () => {\r\n    return {\r\n        type: TEAM_PUBLISH,\r\n    }\r\n}\r\n\r\nexport const teamUnpublish = () => {\r\n    return {\r\n        type: TEAM_UNPUBLISH,\r\n    }\r\n}\r\n\r\nexport const resetTeam = () => {\r\n    return {\r\n        type: TEAM_RESET_TEAM\r\n    }\r\n}\r\n\r\nexport const setTeamWhenBorn = (when) => {\r\n    return {\r\n        type: TEAM_SET_WHEN_BORN,\r\n        when\r\n    }\r\n}\r\n\r\n\r\nexport const setTeamMode = (mode) => {\r\n    return {\r\n        type: TEAM_SET_MODE,\r\n        mode\r\n    }\r\n}\r\n\r\nexport const setTeamName = (value) => {\r\n    return {\r\n        type: TEAM_SET_NAME,\r\n        value\r\n    }\r\n}\r\n\r\nexport const setTeamDetails = (value) => {\r\n    return {\r\n        type: TEAM_SET_DETAILS,\r\n        value\r\n    }\r\n}\r\n\r\nexport const setTeamReglament = (value) => {\r\n    return {\r\n        type: TEAM_SET_REGLAMENT,\r\n        value\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const setCityTeamAdmins = (cityTeamAdmins) => {\r\n    return {\r\n        type: TEAM_SET_ALL_CITYTEAMADMINS,\r\n        cityTeamAdmins\r\n    }\r\n}\r\n\r\nexport const delGroupFromTeam = (teamId, groupId) => {\r\n    return {\r\n        type: TEAM_DEL_GROUP,\r\n        teamId,\r\n        groupId\r\n    }\r\n}\r\n\r\nexport const addGroupToTeam = (teamId, groupName) => {\r\n    return {\r\n        type: TEAM_ADD_GROUP,\r\n        teamId,\r\n        groupName\r\n    }\r\n}\r\n\r\nexport const editGroupInTeam = (teamId, groupId, groupName) => {\r\n    return {\r\n        type: TEAM_SET_GROUP,\r\n        teamId,\r\n        groupId,\r\n        groupName\r\n    }\r\n}\r\n\r\n\r\n// все админы турниров города\r\nexport const getAllCityTeamAdmins = (startindex = 0) => {\r\n    return dispatch => {\r\n\r\n        dispatch(setGlobalPopout(true))\r\n        if (authQueryString && authQueryString.length > 0)\r\n            TeamAdminAPI.getAll(startindex)\r\n                .then(pl => {\r\n                    if (pl && pl.data.length > 0) {\r\n\r\n                        dispatch(setCityTeamAdmins(pl.data));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n\r\n                        dispatch(setCityTeamAdmins(demoCityTeamAdmins))\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                })\r\n                .catch(error => {\r\n\r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n\r\n            dispatch(setCityTeamAdmins(demoCityTeamAdmins))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// все админы города с сервера по Id города\r\nexport const getAllCityTeamAdminsByCityId = (cityTeamId, startindex = 0) => {\r\n    return dispatch => {\r\n\r\n        dispatch(setGlobalPopout(true))\r\n\r\n        if (authQueryString && authQueryString.length > 0)\r\n            TeamAdminAPI.getAllInCityByCityId(cityTeamId, startindex)\r\n                .then(pl => {\r\n                    if (pl && pl.data.length > 0) {\r\n\r\n                        dispatch(setCityTeamAdmins(pl.data));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        dispatch(setCityTeamAdmins(demoCityTeamAdmins))\r\n                        dispatch(setGlobalPopout(false))\r\n\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            dispatch(setCityTeamAdmins(demoCityTeamAdmins))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// сохраняет (добавляет) в базу новую команду\r\nexport const saveSelectedTeam = (team = null, userprofile = null) => {\r\n    return dispatch => {\r\n        dispatch(setGlobalPopout(true))\r\n\r\n        if (team != null && userprofile != null) {\r\n            if (authQueryString && authQueryString.length > 0)\r\n            {\r\n                if (team.Id < 0) // добавление\r\n                {\r\n                    TeamAdminAPI.saveTeam(team, userprofile)\r\n                        .then(pl => {\r\n                            if (pl && pl.data) {\r\n                                dispatch(addMyTeam(pl.data));\r\n                                dispatch(resetTeam());\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                            else {\r\n                                dispatch(setErrorMessage(\"Не удалось сохранить команду\"))\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch(setErrorMessage(\"Не удалось сохранить команду: \" + error))\r\n                            dispatch(setGlobalPopout(false))\r\n                        })\r\n                }\r\n                else{ // изменение\r\n                    TeamAdminAPI.saveTeam(team, userprofile)\r\n                        .then(pl => {\r\n                            if (pl && pl.data.length > 0) {\r\n                                dispatch(setMyTeam(pl.data));\r\n                                dispatch(resetTeam());\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                            else {\r\n                                dispatch(setErrorMessage(\"Не удалось сохранить команду\"))\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch(setErrorMessage(\"Не удалось сохранить команду: \" + error))\r\n                            dispatch(setGlobalPopout(false))\r\n                        })\r\n                }\r\n            }\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось сохранить команду: не удалось авторизоваться\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось сохранить команду, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// опубликовывает турнир\r\nexport const publishTeam = (team = null, userprofile = null, publish = false) => {\r\n\r\n    return dispatch => {\r\n        dispatch(setGlobalPopout(true))\r\n\r\n        if ((team != null) || (userprofile != null)) {\r\n            if (authQueryString && authQueryString.length > 0)\r\n                TeamAdminAPI.publishTeam(team, userprofile, publish)\r\n                    .then(pl => {\r\n\r\n                        if (pl && pl.data) {\r\n                            // изменить полученный турнир в списке\r\n                            dispatch(setMyTeam(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось опубликовать турнир\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось опубликовать турнир: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось опубликовать турнир\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось опубликовать турнир, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// удаляет команду\r\nexport const deleteTeam = (team = null, userprofile = null) => {\r\n\r\n    return dispatch => {\r\n        dispatch(setGlobalPopout(true))\r\n\r\n        if ((team != null) || (userprofile != null)) {\r\n            if (authQueryString && authQueryString.length > 0)\r\n                TeamAdminAPI.deleteTeam(team, userprofile)\r\n                    .then(pl => {\r\n                        if (pl && pl.data) {\r\n                            // изменить полученный турнир в списке\r\n                            dispatch(deleteMyTeam(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось удалить команду\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось удалить команду: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось удалить команду\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось удалить команду, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// возвращает с сервера все турниры для админа по его UserProfileId\r\nexport const getMyTeams = (userProfileId = -1) => {\r\n    return dispatch => {\r\n        dispatch(setGlobalPopout(true))\r\n\r\n        if (userProfileId != -1) {\r\n            if (authQueryString && authQueryString.length > 0)\r\n\r\n\r\n                TeamAdminAPI.getAllByAdminProfileId(userProfileId)\r\n                    .then(pl => {\r\n                        if (pl && pl.data.length > 0) {\r\n\r\n                            dispatch(setMyTeams(pl.data));\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось загрузить команды\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось загрузить команды: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось загрузить команды\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось загрузить команды, в функцию передан userprofile = -1\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// возвращает с сервера все турниры для админа по его UserProfileId\r\nexport const getTeamInfo = (team = null) => {\r\n    return dispatch => {\r\n        dispatch(setGlobalPopout(true))\r\n\r\n        if (team != null) {\r\n            if (authQueryString && authQueryString.length > 0)\r\n\r\n\r\n            TeamAPI.getTeamInfoByTeamId(team.Id)\r\n                    .then(pl => {\r\n                        \r\n                        if (pl && pl.data) {\r\n                            \r\n                            dispatch(setSelectedTeam(pl.data));\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось загрузить команду\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось загрузить команду: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось загрузить команду\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось загрузить команду, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default teamReducer;","import React, { Component } from 'react'\r\nimport {Button, PanelHeaderBack } from '@vkontakte/vkui'\r\nimport { withHistorySave } from '../HOCs/withHistorySave'\r\n\r\nconst ButtonWithHistory = (props) => {\r\n  \r\n \r\n    return (\r\n        <Button isBack={false} {...props}></Button>\r\n        \r\n    )\r\n}\r\n\r\nexport default withHistorySave(ButtonWithHistory)","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, Button, InfoRow, Header, FormItem, Group } from '@vkontakte/vkui'\r\nimport {defaultPhotoPath} from '../../../../store/dataTypes/common'\r\nimport TeamAdminList from './TeamAdminList'\r\nimport { setActiveMenuItem } from './../../../../store/mainMenuReducer';\r\nimport {setTournamentMode, getMyTournaments, publishTournament, deleteTournament, setSelectedTournament, resetTournament,} from './../../../../store/tournamentsReducer'\r\nimport {resetTeam, getMyTeams, setTeamMode, setSelectedTeam, deleteTeam} from './../../../../store/teamsReducer'\r\nimport { connect } from 'react-redux';\r\nimport ButtonWithHistory from '../../Common/WithHistory/ButtonWithHistory'\r\n\r\n\r\nconst TeamAdminPanel = (props) => {\r\n\r\n\t// let [myTournaments, setMyTournaments] = useState([]);\r\n    const PublishTeam = (team, publish) => {\r\n        \r\n        props.publishTeam(team, props.myProfile, publish);\r\n    }\r\n   \r\n    const DeleteTeam = (team) => {\r\n        props.deleteTeam(team, props.myProfile);\r\n    }\r\n    \r\n    const CellClick = (item) => {\r\n        \r\n        props.setSelectedTeam(item);\r\n        props.setTeamMode(\"edit\");\r\n    }\r\n    \r\n    \r\n    const ButtonNewClick = () => {\r\n        props.resetTeam();\r\n        props.setTeamMode(\"add\");\r\n    }\r\n\r\n    useEffect(() =>{\r\n        \r\n        props.getMyTeams(props.myProfile.UserProfileId);\r\n        \r\n    }, props.myProfile)\r\n\r\n        return (\r\n            <>\r\n                <FormItem>\r\n                    <InfoRow>При заявке указывается желаемая группа. Организатор в праве взять в другую группу</InfoRow>\r\n                </FormItem>\r\n                <FormItem>\r\n                    <ButtonWithHistory handleClick={ButtonNewClick} toMenuName=\"teamitem\" data-story=\"teamitem\">Создать команду</ButtonWithHistory>\r\n                </FormItem>\r\n                <Group>\r\n                    <TeamAdminList \r\n                    CellClick={CellClick}\r\n                    Button1Handle = {PublishTeam}\r\n                    Button2Handle = {DeleteTeam}\r\n                    List={props.team.myTeams}\r\n                    >\r\n                        \r\n                    </TeamAdminList>\r\n                </Group>\r\n                \r\n            </>\r\n        )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tmainMenu: state.mainMenu,\r\n\t\tmyProfile: state.profileEntity.myProfile,\r\n        tournament: state.tournamentsEntity,\r\n        team: state.teamsEntity,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    resetTeam, getMyTeams, setTeamMode, setSelectedTeam, deleteTeam,\r\n\tsetActiveMenuItem, setTournamentMode, getMyTournaments, publishTournament, deleteTournament, setSelectedTournament, resetTournament,\r\n})(TeamAdminPanel);","import { setGlobalPopout, setErrorMessage } from \"./systemReducer\";\r\nimport { BidTeamAPI, CityTournamentAdminAPI } from './../utils/api/api.js'\r\nimport { BidTeam } from './constants/commonConstants'\r\nimport { EmptyTournament } from './constants/commonConstants'\r\n\r\n\r\nimport { authQueryString } from './../utils/api/server';\r\n\r\nlet demoBidTeam = BidTeam;\r\n\r\nconst BID_TEAM_SET_TOURNAMENTS = \"BID_TEAM_SET_TOURNAMENTS\";\r\nconst BID_TEAM_SET_MY_BIDS = \"BID_TEAM_SET_MY_BIDS\";\r\nconst BID_TEAM_SET_SELECTED_TOURNAMENT_GROUPS = \"BID_TEAM_SET_SELECTED_TOURNAMENT_GROUPS\";\r\nconst BID_TEAM_SET_SELECTED_MODE = \"BID_TEAM_SET_SELECTED_MODE\";\r\nconst BID_TEAM_ADD_MY_BID = \"BID_TEAM_ADD_MY_BID\";\r\nconst BID_TEAM_DEL_MY_BID = \"BID_TEAM_DEL_MY_BID\";\r\nconst BID_TEAM_APPROVE_BID = \"BID_TEAM_APPROVE_BID\";\r\n\r\n\r\nconst currentDate = new Date();\r\n\r\nconst emptyBidTeam = BidTeam\r\n\r\nexport const BID_TEAM_SELECT_MODE_TOURNAMENTS = \"tournaments\"\r\nexport const BID_TEAM_SELECT_MODE_GROUPS = \"groups\"\r\nexport const BID_TEAM_MODE_VIEW = \"view\"\r\n\r\nconst initState = {\r\n    tournaments: [], // все турниры\r\n    selected: {...emptyBidTeam}, // выбранная для просмотра/создания/редактирования заявка\r\n    selectedTournament: {...EmptyTournament},\r\n    myBids: [], // те, что я создал\r\n    mode: BID_TEAM_MODE_VIEW, // режим отображения турнира (\"view\" - просмотр, \"add\" - добавление, \"edit\" - редактирование)\r\n    selectMode: BID_TEAM_SELECT_MODE_TOURNAMENTS // второй вариант - BID_TEAM_SELECT_MODE_GROUPS\r\n}\r\n\r\n\r\nlet bidBidTeamReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case BID_TEAM_SET_TOURNAMENTS: {\r\n            return {\r\n                ...state,\r\n                tournaments: [...action.tournaments],\r\n            };\r\n        }\r\n        case BID_TEAM_SET_SELECTED_TOURNAMENT_GROUPS: {\r\n            return {\r\n                ...state,\r\n                selectedTournament: {...state.selectedTournament, \r\n                    TournamentGroups: [...action.groups],\r\n                },\r\n            };\r\n        }\r\n        case BID_TEAM_SET_SELECTED_MODE: {\r\n            return {\r\n                ...state,\r\n                selectMode: action.mode,\r\n            };\r\n        }\r\n        case BID_TEAM_SET_MY_BIDS: {\r\n            return {\r\n                ...state,\r\n                myBids: [...action.bids],\r\n            };\r\n        }\r\n        case BID_TEAM_ADD_MY_BID: {\r\n            //debugger\r\n            return {\r\n                ...state,\r\n                myBids: [...state.myBids, action.bid],\r\n            };\r\n        }\r\n        case BID_TEAM_DEL_MY_BID: {\r\n            //debugger\r\n            return {\r\n                ...state,\r\n                myBids: [...state.myBids.filter(x => x.Id != action.bid.Id)],\r\n            };\r\n        }\r\n        case BID_TEAM_APPROVE_BID: {\r\n            debugger\r\n            return {\r\n                ...state,\r\n                \r\n            };\r\n        }\r\n        \r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\nexport const setTournaments = (tournaments) => {\r\n    return {\r\n        type: BID_TEAM_SET_TOURNAMENTS,\r\n        tournaments\r\n    }\r\n}\r\n\r\nexport const setMyBids = (bids) => {\r\n    return {\r\n        type: BID_TEAM_SET_MY_BIDS,\r\n        bids\r\n    }\r\n}\r\n\r\nexport const approveBid = (bid) => {\r\n    return {\r\n        type: BID_TEAM_APPROVE_BID,\r\n        bid\r\n    }\r\n}\r\n\r\nexport const addMyBid = (bid) => {\r\n    return {\r\n        type: BID_TEAM_ADD_MY_BID,\r\n        bid\r\n    }\r\n}\r\n\r\nexport const delMyBid = (bid) => {\r\n    return {\r\n        type: BID_TEAM_DEL_MY_BID,\r\n        bid\r\n    }\r\n}\r\n\r\nexport const setBidTeamSelectedTournamentGroups = (groups) => {\r\n    return {\r\n        type: BID_TEAM_SET_SELECTED_TOURNAMENT_GROUPS,\r\n        groups\r\n    }\r\n}\r\n\r\nexport const setBidTeamSelectedMode = (mode) => {\r\n    return {\r\n        type: BID_TEAM_SET_SELECTED_MODE,\r\n        mode\r\n    }\r\n}\r\n\r\n// все админы турниров города\r\nexport const getActualTournamentsInCity = (userprofile = null, team = null) => {\r\n    return dispatch => {\r\n\r\n        dispatch(setGlobalPopout(true))\r\n        \r\n        if (authQueryString && authQueryString.length > 0)\r\n            BidTeamAPI.getActualTournaments(userprofile, team)\r\n                .then(pl => {\r\n                    \r\n                    if (pl && pl.data.length > 0) {\r\n\r\n                        dispatch(setTournaments(pl.data));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n\r\n                        //dispatch(setCityBidTeamAdmins(demoBidTeam))\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                })\r\n                .catch(error => {\r\n\r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n\r\n            dispatch(setCityBidTeamAdmins(demoBidTeam))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n// запрос групп турнира\r\nexport const getTournamentGroups = (tournament = null) => {\r\n    \r\n    return dispatch => {\r\n        if (tournament != null){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            CityTournamentAdminAPI.getTournamentGroups(tournament)\r\n                    .then(pl => {\r\n                        \r\n                        if (pl) {\r\n                           // debugger\r\n                            dispatch(setBidTeamSelectedTournamentGroups(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось получить список групп турнира\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось получить список групп турнира: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось получить список групп турнира\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось получить список групп турнира, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// запрос заявок команды\r\nexport const getTeamBidsByTeam = (userprofile = null, team = null) => {\r\n    debugger\r\n    return dispatch => {\r\n        if ((team != null) && (userprofile != null) && (team.Id >= 0)){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            BidTeamAPI.getTeamBidsByTeam(userprofile, team)\r\n                    .then(pl => {\r\n                        \r\n                        if (pl) {\r\n                            dispatch(setMyBids(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось получить список заявок команды\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось получить список заявок команды: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось получить список заявок команды\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось получить список заявок команды, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// добавление заявки от команды\r\nexport const addBidTeamToTournamentGroup = (tournamentgroup = null, userprofile = null, team = null , teamName = \"\",) => {\r\n    \r\n    return dispatch => {\r\n        if ((tournamentgroup != null) && (userprofile != null) && (team != null)){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            BidTeamAPI.addBidTeamToTournament(tournamentgroup, userprofile, team, teamName)\r\n                    .then(pl => {\r\n                        \r\n                        if (pl) {\r\n                            dispatch(addMyBid(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось добавить заявку команды\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось добавить заявку команды: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось добавить заявку команды\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось добавить заявку команды, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// удаление заявки от команды\r\nexport const cancelBidTeamToTournamentGroup = (bid = null, userprofile = null, team = null) => {\r\n    \r\n    return dispatch => {\r\n        if ((team != null) && (userprofile != null) && (bid != null)){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            BidTeamAPI.delBidTeamToTournament(bid, userprofile, team)\r\n            .then(pl => {\r\n                        \r\n                if ((pl) && (pl.data) && (pl.data.Deleted)) {\r\n                            dispatch(delMyBid(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось удалить заявку команды\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось удалить заявку команды: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n                    else {\r\n                        dispatch(setErrorMessage(\"Не удалось удалить заявку команды\"))\r\n                        dispatch(setGlobalPopout(false))\r\n                        \r\n                    }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось удалить заявку команды, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n            \r\n        }\r\n    }\r\n}\r\n\r\n\r\n// согласование/отмена заявки от команды\r\nexport const approveBidTeamToTournament = (bid = null, userprofile = null, tournament = null, approve = false , comment = \"\",) => {\r\n    \r\n    return dispatch => {\r\n        if ((tournamentgroup != null) && (userprofile != null) && (team != null)){\r\n            if (authQueryString && authQueryString.length > 0)\r\n            BidTeamAPI.approveBidTeamToTournament(bid, userprofile, tournament, approve, comment)\r\n                    .then(pl => {\r\n                        \r\n                        if (pl) {\r\n                            dispatch(approveBid(pl.data))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                        else {\r\n                            dispatch(setErrorMessage(\"Не удалось согласовать заявку команды\"))\r\n                            dispatch(setGlobalPopout(false))\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch(setErrorMessage(\"Не удалось согласовать заявку команды: \" + error))\r\n                        dispatch(setGlobalPopout(false))\r\n                    })\r\n            else {\r\n                dispatch(setErrorMessage(\"Не удалось согласовать заявку команды\"))\r\n                dispatch(setGlobalPopout(false))\r\n\r\n            }\r\n        }\r\n        else {\r\n            dispatch(setErrorMessage(\"Не удалось согласовать заявку команды, в функцию передан null\"))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default bidBidTeamReducer;","import React from 'react'\r\nimport { Cell } from '@vkontakte/vkui'\r\n\r\n\r\n\r\n\r\nconst ListItem = (props) => {\r\n    return (\r\n            <Cell key={props.KeyId != -1 ? props.KeyId : null} \r\n            removable \r\n            onRemove={() => props.Delete(props.KeyId)}\r\n            >\r\n                {props.Name}\r\n            </Cell>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default ListItem","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, InfoRow, Group, List, Cell, Button } from '@vkontakte/vkui'\r\nimport { defaultPhotoPath } from '../../../../store/dataTypes/common'\r\nimport ButtonWithNotify from '../../Common/WithNotify/ButtonWithNotify'\r\n\r\n\r\nconst BidList = (props) => {\r\n\r\n    //const [tournamentList, setTournamentList] = useState(props.tournaments)\r\n    // const list = props.tournaments.map(x => {\r\n    //     return <TournamentListItem>{x.Name}</TournamentListItem>\r\n    // })\r\n\r\n    return (\r\n        <Group>\r\n            <List>\r\n                {(props.List && props.List.length > 0) ?\r\n                    props.List.map(item => {\r\n                        debugger\r\n                        if (item.Approved && !item.Published)\r\n                            return (\r\n                                <RichCell\r\n                                    caption={item.AdminTournamentComment.trim() && `Комментарий организатора: ${item.AdminTournamentComment.trim()}`}\r\n                                    text={<b style={{\"color\": \"green\"}}>Заявка на турнир одобрена</b>}\r\n                                >\r\n                                    { `${item.TeamName} - ${item.TournamentGroup.Name} - ${item.TournamentGroup.Tournament.Name} (${item.TournamentGroup.Tournament.Founder && item.TournamentGroup.Tournament.Founder.Surname} ${item.TournamentGroup.Tournament.Founder && item.TournamentGroup.Tournament.Founder.Name[0]}.)`}\r\n                                    \r\n                                </RichCell>\r\n                            )\r\n                        else if (!item.Approved && !item.Published)\r\n                            return (\r\n                                <RichCell\r\n                                    //onClick={() => props.CellClick(item)}\r\n                                    caption={item.AdminTournamentComment.trim() && `Комментарий организатора: ${item.AdminTournamentComment.trim()}`}\r\n                                    text={<b style={{\"color\": \"red\"}}>Заявка на турнир отклонена</b>}\r\n                                    //actions={<Button mode=\"destructive\" onClick={() => props.Button1Handle(item)}>Отменить заявку</Button>}\r\n                                >\r\n                                    { `${item.TeamName} - ${item.TournamentGroup.Name} - ${item.TournamentGroup.Tournament.Name} (${item.TournamentGroup.Tournament.Founder && item.TournamentGroup.Tournament.Founder.Surname} ${item.TournamentGroup.Tournament.Founder && item.TournamentGroup.Tournament.Founder.Name[0]}.)`}\r\n                                    \r\n                                </RichCell>\r\n                            )\r\n                        else\r\n                            return (\r\n                                <RichCell\r\n                                    onClick={() => props.CellClick(item)}\r\n                                    caption={item.AdminTournamentComment.trim() && `Комментарий организатора: ${item.AdminTournamentComment.trim()}`}\r\n                                    actions={<ButtonWithNotify mode=\"destructive\" Message=\"Уверены, что хотите отменить заявку?\" Yes={() => props.Button1Handle(item)}>Отменить заявку</ButtonWithNotify>}\r\n                                >\r\n                                    { `${item.TeamName} - ${item.TournamentGroup.Name} - ${item.TournamentGroup.Tournament.Name} (${item.TournamentGroup.Tournament.Founder && item.TournamentGroup.Tournament.Founder.Surname} ${item.TournamentGroup.Tournament.Founder && item.TournamentGroup.Tournament.Founder.Name[0]}.)`}\r\n                                    \r\n                                </RichCell>\r\n                            )\r\n                    })\r\n                    : <InfoRow>У вас нет активных заявок</InfoRow>\r\n                }\r\n\r\n            </List>\r\n        </Group>\r\n    )\r\n}\r\n\r\nexport default BidList","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, InfoRow, Group, List } from '@vkontakte/vkui'\r\nimport RichCellWithHistory from '../../Common/WithHistory/RichCellWithHistory'\r\n\r\n\r\nconst BidTeamTournamentList = (props) => {\r\n\r\n    //const [tournamentList, setTournamentList] = useState(props.tournaments)\r\n    // const list = props.tournaments.map(x => {\r\n    //     return <TournamentListItem>{x.Name}</TournamentListItem>\r\n    // })\r\n    return (\r\n        <Group>\r\n            <List>\r\n                {(props.List && props.List.length > 0) ?\r\n                    props.List.map(item => {\r\n                        \r\n                        if (props.Bids && props.Bids.length > 0 && props.Bids.filter(x => x.TournamentGroup.TournamentId == item.Id).length > 0){\r\n                            //debugger\r\n                            return <>{props.Bids.map(bid => {\r\n                                debugger\r\n                                // просмотреть и вывести заявки\r\n                                if (!bid.Approved && !bid.Published && bid.TournamentGroup.TournamentId == item.Id){\r\n                                    debugger\r\n                                    return (\r\n                                        <RichCell\r\n                                            text=\"Предыдущая заявка была отклонена, можно повторить\"\r\n                                            caption={`Организатор: ${item.Founder.Surname} ${item.Founder.Name[0]}.`}\r\n                                            onClick={() => props.CellClick(item)}\r\n                                            \r\n                                        >\r\n                                            {item.Name}\r\n                                        </RichCell>\r\n                                    )}\r\n                                }\r\n                            )}</>\r\n                            \r\n\r\n\r\n                        }\r\n                        else{\r\n                            return (\r\n                                <RichCell\r\n                                    caption={`Организатор: ${item.Founder.Surname} ${item.Founder.Name[0]}.`}\r\n                                    onClick={() => props.CellClick(item)}\r\n                                >\r\n                                    {item.Name}\r\n                                </RichCell>\r\n                            )\r\n                        }\r\n                    })\r\n                    : <InfoRow>Нет активных к набору турниров</InfoRow>\r\n                }\r\n\r\n            </List>\r\n        </Group>\r\n    )\r\n}\r\n\r\nexport default BidTeamTournamentList","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, InfoRow, Group, List, Button, FormItem, Input } from '@vkontakte/vkui'\r\nimport ButtonWithNotify from '../../Common/WithNotify/ButtonWithNotify'\r\n\r\n\r\nconst BidTeamTournamentGroupsList = (props) => {\r\n\r\n    //const [tournamentList, setTournamentList] = useState(props.tournaments)\r\n    // const list = props.tournaments.map(x => {\r\n    //     return <TournamentListItem>{x.Name}</TournamentListItem>\r\n    // })\r\n    //debugger\r\n\r\n    return (\r\n        <Group header=\"Выберите группу/лигу\">\r\n            <Group mode=\"plain\">\r\n                <FormItem>\r\n                    <Button onClick={props.CellClick}>Назад к выбору турнира</Button>\r\n                </FormItem>\r\n                <FormItem top=\"Название команды на этот турнир\">\r\n                    <Input type=\"text\" defaultValue={props.TeamName} value={props.TeamName} onChange={e => props.SetTeamName(e.currentTarget.value)} placeholder={`Например, ${props.TeamName}`} />\r\n                </FormItem>\r\n                <List>\r\n                {(props.List && props.List.length > 0) ?\r\n                    props.List.map(item => {\r\n                        //debugger\r\n                        if (props.Bids && props.Bids.filter(x => (x.TournamentGroupId == item.Id && (!item.Approved && item.Published)) ).length > 0)\r\n                        {\r\n                            // // предположим существует несколкьо заявок на 1 группу, тогда нужно найти отклоненные и их не предлагать\r\n                            // props.Bids.map\r\n\r\n                            return (\r\n                                <RichCell\r\n                                after={\r\n                                    <ButtonWithNotify Message=\"Уверены, что хотите отменить заявку?\" Yes={() => props.Button2Handle(item)} mode=\"destructive\" >Отменить заявку</ButtonWithNotify>\r\n                                }\r\n                                >\r\n                                    {item.Name}\r\n                                </RichCell>\r\n                            )\r\n                        }\r\n                        else{\r\n                            return (\r\n                                <RichCell\r\n                                after={\r\n                                    <ButtonWithNotify Message=\"Заявляем команду в эту группу?\" Yes={() => props.Button1Handle(item)}>Заявиться сюда</ButtonWithNotify>\r\n                                }\r\n                                >\r\n                                    {item.Name}\r\n                                </RichCell>\r\n                            )\r\n                        }\r\n                        \r\n                    })\r\n                    : <InfoRow>Нет групп в турнире</InfoRow>\r\n                }\r\n\r\n            </List>\r\n            </Group>\r\n        </Group>\r\n    )\r\n}\r\n\r\nexport default BidTeamTournamentGroupsList","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, Button, InfoRow, Header } from '@vkontakte/vkui'\r\nimport {defaultPhotoPath} from '../../../../store/dataTypes/common'\r\nimport TeamAdminList from '../Team/TeamAdminList'\r\nimport { setActiveMenuItem } from './../../../../store/mainMenuReducer';\r\nimport { cancelBidTeamToTournamentGroup,  } from './../../../../store/bidTeamsReducer'\r\nimport {setTournamentMode, getMyTournaments, publishTournament, deleteTournament, setSelectedTournament, resetTournament,} from './../../../../store/tournamentsReducer'\r\nimport {resetTeam, getMyTeams, setTeamMode, setSelectedTeam, deleteTeam} from './../../../../store/teamsReducer'\r\n\r\nimport { connect } from 'react-redux';\r\nimport ButtonWithHistory from '../../Common/WithHistory/ButtonWithHistory'\r\nimport BidList from './BidList';\r\n\r\n\r\n\r\nconst BidTeamAdminPanel = (props) => {\r\n\r\n\t// let [myTournaments, setMyTournaments] = useState([]);\r\n    const PublishTeam = (team, publish) => {\r\n        \r\n        // props.publishTeam(team, props.myProfile, publish);\r\n    }\r\n   \r\n    const DeleteTeam = (team) => {\r\n        // props.deleteTeam(team, props.myProfile);\r\n    }\r\n    \r\n    const CellClick = (item) => {\r\n        \r\n        // props.setSelectedTeam(item);\r\n        // props.setTeamMode(\"edit\");\r\n    }\r\n\r\n    const CancelBid = (item) => {\r\n        \r\n        props.cancelBidTeamToTournamentGroup(item, props.myProfile, props.team.selected);\r\n        // props.setTeamMode(\"edit\");\r\n    }\r\n    \r\n    \r\n    const ButtonNewClick = () => {\r\n        // props.resetTeam();\r\n        // props.setTeamMode(\"add\");\r\n    }\r\n\r\n    useEffect(() =>{\r\n        \r\n        props.getMyTeams(props.myProfile.UserProfileId);\r\n    }, props.myProfile)\r\n\r\n        return (\r\n            <>\r\n                <InfoRow>При заявке указывается желаемая группа. Организатор в праве взять в другую группу</InfoRow>\r\n                {/* <ButtonWithHistory handleClick={ButtonNewClick} toMenuName=\"teamitem\" data-story=\"teamitem\">Создать заявку</ButtonWithHistory> */}\r\n                <BidList\r\n                    CellClick={CellClick}\r\n                    Button1Handle = {CancelBid}\r\n                    //Button2Handle = {DeleteTeam}\r\n                    List={props.tournamentsForBids.myBids}\r\n                >\r\n                    \r\n                </BidList>\r\n                \r\n            </>\r\n        )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tmainMenu: state.mainMenu,\r\n\t\tmyProfile: state.profileEntity.myProfile,\r\n        tournament: state.tournamentsEntity,\r\n        team: state.teamsEntity,\r\n        tournamentsForBids: state.bidTeamsEntity,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    cancelBidTeamToTournamentGroup, \r\n    resetTeam, getMyTeams, setTeamMode, setSelectedTeam, deleteTeam,\r\n\tsetActiveMenuItem, setTournamentMode, getMyTournaments, publishTournament, deleteTournament, setSelectedTournament, resetTournament,\r\n})(BidTeamAdminPanel);","import React, { useState , useEffect } from 'react'\r\nimport { RichCell, Avatar, FormLayout, FormItem, Input, InfoRow, Group, DatePicker, Textarea, File, CellButton, Button, Header, List, Cell } from '@vkontakte/vkui'\r\nimport { defaultPhotoPath } from '../../../../store/dataTypes/common'\r\nimport {\r\n    setTournamentWhenBegin, setTournamentWhenEnd, setTournamentName, setTournamentReglament, setTournamentDetails, delGroupFromTournamentByKeyId,\r\n    editGroupInTournament, addGroupToTournament, resetTournament, saveSelectedTournament\r\n} from '../../../../store/tournamentsReducer'\r\nimport {getActualTournamentsInCity, getTournamentGroups, setBidTeamSelectedMode, getTeamBidsByTeam, \r\n    addBidTeamToTournamentGroup, cancelBidTeamToTournamentGroup,  } from '../../../../store/bidTeamsReducer'\r\nimport {\r\n    setTeamWhenBorn, setTeamDetails, setTeamName, saveSelectedTeam, setTeamMode,\r\n} from '../../../../store/teamsReducer'\r\nimport { goToPanel } from '../../../../store/systemReducer'\r\nimport { Icon24Camera, Icon28AddOutline } from '@vkontakte/icons';\r\nimport { connect } from 'react-redux';\r\nimport ListItem from '../ListItem/ListItem';\r\nimport BidTeamList from '../BidTeam/BidList';\r\nimport { dateToString } from '../../../../utils/convertors/dateUtils';\r\nimport BidTeamTournamentList from '../BidTeam/BidTeamTournamentList';\r\nimport BidTeamTournamentGroupsList from '../BidTeam/BidTeamTournamentGroupsList';\r\nimport BidTeamAdminPanel from '../BidTeam/BidTeamAdminPanel'\r\nimport ButtonWithNotify from '../../Common/WithNotify/ButtonWithNotify'\r\n\r\n\r\n\r\n\r\n\r\nconst TeamItem = (props) => {\r\n    let currentDate = new Date();\r\n    let [teamNameOnTournament, SetTeamNameOnTournament] = useState(props.teams.selected.Name);\r\n\r\n    const teamDate = new Date(\r\n        props.teams.selected.WhenBorn.year,\r\n        props.teams.selected.WhenBorn.month-1,\r\n        props.teams.selected.WhenBorn.day\r\n        );\r\n\r\n    useEffect(() =>{\r\n        debugger\r\n        if ((props.teams.selected != null) && (props.teams.selected.Id >= 0)){\r\n            props.getActualTournamentsInCity(props.myProfile, props.teams.selected);\r\n            props.getTeamBidsByTeam(props.myProfile, props.teams.selected);\r\n        }\r\n    }, props.teams.selected)\r\n        \r\n    \r\n    const MakeBid = (tournamentgroup) => {\r\n        props.addBidTeamToTournamentGroup(tournamentgroup, props.myProfile, props.teams.selected, teamNameOnTournament);\r\n        props.setBidTeamSelectedMode(\"tournaments\")\r\n        //setTempGroupName(\"\");\r\n    }\r\n\r\n    const CancelBid = (tournamentgroup) => {\r\n        props.cancelBidTeamToTournamentGroup(tournamentgroup, props.myProfile, props.teams.selected)\r\n        props.setBidTeamSelectedMode(\"tournaments\")\r\n        //setTempGroupName(\"\");\r\n    }\r\n    \r\n    const SelectTournament = (tournament) => {\r\n        props.getTournamentGroups(tournament)\r\n        props.getTeamBidsByTeam(props.myProfile, props.teams.selected)\r\n        props.setBidTeamSelectedMode(\"groups\")\r\n    }\r\n    \r\n    const BackToTournaments = () => {\r\n        props.setBidTeamSelectedMode(\"tournaments\")\r\n    }\r\n    \r\n    const CancelTeamCreate = () => {\r\n        props.goToPanel(\"teamadmin\", false);\r\n    }\r\n\r\n\r\n    const SaveTeam = () => {\r\n        props.saveSelectedTeam(props.teams.selected, props.myProfile);\r\n        props.goToPanel(\"teamadmin\", false);\r\n        //props.setTeamMode(\"view\");\r\n    }\r\n\r\n    \r\n\r\n    switch (props.mode) {\r\n        case \"view\": {\r\n            return (\r\n                <>\r\n                    <FormItem top=\"Ваш город\">\r\n                        <InfoRow>{props.myProfile.CityUmbracoName}</InfoRow>\r\n                    </FormItem>\r\n                    <FormItem top=\"Название команды\">\r\n                        <InfoRow>{props.teams.selected.Name}</InfoRow>\r\n                    </FormItem>\r\n                    <FormItem top=\"Дата основания\">\r\n                        <InfoRow>{dateToString(teamDate)}</InfoRow>\r\n                    </FormItem>\r\n                    <FormItem top=\"Описание команды\">\r\n                        <InfoRow>{props.teams.selected.Details}</InfoRow>\r\n                    </FormItem>\r\n                    <FormItem top=\"Логотип\">\r\n                        <InfoRow>{props.teams.selected.Logo}</InfoRow>\r\n                    </FormItem>\r\n                    {/* <Group header={<Header mode=\"secondary\">Группы</Header>}>\r\n                        {(props.tournaments.selected.TournamentGroups && props.tournaments.selected.TournamentGroups.length > 0) ?\r\n                            <List>\r\n                                {props.tournaments.selected.TournamentGroups.map((item) => <InfoRow>{item.Name}</InfoRow>)}\r\n                            </List>\r\n                            :\r\n                            <FormItem>\r\n                                <InfoRow>Нет групп</InfoRow>\r\n                            </FormItem>\r\n                        }\r\n                    </Group> */}\r\n                </>\r\n            )\r\n        }; break;\r\n        case \"add\": {\r\n            return (\r\n                <Group>\r\n                    <Header>Новая команда</Header>\r\n                    <FormLayout>\r\n                        <FormItem top=\"Ваш город\">\r\n                            <InfoRow>{props.myProfile.CityUmbracoName}</InfoRow>\r\n                        </FormItem>\r\n                        <FormItem top=\"Название команды\">\r\n                            <Input type=\"text\" defaultValue={props.teams.selected.Name} value={props.teams.selected.Name} onChange={e => props.setTeamName(e.currentTarget.value)} placeholder=\"Например, Ривер Плейт\" />\r\n                        </FormItem>\r\n                        <FormItem top=\"Дата основания\">\r\n                            <DatePicker\r\n                                min={{ day: 1, month: 1, year: currentDate.getFullYear() - 50 }}\r\n                                max={{ day: 1, month: 1, year: currentDate.getFullYear() }}\r\n                                defaultValue={props.teams.selected.WhenBorn}\r\n                                //value={props.teams.selected.WhenBorn}\r\n                                onDateChange={value => props.setTeamWhenBorn(value)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem top=\"Описание команды\">\r\n                            <Textarea defaultValue={props.teams.selected.Details} value={props.teams.selected.Details} onChange={e => props.setTeamDetails(e.currentTarget.value)} placeholder=\"Описание команды\" />\r\n                        </FormItem>\r\n                        {/* <FormItem top=\"Загрузите ваше фото\">\r\n                            <File before={<Icon24Camera />} controlSize=\"m\">\r\n                                Выбрать фото\r\n                            </File>\r\n                        </FormItem> */}\r\n                        {/* <Group header={<Header mode=\"secondary\">Группы</Header>}>\r\n                            {(props.tournaments.selected.TournamentGroups && props.tournaments.selected.TournamentGroups.length > 0) ?\r\n                                <List>\r\n                                    {props.tournaments.selected.TournamentGroups.map((item) => <ListItem KeyId={-1} Delete={() => props.delGroupFromTournament(props.tournaments.selected.Id, item.KeyId)} Name={item.Name}></ListItem>)}\r\n                                </List>\r\n                                :\r\n                                <FormItem>\r\n                                    <InfoRow>Нет групп</InfoRow>\r\n                                </FormItem>\r\n                            }\r\n                        </Group> */}\r\n                        {/* <FormItem top=\"Новая группа/лига\">\r\n                            <Input type=\"text\" defaultValue={tempGroupName} value={tempGroupName} onChange={e => setTempGroupName(e.currentTarget.value)} placeholder=\"Название, например, Лига 1\" />\r\n                            <CellButton onClick={() => addToTournament(props.tournaments.selected.Id, tempGroupName)} before={<Icon28AddOutline />}>Добавить группу/лигу</CellButton>\r\n                        </FormItem> */}\r\n                        <FormItem top=\"Подверждение\">\r\n                            <ButtonWithNotify Message=\"Создать новую команду?\" Yes={SaveTeam}>Создать</ButtonWithNotify>\r\n                            <ButtonWithNotify Message=\"Отменить создание команды?\" Yes={CancelTeamCreate} mode=\"secondary\">Отмена</ButtonWithNotify>\r\n                        </FormItem>\r\n                    </FormLayout>\r\n                </Group>\r\n            )\r\n        }; break;\r\n        case \"edit\": {\r\n            return (\r\n                <Group>\r\n                    <Header>Управление командой</Header>\r\n                    <FormLayout>\r\n                        <FormItem top=\"Ваш город\">\r\n                            <InfoRow>{props.myProfile.CityUmbracoName}</InfoRow>\r\n                        </FormItem>\r\n                        <FormItem top=\"Название команды\">\r\n                            <Input type=\"text\" defaultValue={props.teams.selected.Name} value={props.teams.selected.Name} onChange={e => props.setTeamName(e.currentTarget.value)} placeholder=\"Например, Ривер Плейт\" />\r\n                        </FormItem>\r\n                        <FormItem top=\"Дата основания\">\r\n                            <DatePicker\r\n                                min={{ day: 1, month: 1, year: currentDate.getFullYear() - 50 }}\r\n                                max={{ day: 1, month: 1, year: currentDate.getFullYear() }}\r\n                                defaultValue={props.teams.selected.WhenBorn}\r\n                                //value={props.teams.selected.WhenBorn}\r\n                                onDateChange={value => props.setTeamWhenBorn(value)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem top=\"Описание команды\">\r\n                            <Textarea defaultValue={props.teams.selected.Details} value={props.teams.selected.Details} onChange={e => props.setTeamDetails(e.currentTarget.value)} placeholder=\"Описание команды\" />\r\n                        </FormItem>\r\n                        {/* <FormItem top=\"Загрузите ваше фото\">\r\n                            <File before={<Icon24Camera />} controlSize=\"m\">\r\n                                Выбрать фото\r\n                            </File>\r\n                        </FormItem> */}\r\n                        {/* <Group header={<Header mode=\"secondary\">Группы</Header>}>\r\n                            {(props.tournaments.selected.TournamentGroups && props.tournaments.selected.TournamentGroups.length > 0) ?\r\n                                <List>\r\n                                    {props.tournaments.selected.TournamentGroups.map((item) => <ListItem KeyId={-1} Delete={() => props.delGroupFromTournament(props.tournaments.selected.Id, item.KeyId)} Name={item.Name}></ListItem>)}\r\n                                </List>\r\n                                :\r\n                                <FormItem>\r\n                                    <InfoRow>Нет групп</InfoRow>\r\n                                </FormItem>\r\n                            }\r\n                        </Group> */}\r\n                        {/* <FormItem top=\"Новая группа/лига\">\r\n                            <Input type=\"text\" defaultValue={tempGroupName} value={tempGroupName} onChange={e => setTempGroupName(e.currentTarget.value)} placeholder=\"Название, например, Лига 1\" />\r\n                            <CellButton onClick={() => addToTournament(props.tournaments.selected.Id, tempGroupName)} before={<Icon28AddOutline />}>Добавить группу/лигу</CellButton>\r\n                        </FormItem> */}\r\n                        <FormItem top=\"Заявки на турнир\">\r\n                            <BidTeamAdminPanel></BidTeamAdminPanel>\r\n                        </FormItem>\r\n                        <FormItem top=\"Куда можно заявиться\">\r\n                            {props.tournamentsForBids.selectMode == \"tournaments\" ?\r\n                                <BidTeamTournamentList\r\n                                    CellClick={SelectTournament}\r\n                                    // Button1Handle = {MakeBid}\r\n                                    // Button2Handle = {CancelBid}\r\n                                    Bids = {props.tournamentsForBids.myBids}\r\n                                    List={props.tournamentsForBids.tournaments}\r\n                                ></BidTeamTournamentList>\r\n                        :\r\n                                <BidTeamTournamentGroupsList\r\n                                    CellClick={BackToTournaments}\r\n                                    Button1Handle = {MakeBid}\r\n                                    Button2Handle = {CancelBid}\r\n                                    List={props.tournamentsForBids.selectedTournament.TournamentGroups}\r\n                                    Bids = {props.tournamentsForBids.myBids}\r\n                                    TeamName={teamNameOnTournament}\r\n                                    SetTeamName={SetTeamNameOnTournament}\r\n                                ></BidTeamTournamentGroupsList>\r\n                        }\r\n                        </FormItem>\r\n                        <FormItem top=\"Подверждение\">\r\n                            <ButtonWithNotify Message=\"Сохранить изменения?\" Yes={SaveTeam}>Внести изменения</ButtonWithNotify>\r\n                        </FormItem>\r\n                    </FormLayout>\r\n                </Group>\r\n            )\r\n        };break;\r\n        default:{\r\n            <Group>\r\n                Не выбран режим отображения компонента (view, add, edit)\r\n            </Group>\r\n        };break;\r\n        \r\n    }\r\n\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        tournaments: state.tournamentsEntity,\r\n        teams: state.teamsEntity,\r\n        bidTeams: state.bidTeamsEntity,\r\n        tournamentsForBids: state.bidTeamsEntity,\r\n        SelectedName: state.teamsEntity.selected.Name,\r\n        bidSelectMode: state.bidTeamsEntity.selectMode, \r\n        cities: state.cityEntity.cities,\r\n        myProfile: state.profileEntity.myProfile,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { setTeamMode, goToPanel,\r\n    getActualTournamentsInCity, getTournamentGroups, setBidTeamSelectedMode, getTeamBidsByTeam, addBidTeamToTournamentGroup, cancelBidTeamToTournamentGroup,\r\n    setTeamWhenBorn, setTeamDetails, setTeamName, saveSelectedTeam, \r\n    setTournamentWhenBegin, setTournamentWhenEnd, setTournamentName, setTournamentReglament, setTournamentDetails,\r\n    delGroupFromTournamentByKeyId, editGroupInTournament, addGroupToTournament, resetTournament, saveSelectedTournament, \r\n})(TeamItem)","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, InfoRow, Group, List, Cell, Button, FormItem } from '@vkontakte/vkui'\r\nimport { defaultPhotoPath } from '../../../../store/dataTypes/common'\r\nimport TournamentListItem from './TournamentListItem'\r\nimport RichCellWithHistory from '../../Common/WithHistory/RichCellWithHistory'\r\nimport Icon24ChevronRightWithHistory from '../../Common/WithHistory/Icon24ChevronRightWithHistory'\r\nimport { dateToString } from '../../../../utils/convertors/dateUtils'\r\nimport ButtonWithNotify from '../../Common/WithNotify/ButtonWithNotify'\r\n\r\n\r\n\r\n\r\nconst TournamentAdminList = (props) => {\r\n\r\n    //const [tournamentList, setTournamentList] = useState(props.tournaments)\r\n    // const list = props.tournaments.map(x => {\r\n    //     return <TournamentListItem>{x.Name}</TournamentListItem>\r\n    // })\r\n\r\n        \r\n\r\n    return (\r\n        <Group>\r\n            <List>\r\n                {(props.List && props.List.length > 0) ?\r\n                    props.List.map(item => {\r\n                        let date = new Date(item.WhenBegin);\r\n                        return (\r\n                            <FormItem>\r\n                                <RichCell\r\n                                    multiline\r\n                                    actions={\r\n                                        <>\r\n                                        {!item.Published ? \r\n                                        <ButtonWithNotify Message=\"Опубликовать турнир?\" Yes={() => props.Button1Handle(item, true)}>Опубликовать</ButtonWithNotify>\r\n                                        : \r\n                                        <ButtonWithNotify Message=\"Снять с публикации турнир?\" Yes={() => props.Button1Handle(item, false)} mode=\"secondary\">Снять с публикации</ButtonWithNotify>}\r\n                                        <ButtonWithNotify Message=\"Удалить турнир?\" Yes={() => props.Button2Handle(item)} mode=\"destructive\">Удалить</ButtonWithNotify>\r\n                                        </>\r\n                                        }\r\n                                    caption={date && `Начало: ${dateToString(date)}`}\r\n                                    after={<Icon24ChevronRightWithHistory\r\n                                    handleClick={() => props.CellClick(item)} \r\n                                        toMenuName=\"tournamentitem\" \r\n                                        data-story=\"tournamentitem\"></Icon24ChevronRightWithHistory>\r\n                                    }\r\n                                    text={item.Published ? \"Опубликован\" : \"Не опубликован\"}\r\n                                >\r\n                                    {item.Name}\r\n                                </RichCell>\r\n                            </FormItem>\r\n                        )\r\n                    })\r\n                    : <FormItem><InfoRow>Нет турниров</InfoRow></FormItem>\r\n                }\r\n\r\n            </List>\r\n        </Group>\r\n    )\r\n}\r\n\r\nexport default TournamentAdminList","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, Button, InfoRow, Header, FormItem } from '@vkontakte/vkui'\r\nimport {defaultPhotoPath} from '../../../../store/dataTypes/common'\r\nimport TournamentAdminList from './TournamentAdminList'\r\nimport { setActiveMenuItem } from './../../../../store/mainMenuReducer';\r\nimport {setTournamentMode, getMyTournaments, publishTournament, deleteTournament, \r\n    setSelectedTournament, resetTournament,} from './../../../../store/tournamentsReducer'\r\nimport { connect } from 'react-redux';\r\nimport ButtonWithHistory from '../../Common/WithHistory/ButtonWithHistory'\r\n\r\n\r\nconst TournamentAdminPanel = (props) => {\r\n\r\n\t// let [myTournaments, setMyTournaments] = useState([]);\r\n    const PublishTournament = (tour, publish) => {\r\n\r\n        props.publishTournament(tour, props.myProfile, publish);\r\n    }\r\n   \r\n    const DeleteTournament = (tour) => {\r\n        props.deleteTournament(tour, props.myProfile);\r\n    }\r\n    \r\n    const CellClick = (item) => {\r\n        \r\n        props.setTournamentMode(\"edit\");\r\n        props.setSelectedTournament(item);\r\n    }\r\n    \r\n    \r\n    const ButtonNewClick = () => {\r\n        props.resetTournament();\r\n        props.setTournamentMode(\"add\");\r\n    }\r\n\r\n    useEffect(() =>{\r\n        \r\n        props.getMyTournaments(props.myProfile.UserProfileId);\r\n    }, props.myProfile)\r\n\r\n        return (\r\n            <>\r\n                <FormItem>\r\n                    <ButtonWithHistory handleClick={ButtonNewClick} toMenuName=\"tournamentitem\" data-story=\"tournamentitem\">Создать турнир</ButtonWithHistory>\r\n                </FormItem>\r\n                <TournamentAdminList \r\n                    CellClick={CellClick}\r\n                    Button1Handle = {PublishTournament}\r\n                    Button2Handle = {DeleteTournament}\r\n                    List={props.tournament.myTournaments}\r\n                >\r\n                    \r\n                </TournamentAdminList>\r\n            </>\r\n        )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tmainMenu: state.mainMenu,\r\n\t\tmyProfile: state.profileEntity.myProfile,\r\n        tournament: state.tournamentsEntity,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n\tsetActiveMenuItem, setTournamentMode, getMyTournaments, publishTournament, deleteTournament, setSelectedTournament, resetTournament,\r\n})(TournamentAdminPanel);","import React, {useState} from 'react'\r\nimport  ButtonWithNotify  from './../../Common/WithNotify/ButtonWithNotify'\r\nimport { Button, CellButton, Input, RichCell } from '@vkontakte/vkui'\r\n\r\n\r\n\r\n\r\nconst BidListItem = (props) => {\r\n\r\n    let [adminText, setAdminText] = useState(\"\");\r\n\r\n\r\n    return (\r\n            <RichCell key={props.KeyId != -1 ? props.KeyId : null} \r\n            actions={\r\n                <>\r\n                    <ButtonWithNotify mode=\"primary\" Message=\"Принять заявку команды?\" Yes={() => props.Accept(props.Item)}>Принять</ButtonWithNotify>\r\n                    <Input value={adminText} onChange={(e) => setAdminText(e.currentTarget.value)} placeholder=\"Причина отклонения заявки\"></Input>\r\n                    <ButtonWithNotify mode=\"destructive\" Message=\"Отклонить заявку команды?\" Yes={() => props.Decline(props.Item, adminText)}>Отклонить</ButtonWithNotify>\r\n                </>\r\n            }\r\n            text={`Хотят выступать под именем ${props.Item.TeamName} в ${props.Item.TournamentGroup.Name} группе/лиге`}\r\n            caption={`Заявку отправил ${props.Item.UserProfile.Surname} ${props.Item.UserProfile.Name}`}\r\n            >\r\n                Команда {props.Item.Team.Name}\r\n            </RichCell>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default BidListItem","import { setGlobalPopout, setErrorMessage } from \"./systemReducer\";\r\nimport { CityTournamentAdminAPI, MatchAPI } from './../utils/api/api.js'\r\nimport { Match } from './constants/commonConstants'\r\nimport { EmptyTournament } from './constants/commonConstants'\r\n\r\nimport { authQueryString } from './../utils/api/server';\r\n\r\nlet demoMatch = Match;\r\n\r\nconst MATCH_SET_ALL_MATCHES = \"MATCH_SET_ALL_MATCHES\";\r\nconst MATCH_DEL_MATCH = \"MATCH_DEL_MATCH\";\r\nconst MATCH_SET_SELECTED = \"MATCH_SET_SELECTED\";\r\nconst MATCH_ADD_MATCH = \"MATCH_ADD_MATCH\";\r\nconst MATCH_SET_HOT_MATCHES = \"MATCH_SET_HOT_MATCHES\";\r\nconst MATCH_SET_ACCESS = \"MATCH_SET_ACCESS\";\r\nconst MATCH_SET_MODE = \"MATCH_SET_MODE\";\r\nconst MATCH_SET_PLAYED = \"MATCH_SET_PLAYED\";\r\nconst MATCH_SET_HOT_PANEL = \"MATCH_SET_HOT_PANEL\";\r\n\r\nDate.prototype.addDays = function(days) {\r\n    var date = new Date(this.getFullYear(), this.getMonth(), this.getDate(), 0, 0, 0);\r\n    date.setDate(date.getDate() + days);\r\n    return date;\r\n}\r\n\r\nconst currentDate = new Date();\r\nconst emptyTournament = EmptyTournament\r\n\r\nconst initState = {\r\n    matches: [],\r\n    hot: {\r\n        yesterday: [],\r\n        today: [],\r\n        tomorrow: [],\r\n    },\r\n    hotPanel: \"today\", // \"yesterday\", \"tomorrow\"\r\n    selected: {},\r\n    access: \"user\",\r\n    mode: \"list\", // режим отображения турнира (\"list\" - список, \"view\" - просмотр, \"add\" - добавление, \"edit\" - редактирование)\r\n}\r\n\r\n\r\nlet matchReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case MATCH_SET_ALL_MATCHES: {\r\n            return {\r\n                ...state,\r\n                matches: [...action.matches],\r\n            };\r\n        }\r\n        case MATCH_SET_SELECTED: {\r\n            return {\r\n                ...state,\r\n                selected: action.match,\r\n            };\r\n        }\r\n        case MATCH_DEL_MATCH: {\r\n            return {\r\n                ...state,\r\n                matches: [...state.matches.filter(m => m.Id != action.match.Id)],\r\n            };\r\n        }\r\n        case MATCH_ADD_MATCH: {\r\n            return {\r\n                ...state,\r\n                matches: [...state.matches, action.match],\r\n            };\r\n        }\r\n        case MATCH_SET_HOT_MATCHES: {\r\n            \r\n            let date = new Date();\r\n            let today = date.addDays(1).addDays(-1);\r\n            let yesterday = date.addDays(-1);\r\n            let tomorrow_begin = date.addDays(1);\r\n            let tomorrow_end = date.addDays(2);\r\n\r\n            let st = {\r\n                ...state,\r\n                hot: {\r\n                    yesterday: [...action.matches.filter(match => {\r\n                        \r\n                        return ((new Date(match.When) >= yesterday) && (new Date(match.When) < today))\r\n                    })],\r\n                    today: [...action.matches.filter(match =>  {\r\n                        \r\n                        return ((new Date(match.When) >= today) && (new Date(match.When) < tomorrow_begin))\r\n                    })],\r\n                    tomorrow: [...action.matches.filter(match =>  {\r\n                        \r\n                        return ((new Date(match.When) >= tomorrow_begin) && (new Date(match.When) < tomorrow_end))\r\n                    })],\r\n                },\r\n            };\r\n            \r\n            return st;\r\n        }\r\n        case MATCH_SET_ACCESS: {\r\n            return {\r\n                ...state,\r\n                access: action.access,\r\n            };\r\n        }\r\n        case MATCH_SET_PLAYED: {\r\n            return {\r\n                ...state,\r\n                access: action.played,\r\n            };\r\n        }\r\n        case MATCH_SET_MODE: {\r\n            return {\r\n                ...state,\r\n                mode: action.mode,\r\n            };\r\n        }\r\n        case MATCH_SET_HOT_PANEL: {\r\n            return {\r\n                ...state,\r\n                hotPanel: action.panelName,\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\nexport const setAllMatches = (matches) => {\r\n    return {\r\n        type: MATCH_SET_ALL_MATCHES,\r\n        matches\r\n    }\r\n}\r\n\r\nexport const setHotMatches = (matches) => {\r\n    return {\r\n        type: MATCH_SET_HOT_MATCHES,\r\n        matches\r\n    }\r\n}\r\n\r\nexport const delMatch = (match) => {\r\n    return {\r\n        type: MATCH_DEL_MATCH,\r\n        match\r\n    }\r\n}\r\n\r\nexport const addMatch = (match) => {\r\n    return {\r\n        type: MATCH_ADD_MATCH,\r\n        match\r\n    }\r\n}\r\n\r\nexport const setAccess = (access) => {\r\n    return {\r\n        type: MATCH_SET_ACCESS,\r\n        access\r\n    }\r\n}\r\n\r\nexport const setPlayed = (played) => {\r\n    return {\r\n        type: MATCH_SET_PLAYED,\r\n        played\r\n    }\r\n}\r\n\r\nexport const setMode = (mode) => {\r\n    return {\r\n        type: MATCH_SET_MODE,\r\n        mode\r\n    }\r\n}\r\n\r\nexport const setHotPanel = (panelName) => {\r\n    return {\r\n        type: MATCH_SET_HOT_PANEL,\r\n        panelName\r\n    }\r\n}\r\n\r\nexport const setSelectedMatch = (match) => {\r\n    return {\r\n        type: MATCH_SET_SELECTED,\r\n        match\r\n    }\r\n}\r\n\r\n\r\n\r\n// все матчи турнира\r\nexport const getAllMatchesByTournament = (tournament = null, userProfile = null, startindex = 0) => {\r\n    return dispatch => {\r\n        if ((tournament != null) && (userProfile != null)) \r\n            {\r\n                if (authQueryString && authQueryString.length > 0)\r\n                MatchAPI.getAllMatchesByTournament(tournament, userProfile)\r\n                        .then(pl => {\r\n                            \r\n                            if (pl && pl.data && pl.data.length > 0) {\r\n                                \r\n                                dispatch(setAllMatches(pl.data));\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                            else {\r\n\r\n                                //dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n\r\n                            dispatch(setErrorMessage(error))\r\n                            dispatch(setGlobalPopout(false))\r\n                        })\r\n                else {\r\n\r\n                    //dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                    dispatch(setGlobalPopout(false))\r\n\r\n                }\r\n            }\r\n        \r\n    }\r\n}\r\n\r\n// добавить матч в турнир\r\nexport const addMatchToShedule = (match = null, userProfile = null, hours = 0, minutes = 0) => {\r\n    return dispatch => {\r\n\r\n        dispatch(setGlobalPopout(true))\r\n\r\n        if ((match != null) && (userProfile != null)) \r\n            {\r\n                if (authQueryString && authQueryString.length > 0){\r\n                \r\n                    MatchAPI.addMatch(match, userProfile, Number(hours) > 21 ? 24-Number(hours) : Number(hours)+3 , minutes)\r\n                        .then(pl => {\r\n                            if (pl && pl.data) {\r\n                                dispatch(addMatch(pl.data));\r\n                                dispatch(setGlobalPopout(false))\r\n                                dispatch(setErrorMessage(\"Успешно добавлено\"))\r\n\r\n                            }\r\n                            else {\r\n\r\n                                //dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n\r\n                            dispatch(setErrorMessage(error))\r\n                            dispatch(setGlobalPopout(false))\r\n                        })\r\n                    }\r\n                else {\r\n\r\n                    //dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                    dispatch(setGlobalPopout(false))\r\n\r\n                }\r\n            }\r\n        \r\n    }\r\n}\r\n\r\n\r\n// удалить матч из турнира\r\nexport const delMatchFromShedule = (match = null, userProfile = null, hours = 0, minutes = 0) => {\r\n    return dispatch => {\r\n        if ((match != null) && (userProfile != null)) \r\n            {\r\n                if (authQueryString && authQueryString.length > 0){\r\n                \r\n                    MatchAPI.delMatch(match, userProfile, Number(hours) > 21 ? 24-Number(hours) : Number(hours)+3 , minutes)\r\n                        .then(pl => {\r\n                            if (pl && pl.data) {\r\n                                dispatch(delMatch(pl.data));\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                            else {\r\n\r\n                                dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n\r\n                            dispatch(setErrorMessage(error))\r\n                            dispatch(setGlobalPopout(false))\r\n                        })\r\n                    }\r\n                else {\r\n\r\n                    dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                    dispatch(setGlobalPopout(false))\r\n\r\n                }\r\n            }\r\n        \r\n    }\r\n}\r\n\r\n// возвращает актуальные матчи города\r\nexport const getMatchesInCurrentCity = (userProfile = null) => {\r\n    return dispatch => {\r\n        if (userProfile != null) \r\n            {\r\n                if (authQueryString && authQueryString.length > 0){\r\n                \r\n                    MatchAPI.getCurrentMatchesByCity(userProfile)\r\n                        .then(pl => {\r\n                            \r\n                            if (pl && pl.data.length > 0) {\r\n                                dispatch(setHotMatches(pl.data));\r\n                                dispatch((pl.data));\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                            else {\r\n                                dispatch(setErrorMessage(\"Не получены данные MatchAPI.getCurrentMatchesByCity\"))\r\n                                dispatch(setGlobalPopout(false))\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n\r\n                            dispatch(setErrorMessage(error))\r\n                            dispatch(setGlobalPopout(false))\r\n                        })\r\n                    }\r\n                else {\r\n\r\n                    dispatch(setCityTournamentAdmins(demoCityTournamentAdmins))\r\n                    dispatch(setGlobalPopout(false))\r\n\r\n                }\r\n            }\r\n        \r\n    }\r\n}\r\n\r\n\r\n\r\n    export default matchReducer;","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar } from '@vkontakte/vkui'\r\nimport {defaultPhotoPath} from '../../../../store/dataTypes/common'\r\nimport { dateToString, timeToString } from '../../../../utils/convertors/dateUtils';\r\nimport { green } from 'chalk';\r\n\r\nconst schet = {\r\n    fontWeight: 'bold', \r\n    color: 'yellow',\r\n    backgroundColor: 'gray',\r\n    padding: '1px 7px',\r\n    borderRadius: '10px',\r\n}\r\n\r\nconst win = {\r\n    fontWeight: 'bold',\r\n    //color: 'orange',\r\n    //textDecoration: 'underline',\r\n    //borderLeft: '10px solid orange',\r\n}\r\n\r\nconst lose = {\r\n    color: '#666',\r\n    //color: 'orange',\r\n}\r\n\r\nconst MatchListItem = (props) => {\r\n    \r\n    \r\n    let match=props.Match;\r\n    let place=props.Place;\r\n    let date = new Date(match.When);\r\n\r\n\r\n        return (\r\n            <RichCell\r\n                onClick={props.ClickHandler}\r\n                caption={place ? place.Name : \"Ошибка загрузки данных о месте\"}\r\n                text={\r\n                    match.Played ?\r\n                        <span style={{ \"color\": \"green\" }}>Сыгран <span>в {`${dateToString(date, 0, 0, 0, true)}`}</span></span> :\r\n                        <span style={{ \"color\": \"blue\" }}>Состоится <span>в {`${dateToString(date, 0, 0, 0, true)}`}</span> в {timeToString(date.getHours(), date.getMinutes())}</span>\r\n                }\r\n            >\r\n                {match.Played ? <span>\r\n                        <span \r\n                            style={(+match.Team1Goals > +match.Team2Goals) ? win : (+match.Team1Goals == +match.Team2Goals) ? {} : lose}\r\n                            >{match.Team1.Name} </span>\r\n                        <span style={schet}>{match.Team1Goals} - {match.Team2Goals}</span>\r\n                        <span \r\n                            style={(+match.Team1Goals < +match.Team2Goals) ? win : (+match.Team1Goals == +match.Team2Goals) ? {} : lose}\r\n                        > {match.Team2.Name}</span>\r\n                    </span> :\r\n                    <span>{match.Team1.Name} - {match.Team2.Name}</span>\r\n                }\r\n            </RichCell>\r\n        )\r\n}\r\n\r\nexport default MatchListItem","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, InfoRow, Group, List, CellButton, Button, FormItem, CustomSelect, DatePicker, CustomSelectOption, Header, SimpleCell, Div, Headline, Textarea } from '@vkontakte/vkui'\r\nimport Icon24ChevronRightWithHistory from '../../Common/WithHistory/Icon24ChevronRightWithHistory'\r\nimport { connect } from 'react-redux';\r\nimport {\r\n    getTournamentTeams,\r\n} from '../../../../store/tournamentsReducer'\r\nimport {\r\n    setSelectedMatch,\r\n} from '../../../../store/matchReducer'\r\nimport {\r\n    goToPanel,\r\n} from '../../../../store/systemReducer'\r\nimport {\r\n    setMode, setAccess, addMatchToShedule, getAllMatchesByTournament, delMatchFromShedule,\r\n} from '../../../../store/matchReducer'\r\nimport { Checkbox } from '@vkontakte/vkui/dist/components/Checkbox/Checkbox';\r\nimport ButtonWithNotify from '../WithNotify/ButtonWithNotify';\r\nimport MatchListItem from '../../AdminPanel/Match/MatchListItem';\r\n\r\n\r\n// const SheduleContainer = (props) => {\r\n\r\n\r\n\r\n//     return <Shedule props={...props}></Shedule>\r\n// }\r\n\r\n\r\nconst Shedule = (props) => {\r\n\r\n    useEffect(() => {\r\n\r\n        props.getAllMatchesByTournament(props.tournaments.selected, props.myProfile)\r\n    }, props.tournaments.selected)\r\n\r\n    let isAdminMode = props.mode == \"admin\" ? true : false;\r\n    let tournament = props.tournament;\r\n    let today = props.todayIs;\r\n\r\n    // создание объектов для заполнения выпадающих списков (count - сколько элементов, makeZeroBefore - дописывать ли нули впереди к цифрам от 0 до 9)\r\n    let optMaker = (count, makeZeroBefore = true) => {\r\n        let m = [];\r\n        for (let i = 0; i < count; i++)\r\n            m = [...m, { value: i, label: ((i <= 9) && (makeZeroBefore)) ? \"0\" + i : i }]\r\n        return m\r\n    }\r\n\r\n    let groups = tournament.TournamentGroups.map(g => { return { value: g.Id, label: g.Name } })\r\n    //debugger\r\n    let places = props.places\r\n        .map(p => p.Name.length ? p : null)\r\n        .filter(p => p)\r\n        .map(p => { return { value: p.UmbracoId, label: p.Name, title: p.Name } });\r\n    let teams = [{ value: 0, label: \"Не выбрано\" }]\r\n    let hours = [...optMaker(24)];\r\n    let minutes = [...optMaker(60)];\r\n    let teamGoals = [...optMaker(99, false)];\r\n\r\n    const [selectedTournamentGroup, setSelectedTournamentGroup] = React.useState((groups && Array.isArray(groups) && groups.length > 0) ? groups[0] : null);\r\n\r\n    const [selectedTournamentGroupTeamList, setSelectedTournamentGroupTeamList] = React.useState(teams);\r\n\r\n    const [selectedTeam1, setSelectedTeam1] = React.useState(0);\r\n    const [selectedTeam2, setSelectedTeam2] = React.useState(0);\r\n    const [selectedTeam1Goals, setTeam1Goals] = React.useState(0);\r\n    const [selectedTeam2Goals, setTeam2Goals] = React.useState(0);\r\n    const [selectedPlace, setSelectedPlace] = React.useState(0);\r\n    const [selectedDescription, setSelectedDescription] = React.useState(\"\");\r\n    const [selectedId, setSelectedId] = React.useState(0);\r\n    const [selectedPlayed, setSelectedPlayed] = React.useState(false);\r\n    const [selectedDate, setSelectedDate] = React.useState({ day: new Date().getDate(), month: new Date().getMonth() + 1, year: new Date().getFullYear() });\r\n    const [selectedHour, setSelectedHour] = React.useState([hours[0].value]);\r\n    const [selectedMinute, setSelectedMinute] = React.useState(minutes[0].value);\r\n    \r\n\r\n    let getGroup = (groupId) => {\r\n        return tournament.TournamentGroups.find(x => x.Id == groupId);\r\n    }\r\n\r\n    let changeGroup = (league_id) => {\r\n        setSelectedTournamentGroup(league_id);\r\n        setSelectedTournamentGroupTeamList(getGroup(league_id).Teams.map(team => { return { value: team.Id, label: team.Name } }));\r\n    }\r\n\r\n    let allMatchesInAllGroups = []\r\n    props.tournaments.selected.TournamentGroups.forEach(tg => {\r\n\r\n        allMatchesInAllGroups.push({\r\n            TournamentGroup: { ...tg },\r\n            Matches: [...props.matches.filter(m => m.TournamentGroup.Id == tg.Id)]\r\n        })\r\n    })\r\n\r\n    let addMatch = (editId) => {\r\n\r\n        let match = (editId >= 0) ?\r\n            {\r\n                Id: editId,\r\n                When: selectedDate,\r\n                TournamentGroupId: selectedTournamentGroup,\r\n                PlaceId: selectedPlace,\r\n                Team1Id: selectedTeam1,\r\n                Team2Id: selectedTeam2,\r\n                Description: selectedDescription,\r\n                BidTeamToTournamentId1: -1,\r\n                BidTeamToTournamentId2: -1,\r\n                Team1Goals: selectedTeam1Goals,\r\n                Team2Goals: selectedTeam2Goals,\r\n                Played: selectedPlayed,\r\n            } :\r\n            {\r\n                When: selectedDate,\r\n                TournamentGroupId: selectedTournamentGroup,\r\n                PlaceId: selectedPlace,\r\n                Team1Id: selectedTeam1,\r\n                Team2Id: selectedTeam2,\r\n                Description: selectedDescription,\r\n                BidTeamToTournamentId1: -1,\r\n                BidTeamToTournamentId2: -1,\r\n                Team1Goals: selectedTeam1Goals,\r\n                Team2Goals: selectedTeam2Goals,\r\n                Played: selectedPlayed,\r\n            };\r\n\r\n        props.addMatchToShedule(match, props.myProfile, selectedHour, selectedMinute);\r\n        props.setMode(\"list\")\r\n    }\r\n\r\n\r\n    let delCurrentMatch = () => {\r\n\r\n        let match = {\r\n            When: selectedDate,\r\n            Id: selectedId,\r\n            TournamentGroupId: selectedTournamentGroup,\r\n            // TournamentGroup: {\r\n            //     Id: selectedTournamentGroup,\r\n            //     Tournament: {...props.tournaments.selected}\r\n            // },\r\n            PlaceId: selectedPlace,\r\n            Team1Id: selectedTeam1,\r\n            Team2Id: selectedTeam2,\r\n            Played: selectedPlayed,\r\n        }\r\n\r\n        props.delMatchFromShedule(match, props.myProfile, selectedHour, selectedMinute)\r\n        props.setMode(\"list\")\r\n        //props.addMatchToShedule(match, props.myProfile, selectedHour, selectedMinute);\r\n    }\r\n\r\n    let goToEditMatch = (match) => {\r\n        debugger\r\n\r\n        groups = tournament.TournamentGroups.map(g => { return { value: g.Id, label: g.Name } })\r\n        //debugger\r\n        places = props.places\r\n            .map(p => p.Name.length ? p : null)\r\n            .filter(p => p)\r\n            .map(p => { return { value: p.UmbracoId, label: p.Name, title: p.Name } });\r\n        teams = [{ value: 0, label: \"Не выбрано\" }]\r\n        hours = [...optMaker(24)];\r\n        minutes = [...optMaker(60)];\r\n        teamGoals = [...optMaker(99, false)];\r\n\r\n        let date = new Date(match.When);\r\n\r\n\r\n        setSelectedTournamentGroupTeamList(getGroup(match.TournamentGroupId).Teams.map(team => { return { value: team.Id, label: team.Name } }));\r\n        setSelectedTournamentGroup(match.TournamentGroupId);\r\n        setSelectedId(match.Id);\r\n        setSelectedDescription(match.Description);\r\n        setTeam1Goals(match.Team1Goals);\r\n        setTeam2Goals(match.Team2Goals);\r\n        setSelectedTeam1(match.Team1.Id)\r\n        setSelectedTeam2(match.Team2.Id)\r\n        setSelectedPlace(match.PlaceId)\r\n        setSelectedPlayed(match.Played)\r\n        setSelectedDate({ day: date.getDate(), month: date.getMonth() + 1, year: date.getFullYear() })\r\n        setSelectedHour(date.getHours())\r\n        setSelectedMinute(date.getMinutes())\r\n\r\n        props.setMode(\"edit\")\r\n    }\r\n\r\n    let goToViewMatch = (match) => {\r\n        debugger\r\n\r\n        props.setSelectedMatch(match)\r\n\r\n        props.goToPanel(\"matchitem\", false)\r\n    }\r\n\r\n//debugger\r\n    // выводим список существующего расписания с кнопками редактирования, удаления, переноса\r\n    // группируем список по датам, сортируем от последних к первым (последние выше)\r\n    // сделать кнопку сортировки\\\r\n\r\n    switch (props.access) {\r\n        case \"admin\": {\r\n            switch (props.mode) {\r\n                case \"list\": {\r\n                    return (\r\n                        <Group>\r\n                            <CellButton onClick={() => props.setMode(\"add\")}>Добавить</CellButton>\r\n                            <List>\r\n                                {allMatchesInAllGroups.map(groupAndMatchesItem => {\r\n\r\n                                    return <Group header={<Header mode=\"secondary\">{groupAndMatchesItem.TournamentGroup.Name}</Header>}>\r\n                                        {groupAndMatchesItem.Matches.length > 0 ?\r\n                                            <List>\r\n                                                {groupAndMatchesItem.Matches.map(match => {\r\n                                                    \r\n                                                    let place = props.places.find(p => p.UmbracoId == match.PlaceId)\r\n                                                    let date = new Date(match.When);\r\n                                                    return <MatchListItem \r\n                                                        ClickHandler={() => goToEditMatch(match)}\r\n                                                        Match={match} Place={place}\r\n                                                        ></MatchListItem>\r\n                                                    // <RichCell\r\n                                                    //     caption={place.Name}\r\n                                                    //     text={\r\n                                                    //         match.Played ?\r\n                                                    //             <span style={{ \"color\": \"green\" }}>Сыгран {`${date.toLocaleDateString()} в ${date.toLocaleTimeString()}`}</span> :\r\n                                                    //             <span style={{ \"color\": \"blue\" }}>Состоится {`${date.toLocaleDateString()} в ${date.toLocaleTimeString()}`}</span>\r\n                                                    //     }\r\n                                                        \r\n                                                    // >\r\n                                                    //     {match.Played ?\r\n                                                    //         `${match.Team1.Name} ${match.Team1Goals} - ${match.Team2Goals} ${match.Team2.Name}` :\r\n                                                    //         `${match.Team1.Name} - ${match.Team2.Name}`\r\n                                                    //     }\r\n                                                    // </RichCell>\r\n                                                })}\r\n                                            </List>\r\n                                            :\r\n                                            <SimpleCell>Нет расписания в группе</SimpleCell>\r\n                                        }\r\n                                    </Group>\r\n                                }\r\n                                )}\r\n                            </List>\r\n                            <CellButton onClick={() => props.setMode(\"add\")}>Добавить</CellButton>\r\n                        </Group>\r\n                    )\r\n                }; break;\r\n                case \"view\": {\r\n                    return (\r\n                        <Group>\r\n                            <Button>Назад</Button>\r\n                        </Group>\r\n                    )\r\n                }; break;\r\n                case \"add\": {\r\n                    return (\r\n                        <Group>\r\n                            <FormItem top=\"Группа/лига\">\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n                                    options={groups}\r\n                                    value={selectedTournamentGroup}\r\n                                    onChange={(option) => changeGroup(option.currentTarget.value)}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Команда 1\">\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n                                    options={selectedTournamentGroupTeamList}\r\n                                    value={selectedTeam1}\r\n                                    onChange={(option) => {\r\n                                        setSelectedTeam1(option.currentTarget.value)\r\n                                    }}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Команда 2\">\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n                                    options={selectedTournamentGroupTeamList}\r\n                                    value={selectedTeam2}\r\n                                    onChange={(option) => {\r\n                                        setSelectedTeam2(option.currentTarget.value)\r\n                                    }}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Дата\">\r\n                                <DatePicker\r\n                                    min={{ day: 1, month: 1, year: new Date().getFullYear() - 1 }}\r\n                                    max={{ day: 1, month: 1, year: new Date().getFullYear() + 1 }}\r\n                                    defaultValue={selectedDate}\r\n                                    onDateChange={(value) => setSelectedDate(value)}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Время\">\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n\r\n                                    options={hours}\r\n                                    value={selectedHour}\r\n                                    onChange={(option) => setSelectedHour(option.currentTarget.value)}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n\r\n                                    options={minutes}\r\n                                    value={selectedMinute}\r\n                                    onChange={(option) => setSelectedMinute(option.currentTarget.value)}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Счёт\">\r\n                                <Div>Команда 1</Div>\r\n                                <CustomSelect\r\n                                    placeholder=\"0\"\r\n                                    title=\"Команда 1\"\r\n                                    options={teamGoals}\r\n                                    value={selectedTeam1Goals}\r\n                                    onChange={(option) => setTeam1Goals(option.currentTarget.value)}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                                <Div>Команда 2</Div>\r\n                                <CustomSelect\r\n                                    placeholder=\"0\"\r\n                                    title=\"Команда 2\"\r\n                                    options={teamGoals}\r\n                                    value={selectedTeam2Goals}\r\n                                    onChange={(option) => setTeam2Goals(option.currentTarget.value)}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Место\">\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n                                    options={places}\r\n                                    value={selectedPlace}\r\n                                    onChange={(option) =>\r\n                                        //changePlace(option.currentTarget.value)\r\n                                        setSelectedPlace(option.currentTarget.value)\r\n                                    }\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Комментарий к матчу\">\r\n                                <Textarea onChange={(e) => setSelectedDescription(e.currentTarget.value)}>{selectedDescription}</Textarea>\r\n                            </FormItem>\r\n                            <FormItem top=\"Матч сыгран\">\r\n                                <Checkbox checked={selectedPlayed} onChange={() => setSelectedPlayed(!selectedPlayed)}>Сыгран</Checkbox>\r\n                            </FormItem>\r\n                            <Button onClick={() => props.setMode(\"list\")}>Отмена</Button>\r\n                            <ButtonWithNotify Message=\"Добавить матч?\" Yes={() => addMatch(-1)}>Добавить</ButtonWithNotify>\r\n                        </Group>\r\n                    )\r\n                }; break;\r\n                case \"edit\": {\r\n                    return (\r\n                        <Group>\r\n                            <FormItem top=\"Группа/лига\">\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n                                    options={groups}\r\n                                    value={selectedTournamentGroup}\r\n                                    onChange={(option) => changeGroup(option.currentTarget.value)}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Команда 1\">\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n                                    options={selectedTournamentGroupTeamList}\r\n                                    value={selectedTeam1}\r\n                                    onChange={(option) => {\r\n                                        setSelectedTeam1(option.currentTarget.value)\r\n                                    }}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Команда 2\">\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n                                    options={selectedTournamentGroupTeamList}\r\n                                    value={selectedTeam2}\r\n                                    onChange={(option) => {\r\n                                        setSelectedTeam2(option.currentTarget.value)\r\n                                    }}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Дата\">\r\n                                <DatePicker\r\n                                    min={{ day: 1, month: 1, year: new Date().getFullYear() - 1 }}\r\n                                    max={{ day: 1, month: 1, year: new Date().getFullYear() + 1 }}\r\n                                    defaultValue={selectedDate}\r\n                                    onDateChange={(value) => setSelectedDate(value)}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Время\">\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n\r\n                                    options={hours}\r\n                                    value={selectedHour}\r\n                                    onChange={(option) => setSelectedHour(option.currentTarget.value)}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n\r\n                                    options={minutes}\r\n                                    value={selectedMinute}\r\n                                    onChange={(option) => setSelectedMinute(option.currentTarget.value)}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Счёт\">\r\n                                <Div>Команда 1</Div>\r\n                                <CustomSelect\r\n                                    placeholder=\"0\"\r\n                                    title=\"Команда 1\"\r\n                                    options={teamGoals}\r\n                                    value={selectedTeam1Goals}\r\n                                    onChange={(option) => setTeam1Goals(option.currentTarget.value)}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                                <Div>Команда 2</Div>\r\n                                <CustomSelect\r\n                                    placeholder=\"0\"\r\n                                    title=\"Команда 2\"\r\n                                    options={teamGoals}\r\n                                    value={selectedTeam2Goals}\r\n                                    onChange={(option) => setTeam2Goals(option.currentTarget.value)}\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n\r\n                            <FormItem top=\"Место\">\r\n                                <CustomSelect\r\n                                    placeholder=\"Не выбрано\"\r\n                                    options={places}\r\n                                    value={selectedPlace}\r\n                                    onChange={(option) =>\r\n                                        //changePlace(option.currentTarget.value)\r\n                                        setSelectedPlace(option.currentTarget.value)\r\n                                    }\r\n                                    renderOption={({ ...otherProps }) => {\r\n                                        return (\r\n                                            <CustomSelectOption\r\n                                                {...otherProps}\r\n                                            />\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            </FormItem>\r\n                            <FormItem top=\"Комментарий к матчу\">\r\n                                <Textarea onChange={(e) => setSelectedDescription(e.currentTarget.value)} value={selectedDescription}></Textarea>\r\n                            </FormItem>\r\n                            <FormItem top=\"Матч сыгран\">\r\n                                <Checkbox checked={selectedPlayed} onChange={() => setSelectedPlayed(!selectedPlayed)}>Сыгран</Checkbox>\r\n                            </FormItem>\r\n                            <Button onClick={() => props.setMode(\"list\")}>Отмена</Button>\r\n                            <ButtonWithNotify Message=\"Сохранить матч?\" Yes={() => addMatch(selectedId)}>Сохранить</ButtonWithNotify>\r\n                            <ButtonWithNotify Message=\"Удалить матч?\" Yes={() => delCurrentMatch()} align=\"right\" mode=\"destructive\">Удалить</ButtonWithNotify>\r\n                        </Group>\r\n                    )\r\n                }; break;\r\n            }\r\n        }; break;\r\n        case \"user\": {\r\n            switch (props.mode) {\r\n                case \"list\": {\r\n                    return (\r\n                        <Group>\r\n                            <List>\r\n                                {allMatchesInAllGroups.map(groupAndMatchesItem => {\r\n\r\n                                    return (\r\n                                        <Group header={<FormItem><Headline mode=\"secondary\">{groupAndMatchesItem.TournamentGroup.Name}</Headline></FormItem>}>\r\n                                            {\r\n                                                groupAndMatchesItem.Matches.length > 0\r\n                                                    ?\r\n                                                    <List>\r\n                                                        {groupAndMatchesItem.Matches.map(match => {\r\n                                                            let place = props.places.find(p => p.UmbracoId == match.PlaceId)\r\n                                                            return <MatchListItem \r\n                                                            ClickHandler={() => goToViewMatch(match)}\r\n                                                            Match={match} Place={place}></MatchListItem>\r\n                                                        })}\r\n                                                    </List>\r\n                                                    :\r\n                                                    <SimpleCell>Нет расписания в группе</SimpleCell>\r\n                                            }\r\n                                        </Group>\r\n                                    )\r\n                                }\r\n                                )}\r\n                            </List>\r\n                        </Group>\r\n                    )\r\n                }; break;\r\n                case \"view\": {\r\ndebugger \r\n                    return (\r\n                        <Group>\r\n                            <FormItem top=\"Группа/лига\">\r\n                                {matches.selected.TournamentGroup.Name}\r\n                            </FormItem>\r\n                            <FormItem top=\"Команда 1\">\r\n                                {matches.selected.Team1.Name} {matches.selected.Team1Goals} : {matches.selected.Team2Goals} {matches.selected.Team2.Name}\r\n                            </FormItem>\r\n                            \r\n                            <FormItem top=\"Дата\">\r\n                                {new Date(matches.selected.When).toLocaleDateString()}\r\n                            </FormItem>\r\n                            \r\n                            <FormItem top=\"Место\">\r\n                                {matches.selected.Place.Name}\r\n                            </FormItem>\r\n                            <FormItem top=\"Матч сыгран\">\r\n                                {matches.selected.Played}\r\n                            </FormItem>\r\n                            <Button onClick={() => props.setMode(\"list\")}>Назад</Button>\r\n                        </Group>\r\n                    )    \r\n                }; break;\r\n                case \"add\": {  return <>add</>}; break;\r\n                case \"edit\": {  return <>edit</>}; break;\r\n            }\r\n        }; break;\r\n\r\n    }\r\n\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        tournaments: state.tournamentsEntity,\r\n        mode: state.matches.mode,\r\n        matches: state.matches.matches,\r\n        //places: state.placeEntity.places,\r\n        places: state.simplePlaceEntity.places,\r\n        myProfile: state.profileEntity.myProfile,\r\n        // пожалуй, нужно места загрузить сразу при запуске приложения и использовать их без изменения из хранилища, а не запрашивать каждый раз с сревера. они редко меняются.\r\n        //access: state.matches.access,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { goToPanel,\r\n    getTournamentTeams, setMode, setAccess, addMatchToShedule, getAllMatchesByTournament, delMatchFromShedule, setSelectedMatch,\r\n})(Shedule)","import React, { useEffect, useState } from 'react'\r\nimport {\r\n    RichCell, Avatar, FormLayout, FormItem, Input, InfoRow, Group, DatePicker,\r\n    Textarea, File, CellButton, Button, Header, List, Cell, TabsItem, Tabs, View, Panel,\r\n    ActionSheet, ActionSheetItem, Gallery, Headline\r\n} from '@vkontakte/vkui'\r\nimport { defaultPhotoPath } from '../../../../store/dataTypes/common'\r\nimport {\r\n    setTournamentWhenBegin, setTournamentMode, setTournamentWhenEnd, setTournamentName, setTournamentReglament, \r\n    setTournamentDetails, delGroupFromTournamentByKeyId, deleteTournamentGroup,\r\n    editGroupInTournament, addTournamentGroup, resetTournament, saveSelectedTournament, getTournamentNewBids, \r\n    acceptTeamToTournamentBid, declineTeamToTournamentBid,\r\n    getTournamentTeams, getTournamentGroups, replaceTeam, deleteTeam, changeTournamentTeamBidTournamentGroup, \r\n    deleteTeamFromTournament, setTournamentMatchLength, getTournamentTablesByTournamentId,\r\n} from '../../../../store/tournamentsReducer'\r\nimport {goToPanel} from '../../../../store/systemReducer'\r\nimport {\r\n    getTeamInfo, setTeamMode,\r\n} from '../../../../store/teamsReducer'\r\nimport { Icon24Camera, Icon28AddOutline } from '@vkontakte/icons';\r\nimport { connect } from 'react-redux';\r\nimport ListItem from '../ListItem/ListItem';\r\nimport BidListItem from '../ListItem/BidListItem';\r\nimport Icon24ChevronRightWithHistory from '../../Common/WithHistory/Icon24ChevronRightWithHistory';\r\nimport Shedule from '../../Common/Shedule/Shedule';\r\nimport ButtonWithNotify from '../../Common/WithNotify/ButtonWithNotify'\r\n\r\nconst w7percent = { width: '7%', textAlign: 'center', padding: '5px 0 5px 0' }\r\nconst w8percent = { width: '8%', textAlign: 'center', padding: '5px 0 5px 0'  }\r\nconst w20percent = { width: '20%', textAlign: 'left', padding: '5px 0 5px 0', overflow: 'hidden'  }\r\n\r\n\r\nconst TournamentItem = (props) => {\r\n    let currentDate = new Date();\r\n    let [tempGroupName, setTempGroupName] = useState(\"\");\r\n    let [currentTab, setCurrentTab] = useState(props.Tab ? props.Tab : \"info\");\r\n    let [activePopout, setActivePopout] = useState(null);\r\n    // let [slideIndex, setSlideIndex] = useState(0);\r\n    // let [isDraggable, setIsDraggable] = useState(true);\r\n    // let [showArrows, setShowArrows] = useState(true);\r\n\r\n    // это надо потом удалить. я вручную задал отображение вкладки расписания при открытии в режиме просмотра (для пользователей)\r\n\r\n    useEffect(() => {\r\n        props.getTournamentNewBids(props.tournaments.selected, props.myProfile)\r\n        props.getTournamentGroups(props.tournaments.selected)\r\n        props.getTournamentTablesByTournamentId(props.tournaments.selected.Id)\r\n\r\n    }, props.tournaments.selected)\r\n\r\n    \r\n    useEffect(() => {\r\n        props.mode == \"view\" ? setCurrentTab(\"shedule\") : setCurrentTab(\"info\")\r\n    }, props.mode)\r\n\r\n    useEffect(() => {\r\n        props.getTournamentTeams(props.tournaments.selected, props.myProfile)\r\n    }, props.tournaments.selected.TournamentGroups)\r\n\r\n\r\n    const addToTournament = () => {\r\n\r\n        if (tempGroupName.trim() != \"\") {\r\n            //addGroupToTournament\r\n            props.addTournamentGroup(props.tournaments.selected, props.myProfile, { Id: -1, Name: tempGroupName });\r\n            setTempGroupName(\"\");\r\n        }\r\n    }\r\n\r\n    const DelGroupFromTournament = (keyId, groupId) => {\r\n        //props.tournaments.selected.Id, item.KeyId, item.Id\r\n\r\n        if (groupId < 0)\r\n            props.delGroupFromTournamentByKeyId(props.tournaments.selected.Id, keyId); // (эту можно удалить пока локально без сервера)\r\n        else\r\n            props.deleteTournamentGroup(props.tournaments.selected, props.myProfile, groupId); // это летит на сервер, т.к. оно уже записано в БД (существующий турнир)\r\n    }\r\n\r\n    const AcceptBid = (item) => {\r\n        props.acceptTeamToTournamentBid(item, props.tournaments.selected, props.myProfile)\r\n\r\n    }\r\n\r\n    const DeclineBid = (item, text) => {\r\n        props.declineTeamToTournamentBid(item, props.tournaments.selected, props.myProfile, text);\r\n\r\n    }\r\n\r\n    const CellClick = (item) => {\r\n\r\n        props.getTeamInfo(item);\r\n        props.setTeamMode(\"view\");\r\n    }\r\n\r\n    // удаление команды из турнира\r\n    const DeleteTeam = (team, tg) => {\r\n\r\n        props.deleteTeamFromTournament(team, tg, props.myProfile, \"Ваша команда удалена из турнира\")\r\n    }\r\n\r\n    const SelectTournamentGroup = (newGroup, oldGroup, team) => {\r\n        props.changeTournamentTeamBidTournamentGroup(team, newGroup, oldGroup, props.myProfile)\r\n    }\r\n\r\n\r\n    const SaveTournament = () => {\r\n        //props.resetTournament();\r\n//debugger\r\n        props.saveSelectedTournament(props.tournaments.selected, props.myProfile)\r\n        //props.goToPanel(\"tournamentadmin\", false); // закрываем текущий турнир и выводим все турниры\r\n        props.setTournamentMode(\"view\");\r\n    }\r\n\r\n\r\n    const SetPopup = (team, oldTg) => {\r\n\r\n        setActivePopout(\r\n            <ActionSheet\r\n                onClose={() => setActivePopout(null)}\r\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\r\n            //toggleRef={this.baseTargetRef.current}\r\n            >\r\n                {\r\n                    props.tournaments.selected.TournamentGroups.map(newTg => {\r\n                        return (\r\n                            <ActionSheetItem\r\n                                onClick={() => {\r\n\r\n                                    SelectTournamentGroup(newTg, oldTg, team)\r\n                                }}\r\n                                autoclose\r\n                            >\r\n                                {newTg.Name}\r\n                            </ActionSheetItem>\r\n                        )\r\n                    })\r\n                }\r\n                <ActionSheetItem autoclose>Отмена</ActionSheetItem>\r\n            </ActionSheet>)\r\n\r\n    }\r\n\r\n\r\n    switch (props.mode) {\r\n        case \"view\": {\r\n\r\n            return (\r\n                <View popout={activePopout} activePanel={currentTab}>\r\n                    <Panel id=\"shedule\">\r\n                        <Tabs mode=\"buttons\">\r\n                            <TabsItem onClick={() => setCurrentTab(\"shedule\")}>Матчи</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"tables\")}>Таблицы</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"info\")}>О турнире</TabsItem>\r\n                        </Tabs>\r\n                        <FormLayout>\r\n                            {/* <FormItem top=\"Ваш город\">\r\n                                <InfoRow>\r\n                                    <Headline> {props.myProfile.CityUmbracoName}</Headline>\r\n                                </InfoRow>\r\n                            </FormItem> */}\r\n                            <Group \r\n                            //header={<Header mode=\"secondary\">Матчи</Header>}\r\n                            >\r\n                                <Shedule access=\"user\" tournament={props.tournaments.selected} todayIs={new Date()}></Shedule>\r\n                            </Group>\r\n                        </FormLayout>\r\n                    </Panel>\r\n                    <Panel id=\"info\">\r\n                        <Group>\r\n                            <Tabs mode=\"buttons\">\r\n                                <TabsItem onClick={() => setCurrentTab(\"shedule\")}>Матчи</TabsItem>\r\n                                <TabsItem onClick={() => setCurrentTab(\"tables\")}>Таблицы</TabsItem>\r\n                                <TabsItem onClick={() => setCurrentTab(\"info\")}>О турнире</TabsItem>\r\n                            </Tabs>\r\n                            <FormItem top=\"Ваш город\">\r\n                                <InfoRow>{props.myProfile.CityUmbracoName}</InfoRow>\r\n                            </FormItem>\r\n                            <FormItem top=\"Название турнира\" bottom=\"Имя турнира должно быть уникальным\">\r\n                                <InfoRow>{props.tournaments.selected.Name}</InfoRow>\r\n                            </FormItem>\r\n                            <FormItem top=\"Дата начала\">\r\n                                <InfoRow>{new Date(\r\n                                    props.tournaments.selected.WhenBegin.year,\r\n                                    props.tournaments.selected.WhenBegin.month - 1,\r\n                                    props.tournaments.selected.WhenBegin.day).toLocaleDateString()}</InfoRow>\r\n                            </FormItem>\r\n                            <FormItem top=\"Дата окончания\">\r\n                                <InfoRow>{new Date(\r\n                                    props.tournaments.selected.WhenEnd.year,\r\n                                    props.tournaments.selected.WhenEnd.month - 1,\r\n                                    props.tournaments.selected.WhenEnd.day).toLocaleDateString()}</InfoRow>\r\n                            </FormItem>\r\n                            <FormItem top=\"Описание турнира\">\r\n                                <InfoRow>{props.tournaments.selected.Details}</InfoRow>\r\n                            </FormItem>\r\n                            <FormItem top=\"Регламент турнира\">\r\n                                <InfoRow>{props.tournaments.selected.Reglament}</InfoRow>\r\n                            </FormItem>\r\n                            <Group header={<Header mode=\"secondary\">Группы</Header>}>\r\n                                {(props.tournaments.selected.TournamentGroups && props.tournaments.selected.TournamentGroups.length > 0) ?\r\n                                    <List>\r\n                                        {props.tournaments.selected.TournamentGroups.map((item) => <InfoRow>{item.Name}</InfoRow>)}\r\n                                    </List>\r\n                                    :\r\n                                    <FormItem>\r\n                                        <InfoRow>Нет групп</InfoRow>\r\n                                    </FormItem>\r\n                                }\r\n                            </Group>\r\n                        </Group>\r\n                    </Panel>\r\n                    <Panel id=\"tables\">\r\n                        <Group>\r\n                            <Tabs mode=\"buttons\">\r\n                                <TabsItem onClick={() => setCurrentTab(\"shedule\")}>Матчи</TabsItem>\r\n                                <TabsItem onClick={() => setCurrentTab(\"tables\")}>Таблицы</TabsItem>\r\n                                <TabsItem onClick={() => setCurrentTab(\"info\")}>О турнире</TabsItem>\r\n                            </Tabs>\r\n                            <FormItem top=\"Ваш город\">\r\n                                <InfoRow>{props.myProfile.CityUmbracoName}</InfoRow>\r\n                            </FormItem>\r\n                            <Group header={<Header mode=\"secondary\">Группы</Header>}>\r\n                                {(props.tournaments.selected.TournamentGroups && props.tournaments.selected.TournamentGroups.length > 0) ?\r\n                                    <List>\r\n                                        {props.tournaments.selected.TournamentGroups.map((item) => {\r\n                                            if (item.Name != \"\") {\r\n                                                let table = props.tournaments.selectedTables.filter(tT => tT.TournamentGroupId == item.Id);\r\n                                                table.sort((firstItem, secondItem) => firstItem.Place - secondItem.Place);\r\n                                                let chet = false;\r\n                                                return (\r\n                                                    <>\r\n                                                        <InfoRow>\r\n                                                            <Headline> Группа/лига: {item.Name}</Headline>\r\n                                                        <table style={{width: '100%'}}>\r\n                                                            <tr>\r\n                                                                <th style={w7percent}>М</th>\r\n                                                                <th style={w20percent}>Команда</th>\r\n                                                                <th style={w8percent}>И</th>\r\n                                                                <th style={w8percent}>В</th>\r\n                                                                <th style={w8percent}>П</th>\r\n                                                                <th style={w8percent}>Н</th>\r\n                                                                <th style={w8percent}>МЗ</th>\r\n                                                                <th style={w8percent}>МП</th>\r\n                                                                <th style={w8percent}>МР</th>\r\n                                                                <th style={w8percent}>О</th>\r\n                                                            </tr>\r\n                                                            {\r\n                                                                table.map((row) => {\r\n                                                                    chet = !chet;\r\n                                                                    return (\r\n                                                                        <tr style={chet ? {backgroundColor: 'lightgray'} : {backgroundColor: 'white'}}>\r\n                                                                            <td style={w7percent}>{row.Place}</td>\r\n                                                                            <td style={w20percent}>{row.TeamName}</td>\r\n                                                                            <td style={w8percent}>{row.Games}</td>\r\n                                                                            <td style={w8percent}>{row.Wins}</td>\r\n                                                                            <td style={w8percent}>{row.Loses}</td>\r\n                                                                            <td style={w8percent}>{row.Draws}</td>\r\n                                                                            <td style={w8percent}>{row.GoalsScored}</td>\r\n                                                                            <td style={w8percent}>{row.GoalsMissed}</td>\r\n                                                                            <td style={w8percent}>{row.GoalsDifference}</td>\r\n                                                                            <td style={w8percent}>{row.Points}</td>\r\n                                                                        </tr>\r\n                                                                    )\r\n\r\n                                                                }\r\n\r\n                                                                )}\r\n                                                        </table>\r\n                                                        <br />\r\n                                                        <br />\r\n                                                        </InfoRow>\r\n                                                    </>\r\n\r\n                                                )\r\n                                            }\r\n                                            else\r\n                                                return null;\r\n                                        })\r\n                                        }\r\n                                    </List>\r\n                                    :\r\n                                    <FormItem>\r\n                                        <InfoRow>Нет групп</InfoRow>\r\n                                    </FormItem>\r\n                                }\r\n                            </Group>\r\n                        </Group>\r\n                    </Panel>\r\n\r\n                </View>\r\n            )\r\n        }; break;\r\n        case \"add\": {\r\n            return (\r\n                <Group>\r\n                    <Header>Новый турнир</Header>\r\n                    <FormLayout>\r\n                        <FormItem top=\"Ваш город\">\r\n                            <InfoRow>{props.myProfile.CityUmbracoName}</InfoRow>\r\n                        </FormItem>\r\n                        <FormItem top=\"Название турнира\">\r\n                            <Input type=\"text\" defaultValue={props.tournaments.selected.Name} value={props.tournaments.selected.Name} onChange={e => props.setTournamentName(e.currentTarget.value)} placeholder=\"Например, II чемпионат города Истра 2023 года на призы...\" />\r\n                        </FormItem>\r\n                        <FormItem top=\"Дата начала\">\r\n                            <DatePicker\r\n                                min={{ day: 1, month: 1, year: currentDate.getFullYear() - 1 }}\r\n                                max={{ day: 1, month: 1, year: currentDate.getFullYear() + 1 }}\r\n                                defaultValue={props.tournaments.selected.WhenBegin}\r\n                                //value={props.tournaments.selected.WhenBegin}\r\n                                onDateChange={value => props.setTournamentWhenBegin(value)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem top=\"Дата окончания\">\r\n                            <DatePicker\r\n                                min={{ day: 1, month: 1, year: currentDate.getFullYear() - 1 }}\r\n                                max={{ day: 1, month: 1, year: currentDate.getFullYear() + 1 }}\r\n                                defaultValue={props.tournaments.selected.WhenEnd}\r\n                                //value={props.tournaments.selected.WhenEnd}\r\n                                onDateChange={value => props.setTournamentWhenEnd(value)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem top=\"Описание турнира\">\r\n                            <Textarea defaultValue={props.tournaments.selected.Details} value={props.tournaments.selected.Details} onChange={e => props.setTournamentDetails(e.currentTarget.value)} placeholder=\"Описание турнира\" />\r\n                        </FormItem>\r\n                        <FormItem top=\"Регламент турнира\">\r\n                            <Textarea defaultValue={props.tournaments.selected.Reglament} value={props.tournaments.selected.Reglament} placeholder=\"Регламент турнира\" onChange={e => props.setTournamentReglament(e.currentTarget.value)} />\r\n                        </FormItem>\r\n                        <FormItem top=\"Длительность матча, минут\">\r\n                            <Input type=\"Number\"\r\n                                defaultValue={props.tournaments.selected.MatchLength}\r\n                                value={props.tournaments.selected.MatchLength}\r\n                                placeholder=\"60\"\r\n                                onChange={e => props.setTournamentMatchLength(e.currentTarget.value)}\r\n                            ></Input>\r\n                        </FormItem>\r\n                        {/* <FormItem top=\"Загрузите ваше фото\">\r\n                            <File before={<Icon24Camera />} controlSize=\"m\">\r\n                                Выбрать фото\r\n                            </File>\r\n                        </FormItem> */}\r\n                        \r\n                        <FormItem top=\"Подверждение\">\r\n                            <ButtonWithNotify Message=\"Создать новый турнир?\" Yes={SaveTournament}>Создать</ButtonWithNotify>\r\n                            <ButtonWithNotify Message=\"Не создавать турнир?\" Yes={props.resetTournament} mode=\"secondary\">Отмена</ButtonWithNotify>\r\n                        </FormItem>\r\n                    </FormLayout>\r\n                </Group>\r\n            )\r\n        }; break;\r\n        case \"edit\": {\r\n            return (\r\n                <View popout={activePopout} activePanel={currentTab}>\r\n                    <Panel id=\"info\">\r\n                        <Group>\r\n                            <Header>Управление турниром</Header>\r\n                            <Tabs mode=\"buttons\">\r\n                                <TabsItem onClick={() => setCurrentTab(\"info\")}>Основное</TabsItem>\r\n                                <TabsItem onClick={() => setCurrentTab(\"bids\")}>Заявки</TabsItem>\r\n                                <TabsItem onClick={() => setCurrentTab(\"teams\")}>Команды</TabsItem>\r\n                                <TabsItem onClick={() => setCurrentTab(\"shedule\")}>Расписание</TabsItem>\r\n                            </Tabs>\r\n                            <FormLayout>\r\n                                <FormItem top=\"Ваш город\">\r\n                                    <InfoRow>{props.myProfile.CityUmbracoName}</InfoRow>\r\n                                </FormItem>\r\n                                <FormItem top=\"Название турнира\">\r\n                                    <Input type=\"text\" defaultValue={props.tournaments.selected.Name} onChange={e => props.setTournamentName(e.currentTarget.value)} placeholder=\"Например, II чемпионат города Истра 2023 года на призы...\" />\r\n                                </FormItem>\r\n                                <FormItem top=\"Дата начала\">\r\n                                    <DatePicker\r\n                                        min={{ day: 1, month: 1, year: currentDate.getFullYear() - 1 }}\r\n                                        max={{ day: 1, month: 1, year: currentDate.getFullYear() + 1 }}\r\n                                        defaultValue={props.tournaments.selected.WhenBegin}\r\n                                        //value={props.tournaments.selected.WhenBegin}\r\n                                        onDateChange={(value) => props.setTournamentWhenBegin(value)}\r\n                                        //dayPlaceholder=\"ДД\"\r\n                                        //monthPlaceholder=\"ММММ\"\r\n                                        //yearPlaceholder=\"ГГГГ\"\r\n                                    />\r\n                                </FormItem>\r\n                                <FormItem top=\"Дата окончания\">\r\n                                    <DatePicker\r\n                                        min={{ day: 1, month: 1, year: currentDate.getFullYear() - 1 }}\r\n                                        max={{ day: 1, month: 1, year: currentDate.getFullYear() + 1 }}\r\n                                        defaultValue={props.tournaments.selected.WhenEnd}\r\n                                        //value={props.tournaments.selected.WhenBegin}\r\n                                        onDateChange={value => props.setTournamentWhenEnd(value)}\r\n                                    />\r\n                                </FormItem>\r\n                                <FormItem top=\"Описание турнира\">\r\n                                    <Textarea defaultValue={props.tournaments.selected.Details} onChange={e => props.setTournamentDetails(e.currentTarget.value)} placeholder=\"Описание турнира\" />\r\n                                </FormItem>\r\n                                <FormItem top=\"Регламент турнира\">\r\n                                    <Textarea defaultValue={props.tournaments.selected.Reglament} placeholder=\"Регламент турнира\" onChange={e => props.setTournamentReglament(e.currentTarget.value)} />\r\n                                </FormItem>\r\n                                <FormItem top=\"Длительность матча, минут\">\r\n                                    <Input type=\"Number\"\r\n                                        defaultValue={props.tournaments.selected.MatchLength}\r\n                                        value={props.tournaments.selected.MatchLength}\r\n                                        placeholder=\"60\"\r\n                                        onChange={e => props.setTournamentMatchLength(e.currentTarget.value)}\r\n                                    ></Input>\r\n                                </FormItem>\r\n                                {/* <FormItem top=\"Загрузите ваше фото\">\r\n                            <File before={<Icon24Camera />} controlSize=\"m\">\r\n                                Выбрать фото\r\n                            </File>\r\n                        </FormItem> */}\r\n                                <Group header={<Header mode=\"secondary\">Группы</Header>}>\r\n                                    {(props.tournaments.selected.TournamentGroups && props.tournaments.selected.TournamentGroups.length > 0) ?\r\n                                        <List>\r\n                                            {props.tournaments.selected.TournamentGroups.map((item) => <ListItem KeyId={item.KeyId} Delete={() => DelGroupFromTournament(item.KeyId, item.Id)} Name={item.Name}></ListItem>)}\r\n                                        </List>\r\n                                        :\r\n                                        <FormItem>\r\n                                            <InfoRow>Нет групп</InfoRow>\r\n                                        </FormItem>\r\n                                    }\r\n                                </Group>\r\n                                <FormItem top=\"Новая группа/лига\">\r\n                                    <Input type=\"text\" defaultValue={tempGroupName} value={tempGroupName} onChange={e => setTempGroupName(e.currentTarget.value)} placeholder=\"Например, Лига 1\" />\r\n                                    <CellButton onClick={addToTournament} before={<Icon28AddOutline />}>Добавить группу</CellButton>\r\n                                </FormItem>\r\n                                <FormItem top=\"Подверждение\">\r\n                                    <ButtonWithNotify Message=\"Внести изменения в турнир?\" Yes={() => props.saveSelectedTournament(props.tournaments.selected, props.myProfile)}>Внести изменения</ButtonWithNotify>\r\n                                    {/* <Button onClick={props.resetTournament} mode=\"secondary\">Отмена</Button> */}\r\n                                </FormItem>\r\n                            </FormLayout>\r\n                        </Group>\r\n                    </Panel>\r\n                    <Panel id=\"bids\">\r\n                        <Header>Заявки от команд</Header>\r\n                        <Tabs mode=\"buttons\">\r\n                            <TabsItem onClick={() => setCurrentTab(\"info\")}>Основное</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"bids\")}>Заявки</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"teams\")}>Команды</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"shedule\")}>Расписание</TabsItem>\r\n                        </Tabs>\r\n                        <FormLayout>\r\n                            <FormItem top=\"Ваш город\">\r\n                                <InfoRow>{props.myProfile.CityUmbracoName}</InfoRow>\r\n                            </FormItem>\r\n                            <Group header={<Header mode=\"secondary\">Заявки</Header>}>\r\n                                {(props.tournaments.bidsNew && props.tournaments.bidsNew.length > 0) ?\r\n                                    <List>\r\n                                        {props.tournaments.bidsNew.map((item) =>\r\n                                            <BidListItem\r\n                                                KeyId={item.KeyId}\r\n                                                Accept={AcceptBid}\r\n                                                Decline={DeclineBid}\r\n                                                Item={item}\r\n                                            >\r\n\r\n                                            </BidListItem>)}\r\n                                    </List>\r\n                                    :\r\n                                    <FormItem>\r\n                                        <InfoRow>Нет новых заявок</InfoRow>\r\n                                    </FormItem>\r\n                                }\r\n                            </Group>\r\n                        </FormLayout>\r\n                    </Panel>\r\n                    <Panel id=\"teams\">\r\n                        <Header>Команды по группам</Header>\r\n                        <Tabs mode=\"buttons\">\r\n                            <TabsItem onClick={() => setCurrentTab(\"info\")}>Основное</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"bids\")}>Заявки</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"teams\")}>Команды</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"shedule\")}>Расписание</TabsItem>\r\n                        </Tabs>\r\n                        <FormLayout>\r\n                            <FormItem top=\"Ваш город\">\r\n                                <InfoRow>{props.myProfile.CityUmbracoName}</InfoRow>\r\n                            </FormItem>\r\n                            <Group header={<Header mode=\"secondary\">Группы</Header>}>\r\n                                {props.tournaments.selected.TournamentGroups.map(tg => {\r\n\r\n                                    return (\r\n                                        <Group header={<Header>{tg.Name}</Header>}>\r\n                                            <List>\r\n                                                {\r\n                                                    tg.Teams.map(team => {\r\n\r\n                                                        return (\r\n                                                            <RichCell\r\n                                                                caption={team.Details}\r\n                                                                after={<Icon24ChevronRightWithHistory\r\n                                                                    handleClick={() => CellClick(team)}\r\n                                                                    toMenuName=\"teamitem\"\r\n                                                                    data-story=\"teamitem\"\r\n                                                                ></Icon24ChevronRightWithHistory>\r\n                                                                }\r\n                                                                actions={\r\n                                                                    <>\r\n                                                                        <Button onClick={() => SetPopup(team, tg)} mode=\"primary\">Переместить</Button>\r\n                                                                        <ButtonWithNotify  Message=\"Удалить команду из турнира?\" Yes={() => DeleteTeam(team, tg)} mode=\"destructive\">Удалить</ButtonWithNotify>\r\n                                                                    </>\r\n                                                                }\r\n                                                            >{team.Name}</RichCell>\r\n                                                        )\r\n                                                    })\r\n                                                }\r\n                                            </List>\r\n                                        </Group>)\r\n\r\n                                })}\r\n\r\n                                {/* {(props.tournaments.bidsNew && props.tournaments.bidsNew.length > 0) ?\r\n                                    <List>\r\n                                        {props.tournaments.bidsNew.map((item) => \r\n                                        <BidListItem\r\n                                            KeyId={item.KeyId} \r\n                                            Accept={AcceptBid}\r\n                                            Decline={DeclineBid}\r\n                                            Item={item}\r\n                                            >\r\n\r\n                                        </BidListItem>)}\r\n                                    </List>\r\n                                    :\r\n                                    <FormItem>\r\n                                        <InfoRow>Нет новых заявок</InfoRow>\r\n                                    </FormItem>\r\n                                } */}\r\n                            </Group>\r\n                        </FormLayout>\r\n                    </Panel>\r\n                    <Panel id=\"shedule\">\r\n                        <Header>Расписание</Header>\r\n                        <Tabs mode=\"buttons\">\r\n                            <TabsItem onClick={() => setCurrentTab(\"info\")}>Основное</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"bids\")}>Заявки</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"teams\")}>Команды</TabsItem>\r\n                            <TabsItem onClick={() => setCurrentTab(\"shedule\")}>Расписание</TabsItem>\r\n                        </Tabs>\r\n                        <FormLayout>\r\n                            <FormItem top=\"Ваш город\">\r\n                                <InfoRow>{props.myProfile.CityUmbracoName}</InfoRow>\r\n                            </FormItem>\r\n                            <Group header={<Header mode=\"secondary\">Матчи</Header>}>\r\n                                <Shedule access=\"admin\" tournament={props.tournaments.selected} todayIs={new Date()}></Shedule>\r\n                            </Group>\r\n                        </FormLayout>\r\n                    </Panel>\r\n\r\n                </View>\r\n                // <Tabs>\r\n                //     <TabsItem>\r\n\r\n                //     </TabsItem>\r\n                // </Tabs>\r\n\r\n            )\r\n        }; break;\r\n    }\r\n\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        tournaments: state.tournamentsEntity,\r\n        SelectedName: state.tournamentsEntity.selected.Name,\r\n        TournamentTables: state.tournamentsEntity.selectedTables,\r\n        cities: state.cityEntity.cities,\r\n        myProfile: state.profileEntity.myProfile,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {setTournamentMode, goToPanel,\r\n    getTournamentTeams, getTournamentGroups, replaceTeam, deleteTeam, getTeamInfo, setTeamMode, changeTournamentTeamBidTournamentGroup, deleteTeamFromTournament, setTournamentMatchLength,\r\n    setTournamentWhenBegin, setTournamentWhenEnd, setTournamentName, setTournamentReglament, setTournamentDetails, acceptTeamToTournamentBid, declineTeamToTournamentBid,\r\n    delGroupFromTournamentByKeyId, deleteTournamentGroup, editGroupInTournament, addTournamentGroup, resetTournament, saveSelectedTournament, getTournamentNewBids, getTournamentTablesByTournamentId,\r\n})(TournamentItem)","import React, { Component } from 'react'\r\nimport {PanelHeaderBack } from '@vkontakte/vkui'\r\nimport { withHistorySave } from '../HOCs/withHistorySave'\r\n\r\nconst BackButton = (props) => {\r\n  \r\n \r\n    return (\r\n        <PanelHeaderBack isBack={true} {...props}></PanelHeaderBack>\r\n        \r\n    )\r\n}\r\n\r\nexport default withHistorySave(BackButton)","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, InfoRow, Group, List, CellButton, Button, FormItem, CustomSelect, DatePicker, CustomSelectOption, Header, SimpleCell, Div } from '@vkontakte/vkui'\r\nimport Icon24ChevronRightWithHistory from '../../Common/WithHistory/Icon24ChevronRightWithHistory'\r\nimport { connect } from 'react-redux';\r\nimport {\r\n    getTournamentTeams,\r\n} from '../../../../store/tournamentsReducer'\r\nimport {\r\n    setMode, setAccess, addMatchToShedule, getAllMatchesByTournament, delMatchFromShedule,\r\n} from '../../../../store/matchReducer'\r\nimport { Checkbox } from '@vkontakte/vkui/dist/components/Checkbox/Checkbox';\r\n\r\n\r\n// const SheduleContainer = (props) => {\r\n\r\n\r\n\r\n//     return <Shedule props={...props}></Shedule>\r\n// }\r\n\r\n\r\nconst Hot = (props) => {\r\n    \r\n    return (\r\n        <FormItem>\r\n            <Group header={props.Name}>\r\n                <List>\r\n                    {props.Matches && props.Matches.map(match => {\r\n                        let date = new Date(match.When);\r\n                        return (\r\n                                <RichCell\r\n                                    text={\r\n                                        match.Played ?\r\n                                            <span style={{ \"color\": \"green\" }}>Сыгран {`${date.toLocaleDateString()} в ${date.toLocaleTimeString()}`}</span> :\r\n                                            <span style={{ \"color\": \"blue\" }}>Состоится {`${date.toLocaleDateString()} в ${date.toLocaleTimeString()}`}</span>\r\n                                    }\r\n                                    caption={match && match.Place ? match.Place.Name : \"место не указано\"}\r\n                                >\r\n                                    {match.Played ?\r\n                                        `${match.Team1Name} ${match.Team1Goals} - ${match.Team2Goals} ${match.Team2Name}` :\r\n                                        `${match.Team1Name} - ${match.Team2Name}`\r\n                                    }\r\n                                </RichCell>\r\n                        )\r\n                    }\r\n                    )}\r\n                </List>\r\n            </Group>\r\n        </FormItem>\r\n    )\r\n                \r\n\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        tournaments: state.tournamentsEntity,\r\n        mode: state.matches.mode,\r\n        matches: state.matches.matches,\r\n        //places: state.placeEntity.places,\r\n        places: state.simplePlaceEntity.places,\r\n        myProfile: state.profileEntity.myProfile,\r\n        // пожалуй, нужно места загрузить сразу при запуске приложения и использовать их без изменения из хранилища, а не запрашивать каждый раз с сревера. они редко меняются.\r\n        //access: state.matches.access,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    getTournamentTeams, setMode, setAccess, addMatchToShedule, getAllMatchesByTournament, delMatchFromShedule,\r\n})(Hot)","import React, { Component } from 'react'\r\nimport {Card, PanelHeaderBack } from '@vkontakte/vkui'\r\nimport { withHistorySave } from '../HOCs/withHistorySave'\r\n\r\nconst CardWithHistory = (props) => {\r\n  \r\n \r\n    return (\r\n        <Card isBack={false} {...props}></Card>\r\n        \r\n    )\r\n}\r\n\r\nexport default withHistorySave(CardWithHistory)","import React, { Component } from 'react'\r\nimport { CellButton } from '@vkontakte/vkui'\r\nimport { withHistorySave } from '../HOCs/withHistorySave'\r\n\r\nconst CellButtonWithHistory = (props) => {\r\n  //debugger\r\n \r\n    return (\r\n        <CellButton isBack={false} {...props}></CellButton>\r\n        \r\n    )\r\n}\r\n\r\nexport default withHistorySave(CellButtonWithHistory)","import React, { Component } from 'react'\r\nimport {TabbarItem } from '@vkontakte/vkui'\r\nimport { withHistorySave } from '../HOCs/withHistorySave'\r\n\r\nconst TabbarItemWithHistory = (props) => {\r\n  \r\n \r\n    return (\r\n        <TabbarItem isBack={false} {...props}></TabbarItem>\r\n        \r\n    )\r\n}\r\n\r\nexport default withHistorySave(TabbarItemWithHistory)","import React from 'react'\r\n\r\nconst ProfilePanel = (props) => {\r\n    return (\r\n        <div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfilePanel","export default __webpack_public_path__ + \"static/media/player300-s.5ad7daca.png\";","export default __webpack_public_path__ + \"static/media/stadium300-s.e5a62e23.png\";","export default __webpack_public_path__ + \"static/media/tournament300.00b15e45.png\";","import {ampluaTypes, myProfile, users} from './constants/commonConstants'\r\nimport { ProfileAPI, errorObj } from './../utils/api/api.js'\r\nimport { authQueryString } from './../utils/api/server';\r\nimport { setGlobalPopout, setErrorMessage, resetError } from \"./systemReducer\";\r\n\r\n\r\nconst ANY_ACTION_TYPE = \"ANY_ACTION_TYPE\";\r\nconst PROFILE_SET_VK_PROFILE_INFO = \"PROFILE_SET_VK_PROFILE_INFO\";\r\nconst PROFILE_SET_USER_PROFILE = \"PROFILE_SET_USER_PROFILE\";\r\nconst PROFILE_SET_TRIED_TO_GET_PROFILE = \"PROFILE_SET_TRIED_TO_GET_PROFILE\";\r\n\r\nlet demoUser = users[0];\r\n\r\nconst initState = {\r\n    myProfile: null,\r\n    vkProfile: null,\r\n    triedToGetProfile: 0,\r\n\r\n     // level \r\n\r\n}\r\n\r\n\r\nexport let profileReducer = (state = initState, action) => \r\n{\r\n    switch (action.type){\r\n        case PROFILE_SET_VK_PROFILE_INFO: {\r\n            return {...state,\r\n                vkProfile: {...action.user},\r\n            };\r\n        }\r\n        case PROFILE_SET_USER_PROFILE: {\r\n            let birth = action.user.Birth ? `${new Date(action.user.Birth).getDate()}.${new Date(action.user.Birth).getMonth()}.${new Date(action.user.Birth).getYear()}` : null;\r\n\r\n            return {...state,\r\n                myProfile: {...action.user},\r\n                vkProfile: {...state.vkProfile,\r\n                bdate: birth\r\n                }\r\n            };\r\n        }\r\n        case PROFILE_SET_TRIED_TO_GET_PROFILE: {\r\n            return {...state,\r\n                triedToGetProfile: action.tried,\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const setVkProfileInfo = (user) => {\r\n    \r\n    return {\r\n        type: PROFILE_SET_VK_PROFILE_INFO,\r\n        user\r\n    }\r\n}\r\n\r\nexport const setUserProfile = (user) => {\r\n    return {\r\n        type: PROFILE_SET_USER_PROFILE,\r\n        user\r\n    }\r\n}\r\n\r\nexport const setTriedToGetProfile = (tried) => {\r\n    return {\r\n        type: PROFILE_SET_TRIED_TO_GET_PROFILE,\r\n        tried\r\n    }\r\n}\r\n\r\n\r\n\r\n// получение данных профиля (без авторегистрации)\r\nexport const getUserProfile = (vkUserData) => {\r\n    return dispatch => {\r\n        dispatch(setGlobalPopout(true))\r\n        dispatch(resetError())\r\n\r\n        if (authQueryString && authQueryString.length > 0)\r\n            ProfileAPI.getUserProfile(vkUserData)\r\n                .then(pl => {\r\n                    \r\n                    if (pl && pl.data) {\r\n                        dispatch(setUserProfile(pl.data));\r\n                        dispatch(setTriedToGetProfile(0));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        dispatch(setTriedToGetProfile(1))\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            dispatch(setErrorMessage(errorObj(\"Вы не авторизованы\")))\r\n            dispatch(setGlobalPopout(false))\r\n            //dispatch(setUserProfile(demoUser))\r\n            //dispatch(setTriedToGetProfile(true))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n// установка нового города пользователю\r\nexport const setUserProfileCity = (userProfile) => {\r\n    return dispatch => {\r\n        dispatch(setGlobalPopout(true))\r\n        dispatch(resetError())\r\n        debugger\r\n        if (authQueryString && authQueryString.length > 0)\r\n            ProfileAPI.setUserProfileCity(userProfile).then()\r\n                .then(pl => {\r\n                    debugger\r\n                    if (pl && pl.data) {\r\n                        dispatch(setUserProfile(pl.data));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        dispatch(setErrorMessage(errorObj(\"Не получен ответ от сервера\")))\r\n                        //dispatch(setGlobalPopout(false))\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            dispatch(setErrorMessage(errorObj(\"Вы не авторизованы\")))\r\n            dispatch(setGlobalPopout(false))\r\n        }\r\n    }\r\n}\r\n\r\n\r\n// авторизация (со встроенной регистрацией)\r\nexport const getAuthInfo = (vkProfileInfo) => {\r\n    return dispatch => {\r\n        dispatch(setGlobalPopout(true))\r\n        dispatch(resetError())\r\n\r\n        if (authQueryString && authQueryString.length > 0)\r\n            ProfileAPI.getAuthInfo(vkProfileInfo)\r\n                .then(pl => {\r\n                    if (pl) {\r\n                        dispatch(setUserProfile(pl.data));\r\n                        dispatch(setTriedToGetProfile(0));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        dispatch(setErrorMessage(errorObj(\"Ошибка при регистрации\")))\r\n                        dispatch(setGlobalPopout(false))\r\n\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            dispatch(setErrorMessage(errorObj(\"Вы не авторизованы\")))\r\n            dispatch(setGlobalPopout(false))\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default profileReducer;","import { ProfileAPI, CityAPI, errorObj } from './../utils/api/api.js'\r\nimport { authQueryString } from './../utils/api/server';\r\nimport { setGlobalPopout, setErrorMessage, resetError } from \"./systemReducer\";\r\nimport { setUserProfile } from \"./profileReducer\";\r\n\r\nconst CITY_GET_ALL_FROM_SERVER = \"CITY_GET_ALL_FROM_SERVER\";\r\n\r\n\r\nconst initState = {\r\n    cities: [],\r\n}\r\n\r\n\r\nlet cityReducer = (state = initState, action) => \r\n{\r\n    switch (action.type){\r\n        case CITY_GET_ALL_FROM_SERVER: {\r\n            return {...state,\r\n                cities: [...action.cities],\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const setCities = (cities) => {\r\n    return {\r\n        type: CITY_GET_ALL_FROM_SERVER,\r\n        cities\r\n    }\r\n}\r\n\r\nexport const getAllCitiesFromServer = () => {\r\n    return dispatch => {\r\n        if (authQueryString && authQueryString.length > 0)\r\n            CityAPI.getAll().then()\r\n                .then(pl => {\r\n                    \r\n                    if (pl && pl.data) {\r\n                        dispatch(setCities(pl.data));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        dispatch(setErrorMessage(errorObj(\"Не получен ответ от сервера\")))\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    \r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            \r\n            dispatch(setErrorMessage(errorObj(\"Вы не авторизованы\")))\r\n            dispatch(setGlobalPopout(false))\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default cityReducer;","import { ProfileAPI, CityAPI, errorObj, VKAPI } from './../utils/api/api.js'\r\nimport { authQueryString } from './../utils/api/server';\r\nimport { setGlobalPopout, setErrorMessage, resetError } from \"./systemReducer\";\r\nimport { setUserProfile } from \"./profileReducer\";\r\n\r\nconst CITY_GET_ALL_FROM_SERVER = \"CITY_GET_ALL_FROM_SERVER\";\r\nconst VK_SET_SELECTED_USER = \"VK_SET_SELECTED_USER\";\r\n\r\n\r\nconst initState = {\r\n    selectedUser: {},\r\n    cities: [],\r\n}\r\n\r\n\r\nlet vkReducer = (state = initState, action) => \r\n{\r\n    switch (action.type){\r\n        case CITY_GET_ALL_FROM_SERVER: {\r\n            return {...state,\r\n                cities: [...action.cities],\r\n            };\r\n        }\r\n        case VK_SET_SELECTED_USER:{\r\n            return {...state,\r\n                selectedUser: {...action.user},\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const setSelectedUser = (user) => {\r\n    return {\r\n        type: VK_SET_SELECTED_USER,\r\n        user\r\n    }\r\n}\r\n\r\nexport const setCities = (cities) => {\r\n    return {\r\n        type: CITY_GET_ALL_FROM_SERVER,\r\n        cities\r\n    }\r\n}\r\n\r\nexport const getUser = (id) => {\r\n    return dispatch => {\r\n        if (authQueryString && authQueryString.length > 0)\r\n            VKAPI.getUser(id)\r\n                .then(pl => {\r\n                    debugger\r\n                    if (pl && pl.data) {\r\n                        dispatch(setCities(pl.data));\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                    else {\r\n                        dispatch(setErrorMessage(errorObj(\"Не получен ответ от сервера\")))\r\n                        dispatch(setGlobalPopout(false))\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    \r\n                    dispatch(setErrorMessage(error))\r\n                    dispatch(setGlobalPopout(false))\r\n                })\r\n        else {\r\n            \r\n            dispatch(setErrorMessage(errorObj(\"Вы не авторизованы\")))\r\n            dispatch(setGlobalPopout(false))\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default vkReducer;","import React, { useEffect } from 'react'\r\nimport { RichCell, Avatar, Group, FormItem, Textarea } from '@vkontakte/vkui'\r\nimport {defaultPhotoPath} from '../../../../store/dataTypes/common'\r\nimport { dateToString, timeToString } from '../../../../utils/convertors/dateUtils';\r\n\r\nconst schet = {\r\n    fontWeight: 'bold', \r\n    color: 'yellow',\r\n    backgroundColor: 'gray',\r\n    padding: '1px 7px',\r\n    borderRadius: '10px',\r\n}\r\n\r\nconst win = {\r\n    fontWeight: 'bold',\r\n    //color: 'orange',\r\n}\r\n\r\nconst lose = {\r\n    color: 'darkgray',\r\n    //color: 'orange',\r\n}\r\n\r\nconst MatchItem = (props) => {\r\n    \r\n    \r\n    let match=props.match;\r\n    let place=props.Place;\r\n    let date = new Date(match.When);\r\n\r\n    return (\r\n        <Group>\r\n            <FormItem top=\"Группа/лига\">\r\n                {match.TournamentGroup.Name}\r\n            </FormItem>\r\n            <FormItem top=\"Команда 1\">\r\n                {match.Team1.Name} {match.Team1Goals} : {match.Team2Goals} {match.Team2.Name}\r\n            </FormItem>\r\n            \r\n            <FormItem top=\"Комментарий к матчу\">\r\n                <Textarea \r\n                value={match.Description} \r\n                readOnly\r\n                style={{minHeight: '100px'}}\r\n                ></Textarea>\r\n            </FormItem>\r\n            <FormItem top=\"Дата\">\r\n                {new Date(match.When).toLocaleDateString()}\r\n            </FormItem>\r\n            \r\n            <FormItem top=\"Место\">\r\n                {match.Place.Name}\r\n            </FormItem>\r\n            <FormItem top=\"Статус матча\">\r\n                {match.Played ? \"Сыгран\" : \"Не сыгран\"}\r\n            </FormItem>\r\n            \r\n        </Group>\r\n    ) \r\n        // return (\r\n        //     <RichCell\r\n        //         onClick={props.ClickHandler}\r\n        //         caption={place ? place.Name : \"Ошибка загрузки данных о месте\"}\r\n        //         text={\r\n        //             match.Played ?\r\n        //                 <span style={{ \"color\": \"green\" }}>Сыгран <span>в {`${dateToString(date, 0, 0, 0, true)}`}</span></span> :\r\n        //                 <span style={{ \"color\": \"blue\" }}>Состоится <span>в {`${dateToString(date, 0, 0, 0, true)}`}</span> в {timeToString(date.getHours(), date.getMinutes())}</span>\r\n        //         }\r\n        //     >\r\n        //         {match.Played ? <span>\r\n        //                 <span \r\n        //                     style={(+match.Team1Goals > +match.Team2Goals) ? win : (+match.Team1Goals == +match.Team2Goals) ? {} : lose}\r\n        //                     >{match.Team1.Name} </span>\r\n        //                 <span style={schet}>{match.Team1Goals} - {match.Team2Goals}</span>\r\n        //                 <span \r\n        //                     style={(+match.Team1Goals < +match.Team2Goals) ? win : (+match.Team1Goals == +match.Team2Goals) ? {} : lose}\r\n        //                 > {match.Team2.Name}</span>\r\n        //             </span> :\r\n        //             <span>{match.Team1.Name} - {match.Team2.Name}</span>\r\n        //         }\r\n        //     </RichCell>\r\n//         )\r\n }\r\n\r\nexport default MatchItem","import bridge from '@vkontakte/vk-bridge';\r\nimport { Card, CardGrid, Epic, FormItem, Group, Header, InfoRow, List, Panel, PanelHeader, PullToRefresh, ScreenSpinner, Tabbar, Title, View } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport {useIsConnected} from './store/selectors/selectors'\r\nimport request from 'request'\r\nimport { connect } from 'react-redux';\r\nimport ModalCommon from './components/Modals/ModalCommon/ModalCommon';\r\nimport SimpleCollectItem from './components/Panels/AdminPanel/Collect/SimpleCollect/SimpleCollectItem';\r\nimport TeamAdminPanel from './components/Panels/AdminPanel/Team/TeamAdminPanel';\r\nimport TeamItem from './components/Panels/AdminPanel/Team/TeamItem';\r\nimport TournamentAdminPanel from './components/Panels/AdminPanel/Tournament/TournamentAdminPanel';\r\nimport TournamentItem from './components/Panels/AdminPanel/Tournament/TournamentItem';\r\nimport BackButton from './components/Panels/Common/BackButton/BackButton';\r\nimport Hot from './components/Panels/Common/Hot/Hot';\r\nimport CardWithHistory from './components/Panels/Common/WithHistory/CardWithHistory';\r\nimport CellButtonWithHistory from './components/Panels/Common/WithHistory/CellButtonWithHistory';\r\nimport RichCellWithHistory from './components/Panels/Common/WithHistory/RichCellWithHistory';\r\nimport TabbarItemWithHistory from './components/Panels/Common/WithHistory/TabbarItemWithHistory';\r\nimport ButtonWithNotify from './components/Panels/Common/WithNotify/ButtonWithNotify';\r\nimport ProfilePanel from './components/Panels/ProfilePanel/ProfilePanel';\r\nimport player from './img/common/player300-s.png';\r\nimport stadium from './img/common/stadium300-s.png';\r\nimport tournament from './img/common/tournament300.png';\r\nimport { addBidTeamToTournamentGroup, cancelBidTeamToTournamentGroup, getActualTournamentsInCity } from './store/bidTeamsReducer';\r\nimport { getAllCitiesFromServer } from './store/cityReducer';\r\nimport { getAllSimpleCollectsInCityByCityUmbracoId, selectSimpleCollect, setCollectItemMode } from './store/collectReducer';\r\nimport { setActiveMenuItem } from './store/mainMenuReducer';\r\nimport { getMatchesInCurrentCity, setHotPanel } from './store/matchReducer';\r\nimport { getAuthInfo, getUserProfile, setTriedToGetProfile, setUserProfileCity, setVkProfileInfo } from './store/profileReducer';\r\nimport { getAllRentsInCityByCityId } from './store/rentReducer';\r\nimport { getAllSimplePlacesInCityByCityId } from './store/simplePlaceReducer';\r\nimport { goToPanel, resetError, setCurrentModalWindow, checkConnection, setGlobalPopout, \r\n\tsetLoading, setShowAdminTourneyTab, updateLoading } from './store/systemReducer';\r\nimport { getAllCityTournamentAdminsByCityId, getTournamentsByCityId, setSelectedTournament, setTournamentMode } from './store/tournamentsReducer';\r\nimport { getUser, setSelectedUser } from './store/vkReducer';\r\nimport { addToTime } from './utils/convertors/dateUtils';\r\nimport MatchItem from './components/Panels/AdminPanel/Match/MatchItem';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n\r\n\r\nconst App = (props) => {\r\n\tconst [fetchedUser, setUser] = useState(null);\r\n\tconst [isFetching, setIsFetching] = useState(false);\r\n\tconst debugModeOn = false; // флаг показа логов\r\n\t//const [popout, setPopout] = useState(props.globalPopout ? <ScreenSpinner size='large' /> : null);\r\n\t//const [modalWindow, setModalWindow] = useState(null);\r\n\tconst [viewCollectTab, setCollectViewTab] = useState(\"main\");\r\n\tconst [timerStarts, setTimerStarts] = useState(false);\r\n\tlet connectionTimer = null;\r\n\r\n\tconst cardStyle = {\r\n\t\tposition: 'absolute', \r\n\t\tbottom: '0px', \r\n\t\tleft:'0px',  \r\n\t\twidth: '100%', \r\n\t\theight: '20%',\r\n\t\tbackground: 'white', \r\n\t\tpadding: '15px 0',\r\n\t\ttextAlign: 'center',\r\n\t\topacity: '0.9',\r\n\t\tborderRadius: '10px'\r\n\t}\r\n\r\n\r\n\r\n\t// функция вывода на консоль. легко отключается флагом\r\n\tconst consoleLog = (message) => {\r\n\t\tif (debugModeOn)\r\n\t\t\tconsole.log(message);\r\n\t}\r\n\r\n// интервальная проверка новых мест, сборов и аренд\r\n\tconst checkMovings = () => {\r\n\t\t//alert('Привет');\r\n\t\tif (props.cities && props.cities.length > 0 && props.myProfile && props.myProfile.CityUmbracoId != null &&\r\n\t\t\tprops.myProfile.CityUmbracoId != -1 && new Date(props.myProfile.Birth).getFullYear() >= 1920 && props.places.length == 0) {\r\n\t\t\t// загружаем места этого города\r\n\t\t\t{\r\n\t\t\t\t// получаем список простых мест по umbId города\r\n\t\t\t\tprops.getAllSimplePlacesInCityByCityId(props.myProfile.CityUmbracoId);\r\n\r\n\t\t\t\t// получаем список простых сборов\r\n\t\t\t\tprops.getAllSimpleCollectsInCityByCityUmbracoId(props.myProfile.CityUmbracoId);\r\n\t\r\n\t\t\t\t// получаем список аренд\r\n\t\t\t\tprops.getAllRentsInCityByCityId(props.myProfile.CityUmbracoId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n// интервальная проверка соединения\r\n\tconst CheckConnection = () => {\r\n\t\tlet ii = store.getState();\r\n\r\n\t\tif (ii.system.Connected) {\r\n\t\t\tconsoleLog(\"timer stopped in CheckConnection\");\r\n\t\t\tclearInterval(connectionTimer);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tconsoleLog(\"timer fires in CheckConnection, props.Connected=\" + ii.system.Connected);\r\n\t\t\tprops.checkConnection();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst CloseModal = () => {\r\n\t\tprops.resetError()\r\n\t\tprops.setCurrentModalWindow(null)\r\n\t}\r\n\r\n\r\n\t// !! ================ useffects загрузка приложения ================== !!\r\n\r\n\t// загрузка информации о пользователе ВК (внутри первого useffect с пустыми параметрами)\r\n\tasync function fetchData() {\r\n\r\n\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\r\n\t\tsetUser(user);\r\n\t\tprops.setVkProfileInfo(user);\r\n\r\n\t}\r\n\r\n\t// 1 это системное, загрузка приложения вк\r\n\tuseEffect(() => {\r\n\t\tif (props.myProfile && props.myProfile.CityUmbracoId != undefined){\r\n\t\t\tprops.setLoading(true);\r\n\t\t}\r\n\r\n\t\tbridge.subscribe(({ detail: { type, data } }) => {\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\r\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\r\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\r\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfetchData();\r\n\t\tconsoleLog(\"1 start fetchData()\")\r\n\r\n\t}, []);\r\n\r\n\t// 2 при загрузке приложения\r\n\tuseEffect(() => {\r\n\r\n\t\tif (!props.Connected) {\r\n\r\n\t\t\tconsoleLog(\"2 start checkConnection()\")\r\n\t\t\tprops.checkConnection();\r\n\t\t\tconnectionTimer = setInterval(() => {\r\n\t\t\t\tCheckConnection()\r\n\t\t\t}, 5000)\r\n\t\t}\r\n\t}, [props.vkProfile])\r\n\r\n\t// 3 после загрузки профиля вк проверяем инициируем соединение с сервером\r\n\tuseEffect(() => {\r\n\t\t// нужно узнать город, далее если этого города нет в списке поддерживаемых, предлжить выбрать другой город и отправить заявку на добавление города. Всё это в модалке\r\n\t\t// другой вопрос. если кто-то создает фейковый сбор, как гарантировать другим, что это не фейк?\r\n\t\t// ввести в рейтинг поле \"гарант сбора. если поступает жалоба на сбор (не было сбора), модератор засчитывает штрафной балл организатору\"\r\n\t\t// у людей, которые первый раз собирают, писать город из профиля, количество друзей и то, что человек еще не собирал ни разу, а значит может быть фейком\r\n\t\t// еще нужно запрашивать права на доступ к инфе: город, дата рождения, друзья, \r\n\t\t// а еще в бэке надо сделать так, чтобы записи в Leg и City не плодились, а искали соответствующие из умбрако и ставили их Id\r\n\t\tconsoleLog(\"3 check if. Connected=\" + (props.Connected) + \" , vkProfile=\" + (props.vkProfile!=null) + \", myProfile=\" + (props.myProfile==null))\r\n\t\t\r\n\t\tif (props.Connected && props.vkProfile && props.vkProfile.city && !props.myProfile) {\r\n\t\t\tconsoleLog(\"3 start getUserProfile()\")\r\n\t\t\tprops.getUserProfile(props.vkProfile);\r\n\t\t}\r\n\r\n\t\tif (props.Connected) {\r\n\t\t\tconsoleLog(\"3 timer stopped\");\r\n\t\t\t//clearInterval(connectionTimer);\r\n\t\t}\r\n\r\n\t}, [props.Connected, props.vkProfile])\r\n\r\n\t// 4 загрузка профиля\r\n\tuseEffect(() => {\r\n\r\n\t\tif (props.vkProfile && props.vkProfile.city && props.myProfile) {\r\n\t\t\tconsoleLog(\"4 vkprofile and myprofile loaded\")\r\n\r\n\t\t\tif((props.vkProfile.bdate != undefined) && (props.vkProfile.bdate.split('.').length > 2) && (new Date(props.myProfile.Birth).getFullYear() > 1920)) // \r\n\t\t\t{\r\n\t\t\t\tconsoleLog(\"4 no error in birthdate from vk\")\r\n\r\n\t\t\t\tprops.setCurrentModalWindow(null);\r\n\t\t\t\tprops.getAllCitiesFromServer();\r\n\t\t\t\tconsoleLog(\"4 start getAllCitiesFromServer()\")\r\n\r\n\t\t\t\tif (props.myProfile.CityUmbracoId != null && props.myProfile.CityUmbracoId == -1) {\r\n\t\t\t\tconsoleLog(\"4 error in userprofile city\")\r\n\r\n\t\t\t\t\t//debugger\r\n\t\t\t\t\t// предлагаем выбрать город\r\n\t\t\t\t\tprops.setGlobalPopout(false);\r\n\t\t\t\t\tprops.setCurrentModalWindow(<ModalCommon modalName=\"SelectCity\" data={{ profile: props.myProfile, cities: props.cities }} action={props.setUserProfileCity} Close={() => props.setCurrentModalWindow(null)}></ModalCommon>)\r\n\t\t\t\t}\r\n\t\t\t//props.getUser(19757699);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tconsoleLog(\"4  error in birthdate from vk or myProfile.Birth.getFullYear < 1920\")\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\t// не загрузился город или вк профиль или мой профиль\r\n\t\t}\r\n\r\n\t}, [props.myProfile])\r\n\t\r\n\t// 5 регистрация пользователя\r\n\tuseEffect(() => {\r\n\r\n\t\tif (props.vkProfile && props.vkProfile.city) {\r\n\t\t\tif ((!props.myProfile) && (props.triedToGetProfile>0)) { // не зарегистрирован\r\n\t\t\t\tconsoleLog(\"5 not registred\")\r\n\r\n\t\t\t\tif ((props.vkProfile) && (props.vkProfile.bdate == undefined))\r\n\t\t\t\t{\r\n\t\t\t\t\tconsoleLog(\"5 selectBirth\")\r\n\r\n\t\t\t\t\tprops.setGlobalPopout(false);\r\n\t\t\t\t\tprops.setCurrentModalWindow(<ModalCommon modalName=\"SelectBirth\" data={props.vkProfile} action={props.setVkProfileInfo} action2={props.setTriedToGetProfile} Close={() => props.setCurrentModalWindow(null)}></ModalCommon>)\r\n\t\t\t\t}\r\n\t\t\t\telse if ((props.vkProfile) && (props.vkProfile.bdate.split('.').length == 2) && (new Date(props.myProfile.Birth).getFullYear() < 1920)) {\r\n\t\t\t\t\tconsoleLog(\"5 selectBirthYear\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tprops.setGlobalPopout(false);\r\n\t\t\t\t\tprops.setCurrentModalWindow(<ModalCommon modalName=\"SelectBirthYear\" data={props.vkProfile} action={props.setVkProfileInfo} action2={props.setTriedToGetProfile} Close={() => props.setCurrentModalWindow(null)}></ModalCommon>)\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tprops.getAuthInfo(props.vkProfile); // регаем\r\n\t\t\t\t\tconsoleLog(\"5 start getAuthInfo() - register\")\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, [props.triedToGetProfile])\r\n\t\r\n\t// 6 загрузка мест, админов города, текущих турниров\r\n\tuseEffect(() => {\r\n\t\t//consoleLog(\"6 cities fire\")\r\n\t\t// а это уже когда прогрузился и выбран город профиля\r\n\t\tif (props.cities && props.cities.length > 0 && props.myProfile && props.myProfile.CityUmbracoId != null &&\r\n\t\t\tprops.myProfile.CityUmbracoId != -1 && new Date(props.myProfile.Birth).getFullYear() >= 1920 && props.places.length == 0) {\r\n\t\t\t\r\n\t\t\tconsoleLog(\"6 start loadAll()\")\r\n\r\n\r\n\t\t\t// загружаем места этого города\r\n\t\t\tprops.goToPanel(\"hot\", false)\r\n\r\n\t\t\t// получаем список админов турниров города по umbId города\r\n\t\t\tprops.getAllCityTournamentAdminsByCityId(props.myProfile.CityUmbracoId);\r\n\r\n\t\t\t// получаем список активных турниров города по umbId города и текущей дате\r\n\t\t\tprops.getTournamentsByCityId(props.myProfile.CityUmbracoId);\r\n\r\n\t\t\t// получаем список простых мест по umbId города\r\n\t\t\tprops.getAllSimplePlacesInCityByCityId(props.myProfile.CityUmbracoId);\r\n\r\n\t\t\t// получаем список простых сборов\r\n\t\t\tprops.getAllSimpleCollectsInCityByCityUmbracoId(props.myProfile.CityUmbracoId);\r\n\r\n\t\t\t// получаем список аренд\r\n\t\t\tprops.getAllRentsInCityByCityId(props.myProfile.CityUmbracoId);\r\n\r\n\t\t\tif (!timerStarts)\r\n\t\t\t{\r\n\t\t\t\tsetTimerStarts(true);\r\n\t\t\t\tsetTimeout(() => setInterval(() => checkMovings(), 20000), 20000)\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// это пока не прогрузился город профиля (не выбран)\r\n\t\tif (props.cities && props.cities.length > 0 && props.myProfile && props.myProfile.CityUmbracoId != null &&\r\n\t\t\tprops.myProfile.CityUmbracoId == -1 && new Date(props.myProfile.Birth).getFullYear() >= 1920) // важно, чтобы все это прогрузилось уже\r\n\t\t{\r\n\r\n\t\t\t// предлагаем выбрать город\r\n\t\t\tprops.setGlobalPopout(false);\r\n\t\t\tprops.setCurrentModalWindow(<ModalCommon modalName=\"SelectCity\" data={{ profile: props.myProfile, cities: props.cities }} action={props.setUserProfileCity} Close={() => props.setCurrentModalWindow(null)}></ModalCommon>)\r\n\t\t}\r\n\r\n\r\n\t}, [ props.cities]) //props.myProfile, props.vkProfile,\r\n\r\n\t// 7 загрузка матчей в выбранном городе\r\n\tuseEffect(() => {\r\n\t\tif (props.places && props.places.length > 0) {\r\n\r\n\t\t\tprops.getMatchesInCurrentCity(props.myProfile);\r\n\t\t\tconsoleLog(\"7 start getMatchesInCurrentCity()\")\r\n\t\t\t\r\n\t\t\t// завершили загрузку\r\n\t\t\tif (props.Loading)\r\n\t\t\t\tprops.setLoading(false);\r\n\t\t}\r\n\t}, [props.places])\r\n\r\n\t// при смене глобального Popout и возникновении ошибки\r\n\tuseEffect(() => {\r\n\t\tif (props.errorObject && props.errorObject != \"\") {\r\n\t\t}\r\n\t\telse {\r\n\t\t}\r\n\t}, [props.errorObject])\r\n\r\n    // отобразить панель админа турниров\r\n\tuseEffect(() => {\r\n\t\t// если загрузились админы города\r\n\t\tif ((props.tournamentAdmins != undefined) && (props.tournamentAdmins.length > 0)) {\r\n\t\t\t// отображаем пункт меню администрирование турниров\r\n\t\t\tif (props.tournamentAdmins.find(x => x.UserProfileId == props.myProfile.UserProfileId) != undefined) {\r\n\t\t\t\tprops.setShowAdminTourneyTab(true)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tprops.setShowAdminTourneyTab(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [props.tournamentAdmins])\r\n\r\n\t// !! ================ useffects загрузка приложения ================== !!\r\n\r\n\tconst onRefresh = () => {\r\n\t\twindow.location.reload(true);\r\n\t\tsetIsFetching(false);\r\n\t}\r\n\r\n\tconst TournamentSelect = (item) => {\r\n\t\t//debugger\r\n\t\tprops.setTournamentMode(\"view\");\r\n\t\tprops.setSelectedTournament(item);\r\n\t\t// надо заполнять TournamentGroups!\r\n\t\t//props.setActiveMenuItem(\"tournamentitem\"); // отключил, тк установил компонент hoc withHistory\r\n\t\t//toMenuName=\"tournamentadmin\" selected={\"tournamentadmin\" === props.mainMenu.activeItem.name} data-story=\"tournamentadmin\"\r\n\t}\r\n\r\n\tconst CollectSelect = (item) => {\r\n\t\t//debugger\r\n\t\tprops.selectSimpleCollect(item);\r\n\t\tprops.setCollectItemMode(\"view\");\r\n\t\t//props.setActiveMenuItem(\"collectadmin\"); // отключил тк использовал компонент с hoc withHistory\r\n\t}\r\n\r\n\tconst CollectAdd = () => {\r\n\t\t//debugger\r\n\t\tprops.setCollectItemMode(\"add\");\r\n\t\t//props.setActiveMenuItem(\"collectadmin\"); // отключил, тк сделал кнопку через hoc withHistory\r\n\t}\r\n\r\n\tconst UpdateFromServer = () => {\r\n\t\twindow.location.reload(true);\r\n\t}\r\n\r\n\tlet test = () => {\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\tlet menuTabBarItems = props.mainMenu.menuItems.map(menuItem => {\r\n\t\tif (menuItem.enabled && menuItem.show)\r\n\t\t\treturn <TabbarItemWithHistory toMenuName={menuItem.name} selected={menuItem.name === props.mainMenu.activeItem.name} data-story={menuItem.name} text={menuItem.title}></TabbarItemWithHistory>\r\n\t\telse\r\n\t\t\treturn null\r\n\t}\r\n\t).filter(i => i);\r\n\r\n\t//if ((Array.isArray(props.tournamentsForBids.selectedTournament)) && (props.tournamentsForBids.selectedTournament.length > 0))\r\n\t//debugger\r\n\r\n\r\n\treturn (\r\n\t\t<PullToRefresh\r\n            onRefresh={onRefresh}\r\n            isFetching={isFetching}\r\n          >\r\n\t\t\t  <PanelHeader left={<BackButton isBack={true} />}>\r\n\t\t\t\t  <h6>потяните вниз для обновления</h6>\r\n\t\t\t  </PanelHeader>\r\n\t\t\t<Epic\r\n\t\t\t\tactiveStory={props.mainMenu.activeItem.name}\r\n\t\t\t\ttabbar={props.Connected ? \r\n\t\t\t\t\t<Tabbar>\r\n\t\t\t\t\t\t<TabbarItemWithHistory toMenuName=\"hot\" selected={\"hot\" === props.mainMenu.activeItem.name} data-story=\"hot\" text=\"Горячее\"></TabbarItemWithHistory>\r\n\t\t\t\t\t\t<TabbarItemWithHistory toMenuName=\"allTournaments\" selected={\"allTournaments\" === props.mainMenu.activeItem.name} data-story=\"allTournaments\" text=\"Турниры\"></TabbarItemWithHistory>\r\n\t\t\t\t\t\t{/* <TabbarItemWithHistory toMenuName=\"collectslist\" selected={\"collectslist\" === props.mainMenu.activeItem.name} data-story=\"collectslist\" text=\"Сборы\"></TabbarItemWithHistory> */}\r\n\t\t\t\t\t\t<TabbarItemWithHistory toMenuName=\"profile\" selected={\"profile\" === props.mainMenu.activeItem.name} data-story=\"profile\" text=\"Профиль\"></TabbarItemWithHistory>\r\n\t\t\t\t\t\t{props.ShowAdminTourneyTab && <TabbarItemWithHistory toMenuName=\"tournamentadmin\" selected={\"tournamentadmin\" === props.mainMenu.activeItem.name} data-story=\"tournamentadmin\" text=\"Управление турнирами\"></TabbarItemWithHistory>}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t//props.ShowAdminTeamTab \r\n\t\t\t\t\t\tprops.ShowAdminTourneyTab \r\n\t\t\t\t\t\t&& <TabbarItemWithHistory toMenuName=\"teamadmin\" selected={\"teamadmin\" === props.mainMenu.activeItem.name} data-story=\"teamadmin\" text=\"Мои команды\"></TabbarItemWithHistory>}\r\n\t\t\t\t\t</Tabbar>\r\n\t\t\t\t: null\t\r\n\t\t\t\t}>\r\n\r\n\t\t\t\t<View id=\"hot\" \r\n\t\t\t\t//activePanel={props.matches.hotPanel} \r\n\t\t\t\tactivePanel=\"main\" \r\n\t\t\t\tmodal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t{/* <PanelHeader >Горячее в городе</PanelHeader> */}\r\n\t\t\t\t\t\t<Group header={<Header mode=\"secondary\">Сервисы</Header>}>\r\n\t\t\t\t\t\t\t<CardGrid size=\"s\">\r\n\t\t\t\t\t\t\t\t<CardWithHistory\r\n\t\t\t\t\t\t\t\t\tdata-story=\"allTournaments\"  // необходимо для использования withHistory\r\n\t\t\t\t\t\t\t\t\ttext=\"Перейти к турнирам\" // необходимо для использования withHistory\r\n\t\t\t\t\t\t\t\t\ttoMenuName=\"allTournaments\"  // необходимо для использования withHistory\r\n\t\t\t\t\t\t\t\t\t//handleClick={CollectAdd} // необходимо для использования withHistory\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<img style={{width: '100%'}} src={tournament}></img>\r\n\t\t\t\t\t\t\t\t\t<span style={cardStyle}>Турниры<br />города</span>\r\n\t\t\t\t\t\t\t\t</CardWithHistory>\r\n\t\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t\t<img style={{width: '100%'}} src={player}></img>\r\n\t\t\t\t\t\t\t\t\t<span style={cardStyle}>Скоро<br />запуск</span>\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t<Card onClick={test}>\r\n\t\t\t\t\t\t\t\t\t<img style={{width: '100%'}} src={stadium}></img>\r\n\t\t\t\t\t\t\t\t\t<span style={cardStyle}>Скоро<br />запуск</span>\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</CardGrid>\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t\t<Group header={<Header mode=\"secondary\">Предстоящие матчи</Header>}>\r\n\t\t\t\t\t\t\t<Hot Name=\"Сегодня\" Matches={props.matches.hot.today}></Hot>\r\n\t\t\t\t\t\t\t<Hot Name=\"Завтра\" Matches={props.matches.hot.tomorrow}></Hot>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t\t<Group header={<Header mode=\"secondary\">Сыграны вчера</Header>}>\r\n\t\t\t\t\t\t\t<Hot Matches={props.matches.hot.yesterday}></Hot>\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"allTournaments\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tВсе турниры\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\t<Group header={<Header>Текущие турниры города</Header>}>\r\n\t\t\t\t\t\t\t<List>\r\n\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tprops.tournament.tournaments.map(t => {\r\n\r\n\t\t\t\t\t\t\t\t\t\treturn <RichCellWithHistory\r\n\t\t\t\t\t\t\t\t\t\t\tcaption={`Организатор: ${t.Founder.Name} ${t.Founder.Surname}`}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={(new Date(t.WhenBegin) > new Date()) ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t`Стартует \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${new Date(t.WhenBegin).getDate() <= 9 ? \"0\" + (new Date(t.WhenBegin).getDate()) : (new Date(t.WhenBegin).getDate())}.${new Date(t.WhenBegin).getMonth() + 1 <= 9 ? \"0\" + (new Date(t.WhenBegin).getMonth() + 1) : (new Date(t.WhenBegin).getMonth() + 1)}.${new Date(t.WhenBegin).getFullYear()}`\r\n\t\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"В процессе\"}\r\n\t\t\t\t\t\t\t\t\t\t\thandleClick={() => TournamentSelect(t)}\r\n\t\t\t\t\t\t\t\t\t\t\tdata-story=\"tournamentitem\"\r\n\t\t\t\t\t\t\t\t\t\t\ttoMenuName=\"tournamentitem\"\r\n\t\t\t\t\t\t\t\t\t\t>{t.Name}</RichCellWithHistory>\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</List>\r\n\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t\t<Group hidden header={<Header>Архивные турниры города</Header>}>\r\n\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"collectslist\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tВсе сборы\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\t<FormItem>\r\n\t\t\t\t\t\t\t<CellButtonWithHistory\r\n\t\t\t\t\t\t\t\tdata-story=\"collectadmin\"  // необходимо для использования withHistory\r\n\t\t\t\t\t\t\t\ttext=\"Создать сбор\" // необходимо для использования withHistory\r\n\t\t\t\t\t\t\t\ttoMenuName=\"collectadmin\"  // необходимо для использования withHistory\r\n\t\t\t\t\t\t\t\thandleClick={CollectAdd} // необходимо для использования withHistory\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tАрендовать площадку и собрать людей</CellButtonWithHistory>\r\n\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t<Group header={<Header>Текущие сборы города</Header>}>\r\n\t\t\t\t\t\t\t<List>\r\n\r\n\t\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t\t\tprops.collect.collects.sort((a, b) => new Date(a.When).getTime() - new Date(b.When).getTime())\r\n\t\t\t\t\t\t\t\t\t\t.map(t => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet timeEnding = addToTime(new Date(t.When), 0, t.DurationMinutes);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\treturn <RichCellWithHistory\r\n\t\t\t\t\t\t\t\t\t\t\t\tcaption={`Организатор: ${t.Creator.Name} ${t.Creator.Surname}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext={(new Date(t.When) > new Date()) ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`Начало \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${new Date(t.When).getDate() <= 9 ? \"0\" + (new Date(t.When).getDate()) : (new Date(t.When).getDate())}.${new Date(t.When).getMonth() + 1 <= 9 ? \"0\" + (new Date(t.When).getMonth() + 1) : (new Date(t.When).getMonth() + 1)}.${new Date(t.When).getFullYear()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tв \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${new Date(t.When).getHours() <= 9 ? \"0\" + (new Date(t.When).getHours()) : (new Date(t.When).getHours())}:${new Date(t.When).getMinutes() <= 9 ? \"0\" + (new Date(t.When).getMinutes()) : (new Date(t.When).getMinutes())}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t((timeEnding > new Date())\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"В процессе\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Закончен\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\thandleClick={() => CollectSelect(t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tafter={`${t.Cost} руб.`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-story=\"collectadmin\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttoMenuName=\"collectadmin\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t({t.Members.length}/{t.NeedMembers}) - {t.Name}\r\n\t\t\t\t\t\t\t\t\t\t\t</RichCellWithHistory>\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</List>\r\n\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t\t<Group hidden header={<Header>Архивные сборы</Header>}>\r\n\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"collectadmin\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tУправление сборами\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\t<SimpleCollectItem></SimpleCollectItem>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"profile\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tПрофиль\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\t<Group>{props.myProfile && props.myProfile.Name && <FormItem>\r\n\t\t\t\t\t\t\t<InfoRow header=\"Имя\">{props.myProfile && props.myProfile.Name}</InfoRow>\r\n\t\t\t\t\t\t\t<InfoRow header=\"Фамилия\">{props.myProfile && props.myProfile.Surname}</InfoRow>\r\n\t\t\t\t\t\t\t<InfoRow header=\"Город\">{props.myProfile && props.myProfile.CityName}</InfoRow>\r\n\t\t\t\t\t\t\t<InfoRow header=\"Год рождения\">{props.myProfile && new Date(props.myProfile.Birth).getFullYear()}</InfoRow>\r\n\t\t\t\t\t\t\t<InfoRow header=\"Id города привязки\">{props.myProfile && props.myProfile.CityUmbracoId}</InfoRow>\r\n\t\t\t\t\t\t\t<InfoRow header=\"Город привязки\">{props.myProfile && props.myProfile.CityUmbracoName}</InfoRow>\r\n\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t\t<Group hidden>\r\n\t\t\t\t\t\t\tОписание проекта, возможность написать автору, выбор амплуа, выбор уровня (не играл, новичек, город и тд)\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\tСсылка на сайт и на канал на ютубе, где документация есть по проекту\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\tсделать кнопку \"подписаться на уведомления\"\r\n\t\t\t\t\t\t\tзапросить разрешение на отправку сообщения от имени приложения (или сообщества?)\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t\t<Group header=\"Опции\">\r\n\t\t\t\t\t\t\t<FormItem>\r\n\t\t\t\t\t\t\t\t<ButtonWithNotify Message=\"Подписаться на уведомления от сервиса?\" mode=\"primary\" Yes={() => bridge.send(\"VKWebAppAllowNotifications\")}>Подписаться на события</ButtonWithNotify>\r\n\t\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t\t<ProfilePanel></ProfilePanel>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"tournamentadmin\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tУправление турнирами\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t\t<TournamentAdminPanel></TournamentAdminPanel>\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"teamadmin\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tМои команды\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t\t<TeamAdminPanel></TeamAdminPanel>\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"tournamentitem\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tТурнир\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t\t<TournamentItem\r\n\t\t\t\t\t\t\t\tmode={props.tournament.mode}\r\n\t\t\t\t\t\t\t//Tab=\"shedule\"\r\n\t\t\t\t\t\t\t//mode=\"view\"\r\n\t\t\t\t\t\t\t></TournamentItem>\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"teamitem\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tКоманда\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t\t<TeamItem mode={props.team.mode}></TeamItem>\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"matchitem\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tМатч\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t\t<MatchItem match={props.matches.selected}></MatchItem>\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"bidlist\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tДоступно для заявки\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t\t{/* <BidTeamTournamentGroupsList\r\n\t\t\t\t\t\t\t\t\t\t\tButton1Handle = {MakeBid}\r\n\t\t\t\t\t\t\t\t\t\t\tButton2Handle = {CancelBid}\r\n\t\t\t\t\t\t\t\t\t\t\tList={(props.tournamentsForBids.selectedTournament  \r\n\t\t\t\t\t\t\t\t\t\t\t\t&& Array.isArray(props.tournamentsForBids.selectedTournament) \r\n\t\t\t\t\t\t\t\t\t\t\t\t&& props.tournamentsForBids.selectedTournament.TournamentGroups.length > 0) \r\n\t\t\t\t\t\t\t\t\t\t\t\t? props.tournamentsForBids.selectedTournament.TournamentGroups\r\n\t\t\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tBids={(props.tournamentsForBids.myBids \r\n\t\t\t\t\t\t\t\t\t\t\t\t&& Array.isArray(props.tournamentsForBids.myBids)\r\n\t\t\t\t\t\t\t\t\t\t\t\t&& props.tournamentsForBids.myBids.length > 0) \r\n\t\t\t\t\t\t\t\t\t\t\t\t? props.tournamentsForBids.myBids\r\n\t\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t></BidTeamTournamentGroupsList> */}\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"viewuser\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<PanelHeader\r\n\t\t\t\t\t\t\tleft={<BackButton isBack={true} />}\r\n\t\t\t\t\t\t//right={<AddCollectButton isBack={false} toMenuName=\"addcollect\"></AddCollectButton>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tИгрок\r\n\t\t\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t\tИгрок\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View id=\"notauthorized\" activePanel=\"main\" modal={props.CurrentModalWindow} popout={props.globalPopout ? <ScreenSpinner></ScreenSpinner> : null }>\r\n\t\t\t\t\t<Panel id=\"main\">\r\n\t\t\t\t\t\t<CardGrid size=\"l\">\r\n\t\t\t\t\t\t\t<Card style={{height: '100%'}}>\r\n\t\t\t\t\t\t\t\t<FormItem style={{height: '100px'}}>\r\n\t\t\t\t\t\t\t\t\t<span style={cardStyle}><Title>{!props.Connected ? 'Соединение...' : 'Авторизация...'}</Title></span>\r\n\t\t\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</CardGrid>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\r\n\t\t\t\t</View>\r\n\r\n\r\n\t\t\t</Epic>\r\n\t\t</PullToRefresh>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\r\n\treturn {\r\n\t\tmainMenu: state.mainMenu,\r\n\t\tShowAdminTourneyTab: state.system.ShowAdminTourneyTab,\r\n\t\tShowAdminTeamTab: state.system.ShowAdminTeamTab,\r\n\t\tCurrentModalWindow: state.system.CurrentModalWindow,\r\n\t\tLoading: state.system.Loading,\r\n\t\tConnected: state.system.Connected,\r\n\t\tCheckLoading: state.system.CheckLoading,\r\n\t\tcities: state.cityEntity.cities,\r\n\t\t//places: state.placeEntity.places,\r\n\t\tplaces: state.simplePlaceEntity.places,\r\n\t\tglobalPopout: state.system.GlobalPopout,\r\n\t\tvkProfile: state.profileEntity.vkProfile,\r\n\t\tmyProfile: state.profileEntity.myProfile,\r\n\t\terrorObject: state.system.ErrorObject,\r\n\t\t//`errorMessage: state.system.ErrorObject.message,\r\n\t\ttriedToGetProfile: state.profileEntity.triedToGetProfile,\r\n\t\ttournamentAdmins: state.tournamentsEntity.cityTournamentAdmins,\r\n\t\ttournament: state.tournamentsEntity,\r\n\t\tcollect: state.collectEntity,\r\n\t\tteam: state.teamsEntity,\r\n\t\tbidTeams: state.bidTeamsEntity,\r\n\t\tmatches: state.matches,\r\n\t\ttournamentsForBids: state.bidTeamsEntity,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, { \r\n\tsetCurrentModalWindow, setLoading, goToPanel, checkConnection, updateLoading,\r\n\tgetAllSimpleCollectsInCityByCityUmbracoId, getAllSimplePlacesInCityByCityId, getAllRentsInCityByCityId, getUser, setSelectedUser,\r\n\taddBidTeamToTournamentGroup, cancelBidTeamToTournamentGroup, getActualTournamentsInCity, getTournamentsByCityId, setSelectedTournament, setTournamentMode, setCollectItemMode,\r\n\tsetActiveMenuItem, setVkProfileInfo, setGlobalPopout, getUserProfile, getAuthInfo, setTriedToGetProfile, setHotPanel, resetError, selectSimpleCollect,\r\n\tgetAllCitiesFromServer, setUserProfileCity, getAllCityTournamentAdminsByCityId, setShowAdminTourneyTab, getMatchesInCurrentCity,\r\n})(App);\r\n","import { users } from \"./constants/commonConstants\";\r\n\r\nconst ANY_ACTION_TYPE = \"ANY_ACTION_TYPE\";\r\n\r\n\r\nconst initState = {\r\n    users: [\r\n        users[0],\r\n        users[1],\r\n    ]\r\n}\r\n\r\n\r\nlet userReducer = (state = initState, action) => \r\n{\r\n    switch (action.type){\r\n        case ANY_ACTION_TYPE: {\r\n            return state;\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const anyActionCreator = (val) => {\r\n    return {\r\n        type: ANY_ACTION_TYPE,\r\n        anyVal: val\r\n    }\r\n}\r\n\r\n\r\nexport default userReducer;","const ANY_ACTION_TYPE = \"ANY_ACTION_TYPE\";\r\n\r\nexport const ampluaCathegoryTypes = [\r\n    {id: 0, name: \"Вратарь\"},\r\n    {id: 1, name: \"Защитник\"},\r\n    {id: 2, name: \"Полузащитник\"},\r\n    {id: 3, name: \"Нападающий\"},\r\n    {id: 4, name: \"Тренер\"},\r\n    {id: 5, name: \"Административный персонал\"},\r\n]\r\n\r\nexport const ampluaTypes = [\r\n    {id: 0, name: \"Вратарь\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 1, name: \"Правый защитник\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 2, name: \"Левый защитник\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 3, name: \"Центральный защитник\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 4, name: \"Передний защитник\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 5, name: \"Последний защитник\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 6, name: \"Правый полузащитник\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 7, name: \"Левый полузащитник\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 8, name: \"Центральный полузащитник\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 9, name: \"Атакующий полузащитник\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 10, name: \"Опорный полузащитник\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 11, name: \"Левый вингер\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 12, name: \"Правый вингер\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 13, name: \"Левый нападающий\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 14, name: \"Правый нападающий\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 15, name: \"Центральный нападающий\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 16, name: \"Игрок под нападающими\", isPlayer: true, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 17, name: \"Тренер\", isPlayer: false, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 18, name: \"Помощник тренера\", isPlayer: false, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 19, name: \"Администратор команды\", isPlayer: false, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 20, name: \"Организатор сбора\", isPlayer: false, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 21, name: \"\", isPlayer: false, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n    {id: 22, name: \"\", isPlayer: false, ampluaCathegory: ampluaCathegoryTypes[0]},\r\n]\r\n\r\nconst initState = {\r\n\r\n}\r\n\r\n\r\nlet ampluaReducer = (state = initState, action) => \r\n{\r\n    switch (action.type){\r\n        case ANY_ACTION_TYPE: {\r\n            return state;\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const anyActionCreator = (val) => {\r\n    return {\r\n        type: ANY_ACTION_TYPE,\r\n        anyVal: val\r\n    }\r\n}\r\n\r\n\r\nexport default ampluaReducer;","import {createStore, combineReducers, applyMiddleware, compose} from 'redux'\r\nimport profileReducer from './profileReducer.js'\r\nimport collectReducer from './collectReducer.js'\r\nimport userReducer from './userReducer.js'\r\nimport hot from './hotReducer.js'\r\nimport tournaments from './tournamentsReducer.js'\r\nimport teams from './teamsReducer.js'\r\nimport bidTeams from './bidTeamsReducer.js'\r\nimport ampluaReducer from './ampluaReducer.js'\r\n//import placeReducer from './placeReducer.js'\r\nimport rentReducer from './rentReducer.js'\r\nimport simplePlaceReducer from './simplePlaceReducer.js'\r\nimport paymentReducer from './paymentReducer.js'\r\nimport mainMenuReducer from './mainMenuReducer.js'\r\nimport systemReducer from './systemReducer.js'\r\nimport cityReducer from './cityReducer.js'\r\nimport matchReducer from './matchReducer.js'\r\nimport vkReducer from './vkReducer.js'\r\nimport {composeWithDevTools} from 'redux-devtools-extension'\r\nimport thunkMiddleware from 'redux-thunk'\r\n\r\nconst composeEnhancers =\r\n  process.env.NODE_ENV !== 'production' &&\r\n  window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?   \r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n      name: 'MyApp', actionsBlacklist: ['REDUX_STORAGE_SAVE']\r\n    }) : compose;\r\n\r\n\r\nlet reducers = combineReducers({\r\n    profileEntity: profileReducer,\r\n    collectEntity: collectReducer,\r\n    hotEntity: hot,\r\n    tournamentsEntity: tournaments,\r\n    teamsEntity: teams,\r\n    teamsEntity: teams,\r\n    bidTeamsEntity: bidTeams,\r\n    matches: matchReducer,\r\n    userEntity: userReducer,\r\n    cityEntity: cityReducer,\r\n    ampluaEntity: ampluaReducer,\r\n    //placeEntity: placeReducer,\r\n    rentEntity: rentReducer,\r\n    vkcom: vkReducer,\r\n    simplePlaceEntity: simplePlaceReducer,\r\n    paymentEntity: paymentReducer,\r\n    mainMenu: mainMenuReducer,\r\n    system: systemReducer,\r\n})\r\n\r\n// const middlewareEnhancer = applyMiddleware(thunkMiddleware)\r\n// const composedEnhancers = compose(middlewareEnhancer, monitorReducerEnhancer)\r\n// composeEnhancers(\r\n//     applyMiddleware(thunk))\r\n\r\n//let store = createStore(reducers, composeWithDevTools(applyMiddleware(thunkMiddleware)));\r\nlet store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\nwindow.store = store;\r\n\r\nexport default store","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport App from \"./App\";\r\nimport store from './store/store'\r\nimport { Provider } from \"react-redux\";\r\nimport { AdaptivityProvider, AppRoot, ConfigProvider, usePlatform } from \"@vkontakte/vkui\";\r\n\r\n// Init VK  Mini App\r\nbridge.send(\"VKWebAppInit\");\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ConfigProvider>\r\n      <AdaptivityProvider>\r\n        <AppRoot>\r\n          <App />\r\n        </AppRoot>\r\n      </AdaptivityProvider>\r\n    </ConfigProvider>\r\n  </Provider>, document.getElementById(\"root\"));\r\nif (process.env.NODE_ENV === \"development\") {\r\n  import(\"./eruda\").then(({ default: eruda }) => { }); //runtime download\r\n}\r\n"],"sourceRoot":""}